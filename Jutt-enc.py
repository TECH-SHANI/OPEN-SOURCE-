import base64
exec(base64.b64decode("IyBEZWNvbXBpbGUgYnkgTXIgSmFkdWdhciBUaGUgR2FtZXIKIyBEb250IFBsYXkgd2l0aCBtZSBiY296IGkgd2lsbCBmdWNrIHlvdQppbXBvcnQgb3MsIHN5cywgdGltZSwgZGF0ZXRpbWUsIHJlLCB0aHJlYWRpbmcsIGpzb24sIHJhbmRvbSwgcmVxdWVzdHMsIGhhc2hsaWIsIGNvb2tpZWxpYiwgdXVpZApmcm9tIG11bHRpcHJvY2Vzc2luZy5wb29sIGltcG9ydCBUaHJlYWRQb29sCmZyb20gcmVxdWVzdHMuZXhjZXB0aW9ucyBpbXBvcnQgQ29ubmVjdGlvbkVycm9yCl9fYXV0aG9yX18gPSAnTXIuSmFtZXMnCl9fY29weXJpZ2h0ID0gJ0FsbCByaWdodHMgcmVzZXJ2ZWQgLiBDb3B5cmlnaHQgIE1yLkphbWVzJwpvcy5zeXN0ZW0oJ3Rlcm11eC1zZXR1cC1zdG9yYWdlJykKdHJ5OgogICAgb3MubWtkaXIoJy9zZGNhcmQvaWRzJykKZXhjZXB0IE9TRXJyb3I6CiAgICBwYXNzCgpiZCA9IHJhbmRvbS5yYW5kaW50KDIwMDAwMDAwLjAsIDMwMDAwMDAwLjApCnNpbSA9IHJhbmRvbS5yYW5kaW50KDIwMDAwLCA0MDAwMCkKaGVhZGVyID0geyd4LWZiLWNvbm5lY3Rpb24tYmFuZHdpZHRoJzogcmVwcihiZCksICd4LWZiLXNpbS1obmknOiByZXByKHNpbSksIAogICAneC1mYi1uZXQtaG5pJzogcmVwcihzaW0pLCAKICAgJ3gtZmItY29ubmVjdGlvbi1xdWFsaXR5JzogJ0VYQ0VMTEVOVCcsIAogICAneC1mYi1jb25uZWN0aW9uLXR5cGUnOiAnY2VsbC5DVFJhZGlvQWNjZXNzVGVjaG5vbG9neUhTRFBBJywgCiAgICd1c2VyLWFnZW50JzogJ0RhbHZpay8xLjYuMCAoTGludXg7IFU7IEFuZHJvaWQgNC40LjI7IE5YNTUgQnVpbGQvS09UNTUwNikgW0ZCQU4vRkI0QTtGQkFWLzEwNi4wLjAuMjYuNjg7RkJCVi80NTkwNDE2MDtGQkRNL3tkZW5zaXR5PTMuMCx3aWR0aD0xMDgwLGhlaWdodD0xOTIwfTtGQkxDL2l0X0lUO0ZCUlYvNDU5MDQxNjA7RkJDUi9Qb3N0ZU1vYmlsZTtGQk1GL2FzdXM7RkJCRC9hc3VzO0ZCUE4vY29tLmZhY2Vib29rLmthdGFuYTtGQkRWL0FTVVNfWjAwQUQ7RkJTVi81LjA7RkJPUC8xO0ZCQ0EveDg2OmFybWVhYmktdjdhO10nLCAKICAgJ2NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnLCAKICAgJ3gtZmItaHR0cC1lbmdpbmUnOiAnTGlnZXInfQpvcy5zeXN0ZW0oJ2dpdCBwdWxsJykKb3Muc3lzdGVtKCdjbGVhcicpCmxvZ28gPSAnXG5ceDFiWzE7OTJtICAgICAgICAgICAgICBcblx4MWJbMTs5Mm0gICAgICAgICAgICAgICAgICAgICAgXG5ceDFiWzE7OTZtICAgICAgICAgICAgICAgICAgICAgICAgXG5ceDFiWzE7OTJtICAgICB7fSB7fSAge30ge317fXt9IHt9e317fSBcblx4MWJbMTs5N20gICAgIHt9IHt9ICB7fSAgIHt9ICAgICB7fSBcblx4MWJbMTs5M20gICAgIHt9IHt9ICB7fSAgIHt9ICAgICB7fSAgXG5ceDFiWzE7OTZtICAgICB7fSB7fSAge30gICB7fSAgICAge30gXG5ceDFiWzE7OTRtICB7fXt9ICAge317fSAgICB7fSAgICAge30gIFxuXHgxYlsxOzkzbSAgICAgICAgICAgICAgICAgICAgICBcblx4MWJbMTs5Mm0gICAgICAgICBKdXR0IEJhZHNoYWggQnJhbmR+ICAgICAgICAgICAgICAgICAgICAgICBcblx4MWJbMTs5MW0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHgxYlsxOzk3bVx4ZTJceDllXHhhMyBBdXRob3IgOiBKdXR0IEJhZHNoYWggeCA/Pz8/P1xuXHgxYlsxOzk3bVx4ZTJceDllXHhhMyBHaXRodWIgOiBodHRwczovL2dpdGh1Yi5jb20vU0hPT1RFUi1NQUtFUlxuXHgxYlsxOzk3bVx4ZTJceDllXHhhMyBXUCBOTzogKzkyMzAwNzU3NDMxMFxuXHgxYlsxOzkxbS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tJwoKZGVmIHJlZygpOgogICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICBwcmludCBsb2dvCiAgICBwcmludCAnJwogICAgcHJpbnQgJ1x4MWJbMTszMTsxbVRha2UgVGhlIEFwcHJvdmFsIEZvciBMb2dpbiBDaGFyZ2VzIDM1MCcKICAgIHByaW50ICcnCiAgICB0aW1lLnNsZWVwKDEpCiAgICB0cnk6CiAgICAgICAgdG8gPSBvcGVuKCcvc2RjYXJkLy5oc3QudHh0JywgJ3InKS5yZWFkKCkKICAgIGV4Y2VwdCAoS2V5RXJyb3IsIElPRXJyb3IpOgogICAgICAgIHJlZzIoKQoKICAgIHIgPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vZ2l0aHViLmNvbS80QjkyQi9BcHByb3ZhbC50L2Jsb2IvbWFpbi9BcHByb3ZhbC50eHQnKS50ZXh0CiAgICBpZiB0byBpbiByOgogICAgICAgIG9zLnN5c3RlbSgnY2QgLi4uLi4gJiYgbnBtIGluc3RhbGwnKQogICAgICAgIG9zLnN5c3RlbSgnZnVzZXIgLWsgNTAwMC90Y3AgJicpCiAgICAgICAgb3Muc3lzdGVtKCcjJykKICAgICAgICBvcy5zeXN0ZW0oJ2NkIC4uLi4uICYmIG5vZGUgaW5kZXguanMgJicpCiAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgIGlwKCkKICAgIGVsc2U6CiAgICAgICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICAgICAgcHJpbnQgbG9nbwogICAgICAgIHByaW50ICdcdEFwcHJvdmVkIEZhaWxlZCcKICAgICAgICBwcmludCAnIFx4MWJbMTs5Mm1Zb3VyIElkIElzIE5vdCBBcHByb3ZlZCBBbHJlYWR5ICcKICAgICAgICBwcmludCAnIFx4MWJbMTs5Mm1Db3B5IHRoZSBpZCBhbmQgc2VuZCB0byBhZG1pbicKICAgICAgICBwcmludCAnIFx4MWJbMTs5Mm1Zb3VyIGlkOiAnICsgdG8KICAgICAgICByYXdfaW5wdXQoJ1x4MWJbMTs5M20gUHJlc3MgZW50ZXIgdG8gc2VuZCBpZCcpCiAgICAgICAgb3Muc3lzdGVtKCd4ZGctb3BlbiBodHRwczovL3dhLm1lLys5MjM0NzUzNTM1MDAnKQogICAgICAgIHJlZygpCgoKZGVmIHJlZzIoKToKICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgcHJpbnQgbG9nbwogICAgcHJpbnQgJ1x0QXBwcm92YWwgbm90IGRldGVjdGVkJwogICAgcHJpbnQgJyBceDFiWzE7OTJtQ29weSBhbmQgcHJlc3MgZW50ZXIgLCB0aGVuIHNlbGVjdCB3aGF0c2FwcCB0byBjb250aW51ZScKICAgIGlkID0gdXVpZC51dWlkNCgpLmhleFs6NTBdCiAgICBwcmludCAnIFlvdXIgaWQ6ICcgKyBpZAogICAgcHJpbnQgJycKICAgIHJhd19pbnB1dCgnIFByZXNzIGVudGVyIHRvIGdvIHRvIHdoYXRzYXBwICcpCiAgICBvcy5zeXN0ZW0oJ3hkZy1vcGVuIGh0dHBzOi8vd2EubWUvKzkyMzQ3NTM1MzUwMCcpCiAgICBzYXYgPSBvcGVuKCcvc2RjYXJkLy5oc3QudHh0JywgJ3cnKQogICAgc2F2LndyaXRlKGlkKQogICAgc2F2LmNsb3NlKCkKICAgIHJhd19pbnB1dCgnXHgxYlsxOzkybSBQcmVzcyBlbnRlciB0byBjaGVjayBBcHByb3ZhbCAnKQogICAgcmVnKCkKCgpkZWYgaXAoKToKICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgcHJpbnQgbG9nbwogICAgcHJpbnQgJ1x0Q29sbGVjdGluZyBkZXZpY2UgaW5mbycKICAgIHRyeToKICAgICAgICBpcGluZm8gPSByZXF1ZXN0cy5nZXQoJ2h0dHA6Ly9pcC1hcGkuY29tL2pzb24vJykKICAgICAgICB6ID0ganNvbi5sb2FkcyhpcGluZm8udGV4dCkKICAgICAgICBpcHMgPSB6WydxdWVyeSddCiAgICAgICAgY291bnRyeSA9IHpbJ2NvdW50cnknXQogICAgICAgIHJlZ2kgPSB6WydyZWdpb25OYW1lJ10KICAgICAgICBuZXR3b3JrID0gelsnaXNwJ10KICAgIGV4Y2VwdDoKICAgICAgICBwYXNzCgogICAgcHJpbnQgJ1x4MWJbMTs5Mm0gWW91ciBpcDogJyArIGlwcwogICAgdGltZS5zbGVlcCgxKQogICAgcHJpbnQgJ1x4MWJbMTs5Mm0gWW91ciBjb3VudHJ5OiAnICsgY291bnRyeQogICAgdGltZS5zbGVlcCgxKQogICAgcHJpbnQgJ1x4MWJbMTs5Mm0gWW91ciByZWdpb246ICcgKyByZWdpCiAgICB0aW1lLnNsZWVwKDEpCiAgICBwcmludCAnIFx4MWJbMTs5Mm1Zb3VyIG5ldHdvcms6ICcgKyBuZXR3b3JrCiAgICB0aW1lLnNsZWVwKDEpCiAgICBwcmludCAnIExvYWRpbmcgLi4uJwogICAgdGltZS5zbGVlcCgxKQogICAgbG9nX21lbnUoKQoKCmRlZiBsb2dfbWVudSgpOgogICAgdHJ5OgogICAgICAgIHRfY2hlY2sgPSBvcGVuKCdhY2Nlc3NfdG9rZW4udHh0JywgJ3InKQogICAgICAgIG1lbnUoKQogICAgZXhjZXB0IChLZXlFcnJvciwgSU9FcnJvcik6CiAgICAgICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICAgICAgcHJpbnQgbG9nbwogICAgICAgIHByaW50ICdceDFiWzE7OTNtIH5+fn4gTG9naW4gbWVudSB+fn5+XHgxYlsxOzkxbScKICAgICAgICBwcmludCA0NyAqICctJwogICAgICAgIHByaW50ICdceDFiWzE7OTJtWzFdIExvZ2luIHdpdGggRmFjZUJvb2snCiAgICAgICAgcHJpbnQgJ1x4MWJbMTs5Mm1bMl0gTG9naW4gd2l0aCB0b2tlbicKICAgICAgICBwcmludCAnXHgxYlsxOzkybVszXSBMb2dpbiB3aXRoIGNvb2tpZXMnCiAgICAgICAgcHJpbnQgJycKICAgICAgICBsb2dfbWVudV9zKCkKCgpkZWYgbG9nX21lbnVfcygpOgogICAgcyA9IHJhd19pbnB1dCgnIFx4MWJbMTs5N21ceGUyXHg5NVx4YjBceGUyXHg5NFx4ODBKdXR0XHhlMlx4OWVceGE0ICcpCiAgICBpZiBzID09ICcxJzoKICAgICAgICBsb2dfZmIoKQogICAgZWxpZiBzID09ICcyJzoKICAgICAgICBsb2dfdG9rZW4oKQogICAgZWxpZiBzID09ICczJzoKICAgICAgICBsb2dfY29va2llKCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQgJycKICAgICAgICBwcmludCAnXFwgU2VsZWN0IHZhbGlkIG9wdGlvbiAnCiAgICAgICAgcHJpbnQgJycKICAgICAgICBsb2dfbWVudV9zKCkKCgpkZWYgbG9nX2ZiKCk6CiAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgIHByaW50IGxvZ28KICAgIHByaW50ICdceDFiWzE7MzE7MW1Mb2dpbiB3aXRoIGlkL3Bhc3MnCiAgICBwcmludCA0NyAqICctJwogICAgbGlkID0gcmF3X2lucHV0KCdceDFiWzE7OTJtIElkL21haWwvbm86ICcpCiAgICBwd2RzID0gcmF3X2lucHV0KCcgXHgxYlsxOzkzbVBhc3N3b3JkOiAnKQogICAgdHJ5OgogICAgICAgIGRhdGEgPSByZXF1ZXN0cy5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6NTAwMC9hdXRoP2lkPScgKyB1aWQgKyAnJnBhc3M9JyArIHB3ZCkudGV4dAogICAgICAgIHEgPSBqc29uLmxvYWRzKGRhdGEpCiAgICAgICAgaWYgJ2xvYycgaW4gcToKICAgICAgICAgICAgdHMgPSBvcGVuKCdhY2Nlc3NfdG9rZW4udHh0JywgJ3cnKQogICAgICAgICAgICB0cy53cml0ZShxWydsb2MnXSkKICAgICAgICAgICAgdHMuY2xvc2UoKQogICAgICAgICAgICBtZW51KCkKICAgICAgICBlbGlmICd3d3cuZmFjZWJvb2suY29tJyBpbiBxWydlcnJvciddOgogICAgICAgICAgICBwcmludCAnIFVzZXIgbXVzdCB2ZXJpZnkgYWNjb3VudCBiZWZvcmUgbG9naW4nCiAgICAgICAgICAgIHJhd19pbnB1dCgnXHgxYlsxOzkybSBQcmVzcyBlbnRlciB0byB0cnkgYWdhaW4gJykKICAgICAgICAgICAgbG9nX2ZiKCkKICAgICAgICBlbHNlOgogICAgICAgICAgICBwcmludCAnIElkL1Bhc3MgbWF5IGJlIHdyb25nJwogICAgICAgICAgICByYXdfaW5wdXQoJyBceDFiWzE7OTJtUHJlc3MgZW50ZXIgdG8gdHJ5IGFnYWluICcpCiAgICAgICAgICAgIGxvZ19mYigpCiAgICBleGNlcHQ6CiAgICAgICAgcHJpbnQgJycKICAgICAgICBwcmludCAnRXhpdGluZyB0b29sJwogICAgICAgIG9zLnN5c3RlbSgnZXhpdCcpCgoKZGVmIGxvZ190b2tlbigpOgogICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICBwcmludCBsb2dvCiAgICBwcmludCAnXHgxYlsxOzkzbUxvZ2luIHdpdGggdG9rZW5ceDFiWzE7OTFtJwogICAgcHJpbnQgNDcgKiAnLScKICAgIHRvayA9IHJhd19pbnB1dCgnIFx4MWJbMTs5Mm1QYXN0ZSB0b2tlbiBoZXJlOiBceDFiWzE7OTFtJykKICAgIHByaW50IDQ3ICogJy0nCiAgICB0X3MgPSBvcGVuKCdhY2Nlc3NfdG9rZW4udHh0JywgJ3cnKQogICAgdF9zLndyaXRlKHRvaykKICAgIHRfcy5jbG9zZSgpCiAgICBtZW51KCkKCgpkZWYgbG9nX2Nvb2tpZSgpOgogICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICBwcmludCBsb2dvCiAgICBwcmludCAnJwogICAgcHJpbnQgJ1x4MWJbMTszMTsxbUxvZ2luIENvb2tpZXMnCiAgICBwcmludCAnJwogICAgdHJ5OgogICAgICAgIGNvb2tpZSA9IHJhd19pbnB1dCgnIFBhc3RlIGNvb2tpZXMgaGVyZTogJykKICAgICAgICBkYXRhID0geyd1c2VyLWFnZW50JzogJ01vemlsbGEvNS4wIChYMTE7IExpbnV4IHg4Nl82NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgS2l3aSBDaHJvbWUvNjguMC4zNDM4LjAgU2FmYXJpLzUzNy4zNicsICdyZWZlcmVyJzogJ2h0dHBzOi8vbS5mYWNlYm9vay5jb20vJywgCiAgICAgICAgICAgJ2hvc3QnOiAnbS5mYWNlYm9vay5jb20nLCAKICAgICAgICAgICAnb3JpZ2luJzogJ2h0dHBzOi8vbS5mYWNlYm9vay5jb20nLCAKICAgICAgICAgICAndXBncmFkZS1pbnNlY3VyZS1yZXF1ZXN0cyc6ICcxJywgCiAgICAgICAgICAgJ2FjY2VwdC1sYW5ndWFnZSc6ICdpZC1JRCxpZDtxPTAuOSxlbi1VUztxPTAuOCxlbjtxPTAuNycsIAogICAgICAgICAgICdjYWNoZS1jb250cm9sJzogJ21heC1hZ2U9MCcsIAogICAgICAgICAgICdhY2NlcHQnOiAndGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksaW1hZ2Uvd2VicCxpbWFnZS9hcG5nLCovKjtxPTAuOCcsIAogICAgICAgICAgICdjb250ZW50LXR5cGUnOiAndGV4dC9odG1sOyBjaGFyc2V0PXV0Zi04JywgCiAgICAgICAgICAgJ2Nvb2tpZSc6IGNvb2tpZX0KICAgICAgICBjMSA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9tLmZhY2Vib29rLmNvbS9jb21wb3Nlci9vY2Vsb3QvYXN5bmNfbG9hZGVyLz9wdWJsaXNoZXI9ZmVlZCNfPV8nLCBoZWFkZXJzPWRhdGEpCiAgICAgICAgYzIgPSByZS5zZWFyY2goJyhFQUFBXFx3KyknLCBjMS50ZXh0KQogICAgICAgIGhhc2lsID0gYzIuZ3JvdXAoMSkKICAgICAgICBvayA9IG9wZW4oJ2FjY2Vzc190b2tlbi50eHQnLCAndycpCiAgICAgICAgb2sud3JpdGUoaGFzaWwpCiAgICAgICAgb2suY2xvc2UoKQogICAgICAgIG1lbnUoKQogICAgZXhjZXB0IEF0dHJpYnV0ZUVycm9yOgogICAgICAgIHByaW50ICcnCiAgICAgICAgcHJpbnQgJ1x0SW52YWxpZCBjb29raWVzJwogICAgICAgIHByaW50ICcnCiAgICAgICAgcmF3X2lucHV0KCcgXHgxYlsxOzkybVByZXNzIGVudGVyIHRvIHRyeSBhZ2FpbiAnKQogICAgICAgIGxvZ19tZW51KCkKICAgIGV4Y2VwdCBVbmJvdW5kTG9jYWxFcnJvcjoKICAgICAgICBwcmludCAnJwogICAgICAgIHByaW50ICdcdEludmFsaWQgY29va2llcycKICAgICAgICBwcmludCAnJwogICAgICAgIHJhd19pbnB1dCgnIFx4MWJbMTs5Mm1QcmVzcyBlbnRlciB0byB0cnkgYWdhaW4gJykKICAgICAgICBsb2dfbWVudSgpCiAgICBleGNlcHQgcmVxdWVzdHMuZXhjZXB0aW9ucy5TU0xFcnJvcjoKICAgICAgICBwcmludCAnJwogICAgICAgIHByaW50ICdcdEludmFsaWQgY29va2llcycKICAgICAgICBwcmludCAnJwogICAgICAgIHJhd19pbnB1dCgnIFx4MWJbMTs5Mm1QcmVzcyBlbnRlciB0byB0cnkgYWdhaW4gJykKICAgICAgICBsb2dfbWVudSgpCgoKZGVmIG1lbnUoKToKICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgdHJ5OgogICAgICAgIHRva2VuID0gb3BlbignYWNjZXNzX3Rva2VuLnR4dCcsICdyJykucmVhZCgpCiAgICBleGNlcHQgKEtleUVycm9yLCBJT0Vycm9yKToKICAgICAgICBwcmludCAnJwogICAgICAgIHByaW50IGxvZ28KICAgICAgICBwcmludCAnXHgxYlsxOzMxOzFtTG9naW4gRkIgaWQgdG8gY29udGludWUnCiAgICAgICAgdGltZS5zbGVlcCgxKQogICAgICAgIGxvZ19tZW51KCkKCiAgICB0cnk6CiAgICAgICAgciA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vbWU/YWNjZXNzX3Rva2VuPScgKyB0b2tlbikKICAgICAgICBxID0ganNvbi5sb2FkcyhyLnRleHQpCiAgICAgICAgeiA9IHFbJ25hbWUnXQogICAgZXhjZXB0IChLZXlFcnJvciwgSU9FcnJvcik6CiAgICAgICAgcHJpbnQgbG9nbwogICAgICAgIHByaW50ICcnCiAgICAgICAgcHJpbnQgJ1x0IEFjY291bnQgQ2hlZWtwb2ludFx4MWJbMDs5N20nCiAgICAgICAgcHJpbnQgJycKICAgICAgICBvcy5zeXN0ZW0oJ3JtIC1yZiBhY2Nlc3NfdG9rZW4udHh0JykKICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAgbG9nX21lbnUoKQogICAgZXhjZXB0IHJlcXVlc3RzLmV4Y2VwdGlvbnMuQ29ubmVjdGlvbkVycm9yOgogICAgICAgIHByaW50IGxvZ28KICAgICAgICBwcmludCAnJwogICAgICAgIHByaW50ICdcdCBUdXJuIG9uIG1vYmlsZSBkYXRhL3dpZmlceDFiWzA7OTdtJwogICAgICAgIHByaW50ICcnCiAgICAgICAgcmF3X2lucHV0KCcgXHgxYlsxOzkybVByZXNzIGVudGVyIGFmdGVyIHR1cm5pbmcgb24gbW9iaWxlIGRhdGEvd2lmaSAnKQogICAgICAgIG1lbnUoKQoKICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgcHJpbnQgbG9nbwogICAgdG9rID0gb3BlbignL3NkY2FyZC8uaHN0LnR4dCcsICdyJykucmVhZCgpCiAgICBwcmludCAnICBceDFiWzE7OTJtTG9nZ2VkIGluIHVzZXI6IFx4MWJbMTs5MW0nICsgegogICAgcHJpbnQgNDcgKiAnLScKICAgIHByaW50ICcgXHgxYlsxOzkzbSBBY3RpdmUgdG9rZW46IFx4MWJbMTs5MW0nICsgdG9rCiAgICBwcmludCAnIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAnCiAgICBwcmludCAnXHgxYlsxOzkybVsxXSBDcmFjayB3aXRoIEF1dG8gcGFzc3dvcmQgMTAnCiAgICBwcmludCAnXHgxYlsxOzkybVsyXSBDcmFjayB3aXRoIE51bWJlciBwYXNzd29yZCA2JwogICAgcHJpbnQgJ1x4MWJbMTs5Mm1bM10gQ3JhY2sgd2l0aCBOYW1lICsgTnVtYmVyIHBhc3N3b3JkIDgnCiAgICBwcmludCAnXHgxYlsxOzkybVs0XSBFeHRyYWN0IEZpbGUnCiAgICBwcmludCAnXHgxYlsxOzkybVs1XSBMb2dvdXQnCiAgICBwcmludCAnXHgxYlsxOzkybVs2XSBEZWxldGUgdHJhc2ggZmlsZXMnCiAgICBtZW51X3MoKQoKCmRlZiBtZW51X3MoKToKICAgIG1zID0gcmF3X2lucHV0KCdceDFiWzE7OTdtXHhlMlx4OTVceGIwXHhlMlx4OTRceDgwanV0dFx4ZTJceDllXHhhNCAnKQogICAgaWYgbXMgPT0gJzEnOgogICAgICAgIGF1dG9fY3JhY2soKQogICAgZWxpZiBtcyA9PSAnMic6CiAgICAgICAgY2hvaWNlX2NyYWNrKCkKICAgIGVsaWYgbXMgPT0gJzMnOgogICAgICAgIG5hbWVfY3JhY2soKQogICAgZWxpZiBtcyA9PSAnNCc6CiAgICAgICAgb3Muc3lzdGVtKCdweXRob24yIG9rLnB5JykKICAgIGVsaWYgbXMgPT0gJzUnOgogICAgICAgIGxvdXQoKQogICAgZWxpZiBtcyA9PSAnNic6CiAgICAgICAgcnRyYXNoKCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQgJycKICAgICAgICBwcmludCAnXHRTZWxlY3QgdmFsaWQgb3B0aW9uJwogICAgICAgIHByaW50ICcnCiAgICAgICAgbWVudV9zKCkKCgpkZWYgY3JhY2soKToKICAgIGdsb2JhbCB0b2tldAogICAgdHJ5OgogICAgICAgIHRva2V0ID0gb3BlbignbG9naW4udHh0JywgJ3InKS5yZWFkKCkKICAgIGV4Y2VwdCAoS2V5RXJyb3IsIElPRXJyb3IpOgogICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgICAgIHByaW50IGxvZ28KICAgICAgICBwcmludCAnXHQgRmlsZSBOb3QgRm91bmQgXHgxYlswOzk3bScKICAgICAgICBwcmludCAnJwogICAgICAgIHRpbWUuc2xlZXAoMSkKICAgICAgICBsb2dfbWVudSgpCgogICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICBwcmludCBsb2dvCiAgICBwcmludCAnXHgxYlsxOzkzbX5+fn4gQXV0byBwYXNzIGNyYWNraW5nIH5+fn5ceDFiWzE7OTFtJwogICAgcHJpbnQgNDcgKiAnLScKICAgIHByaW50ICdceDFiWzE7OTJtWzFdIFB1YmxpYyBpZCBjbG9uaW5nJwogICAgcHJpbnQgJ1x4MWJbMTs5Mm1bMl0gRm9sbG93ZXJzIGNsb25pbmcnCiAgICBwcmludCAnXHgxYlsxOzkybVszXSBGaWxlIGNsb25pbmcnCiAgICBwcmludCAnXHgxYlsxOzkybVswXSBCYWNrJwogICAgYV9zKCkKCgpkZWYgYXV0b19jcmFjaygpOgogICAgZ2xvYmFsIHRva2VuCiAgICB0cnk6CiAgICAgICAgdG9rZW4gPSBvcGVuKCdhY2Nlc3NfdG9rZW4udHh0JywgJ3InKS5yZWFkKCkKICAgIGV4Y2VwdCAoS2V5RXJyb3IsIElPRXJyb3IpOgogICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgICAgIHByaW50IGxvZ28KICAgICAgICBwcmludCAnXHQgTG9naW4gRkIgaWQgdG8gY29udGludWVceDFiWzA7OTdtJwogICAgICAgIHByaW50ICcnCiAgICAgICAgdGltZS5zbGVlcCgxKQogICAgICAgIGxvZ19tZW51KCkKCiAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgIHByaW50IGxvZ28KICAgIHByaW50ICdceDFiWzE7OTNtfn5+fiBBdXRvIHBhc3MgY3JhY2tpbmcgfn5+flx4MWJbMTs5MW0nCiAgICBwcmludCA0NyAqICctJwogICAgcHJpbnQgJ1x4MWJbMTs5Mm1bMV0gUHVibGljIGlkIGNsb25pbmcnCiAgICBwcmludCAnXHgxYlsxOzkybVsyXSBGb2xsb3dlcnMgY2xvbmluZycKICAgIHByaW50ICdceDFiWzE7OTJtWzNdIEZpbGUgY2xvbmluZycKICAgIHByaW50ICdceDFiWzE7OTJtW0JdIEJhY2snCiAgICBhX3MoKQoKCmRlZiBhX3MoKToKICAgIGlkID0gW10KICAgIGNwcyA9IFtdCiAgICBva3MgPSBbXQogICAgYV9zID0gcmF3X2lucHV0KCcgXHgxYlsxOzk3bVx4ZTJceDk1XHhiMFx4ZTJceDk0XHg4MGp1dHRceGUyXHg5ZVx4YTQgJykKICAgIGlmIGFfcyA9PSAnMSc6CiAgICAgICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICAgICAgcHJpbnQgbG9nbwogICAgICAgIHByaW50ICdceDFiWzE7OTNtfn5+fiBBdXRvIHBhc3MgcHVibGljIGNyYWNraW5nIH5+fn5ceDFiWzE7OTFtJwogICAgICAgIHByaW50IDQ3ICogJy0nCiAgICAgICAgaWR0ID0gcmF3X2lucHV0KCcgXHgxYlsxOzkzbVtceGUyXHg5OFx4ODVdRW50ZXIgaWQ6ICcpCiAgICAgICAgdHJ5OgogICAgICAgICAgICByID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8nICsgaWR0ICsgJz9hY2Nlc3NfdG9rZW49JyArIHRva2VuKQogICAgICAgICAgICBxID0ganNvbi5sb2FkcyhyLnRleHQpCiAgICAgICAgICAgIHogPSBxWyduYW1lJ10KICAgICAgICAgICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICAgICAgICAgIHByaW50IGxvZ28KICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5M21+fn5+QXV0byBwYXNzIHB1YmxpYyBjcmFja2luZ35+fn4nCiAgICAgICAgICAgIHByaW50ICcgXHgxYlsxOzkybUNsb25pbmcgZnJvbTogJyArIHoKICAgICAgICBleGNlcHQgKEtleUVycm9yLCBJT0Vycm9yKToKICAgICAgICAgICAgcHJpbnQgJ1x0IEludmFsaWQgdXNlciBceDFiWzA7OTdtJwogICAgICAgICAgICByYXdfaW5wdXQoJyBceDFiWzE7OTJtUHJlc3MgZW50ZXIgdG8gdHJ5IGFnYWluICcpCiAgICAgICAgICAgIGF1dG9fY3JhY2soKQoKICAgICAgICByID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8nICsgaWR0ICsgJy9mcmllbmRzP2FjY2Vzc190b2tlbj0nICsgdG9rZW4pCiAgICAgICAgeiA9IGpzb24ubG9hZHMoci50ZXh0KQogICAgICAgIGZvciBpIGluIHpbJ2RhdGEnXToKICAgICAgICAgICAgdWlkID0gaVsnaWQnXQogICAgICAgICAgICBuYSA9IGlbJ25hbWUnXQogICAgICAgICAgICBubSA9IG5hLnJzcGxpdCgnICcpWzBdCiAgICAgICAgICAgIGlkLmFwcGVuZCh1aWQgKyAnfCcgKyBubSkKCiAgICBlbGlmIGFfcyA9PSAnMic6CiAgICAgICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICAgICAgcHJpbnQgbG9nbwogICAgICAgIHByaW50ICdceDFiWzE7OTNtfn5+fiBOYW1lIHBhc3MgZm9sbG93ZXJzIGNyYWNraW5nIH5+fn5ceDFiWzE7OTFtJwogICAgICAgIHByaW50IDQ3ICogJy0nCiAgICAgICAgcHJpbnQgJyBceDFiWzE7OTNtRm9yIGV4YW1wbGU6MTIzLDEyMzQsMTIzNDUsNzg2LDEyLDExMjJceDFiWzE7OTFtJwogICAgICAgIHByaW50IDQ3ICogJy0nCiAgICAgICAgcDEgPSByYXdfaW5wdXQoJyBceDFiWzE7OTJtWzFdTmFtZSArIGRpZ2l0OiAnKQogICAgICAgIHAyID0gcmF3X2lucHV0KCcgXHgxYlsxOzkybVsyXU5hbWUgKyBkaWdpdDogJykKICAgICAgICBwMyA9IHJhd19pbnB1dCgnIFx4MWJbMTs5Mm1bM11OYW1lICsgZGlnaXQ6ICcpCiAgICAgICAgcDQgPSByYXdfaW5wdXQoJyBceDFiWzE7OTJtWzRdTmFtZSArIGRpZ2l0OiAnKQogICAgICAgIGlkdCA9IHJhd19pbnB1dCgnIFx4MWJbMTs5M21bXHhlMlx4OThceDg1XUVudGVyIGlkOiAnKQogICAgICAgIHRyeToKICAgICAgICAgICAgciA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJyArIGlkdCArICc/YWNjZXNzX3Rva2VuPScgKyB0b2tlbikKICAgICAgICAgICAgcSA9IGpzb24ubG9hZHMoci50ZXh0KQogICAgICAgICAgICB6ID0gcVsnbmFtZSddCiAgICAgICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgICAgICAgICBwcmludCBsb2dvCiAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTNtfn5+fiBOYW1lIHBhc3MgZm9sbG93ZXJzIGNyYWNraW5nIH5+fn4nCiAgICAgICAgICAgIHByaW50ICcgXHgxYlsxOzkybUNsb25pbmcgZnJvbTogJyArIHoKICAgICAgICBleGNlcHQgKEtleUVycm9yLCBJT0Vycm9yKToKICAgICAgICAgICAgcHJpbnQgJ1x0IEludmFsaWQgdXNlciBceDFiWzA7OTdtJwogICAgICAgICAgICByYXdfaW5wdXQoJ1x4MWJbMTs5Mm1QcmVzcyBlbnRlciB0byB0cnkgYWdhaW4gJykKICAgICAgICAgICAgYXV0b19jcmFjaygpCgogICAgICAgIHIgPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLycgKyBpZHQgKyAnL3N1YnNjcmliZXJzP2FjY2Vzc190b2tlbj0nICsgdG9rZW4gKyAnJmxpbWl0PTk5OTk5OScpCiAgICAgICAgeiA9IGpzb24ubG9hZHMoci50ZXh0KQogICAgICAgIGZvciBpIGluIHpbJ2RhdGEnXToKICAgICAgICAgICAgdWlkID0gaVsnaWQnXQogICAgICAgICAgICBuYSA9IGlbJ25hbWUnXQogICAgICAgICAgICBubSA9IG5hLnJzcGxpdCgnICcpWzBdCiAgICAgICAgICAgIGlkLmFwcGVuZCh1aWQgKyAnfCcgKyBubSkKCiAgICBlbGlmIGFfcyA9PSAnMyc6CiAgICAgICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICAgICAgcHJpbnQgbG9nbwogICAgICAgIHByaW50ICdceDFiWzE7OTNtfn5+fiBBdXRvIHBhc3MgRmlsZSBjcmFja2luZyB+fn5+XHgxYlsxOzkxbScKICAgICAgICBwcmludCA0NyAqICctJwogICAgICAgIHRyeToKICAgICAgICAgICAgaWRsaXN0ID0gcmF3X2lucHV0KCdbK10gRmlsZSBOYW1lOiAnKQogICAgICAgICAgICBmb3IgbGluZSBpbiBvcGVuKGlkbGlzdCwgJ3InKS5yZWFkbGluZXMoKToKICAgICAgICAgICAgICAgIGlkLmFwcGVuZChsaW5lLnN0cmlwKCkpCgogICAgICAgIGV4Y2VwdCBJT0Vycm9yOgogICAgICAgICAgICBwcmludCAnWyFdIEZpbGUgTm90IEZvdW5kLicKICAgICAgICAgICAgcmF3X2lucHV0KCdQcmVzcyBFbnRlciBUbyBCYWNrLiAnKQogICAgICAgICAgICBjcmFjaygpCgogICAgZWxpZiBhX3MgPT0gJzAnOgogICAgICAgIG1lbnUoKQogICAgZWxzZToKICAgICAgICBwcmludCAnJwogICAgICAgIHByaW50ICdcdENob29zZSB2YWxpZCBvcHRpb24nICsgdwogICAgICAgIGFfcygpCiAgICBwcmludCAnIFRvdGFsIGlkczogJyArIHN0cihsZW4oaWQpKQogICAgdGltZS5zbGVlcCgwLjUpCiAgICBwcmludCAnIFx4MWJbMTs5N21DcmFjayBSdW5uaW5nXHgxYlsxOzkxbSAnCiAgICB0aW1lLnNsZWVwKDAuNSkKICAgIHByaW50IDQ3ICogJy0nCiAgICBwcmludCAnXHRceDFiWzE7OTRtSnV0dCBLaW5nIE9mIEZhY2Vib29rXHgxYlsxOzkxbScKICAgIHByaW50IDQ3ICogJy0nCgogICAgZGVmIG1haW4oYXJnKToKICAgICAgICB1c2VyID0gYXJnCiAgICAgICAgdWlkLCBuYW1lID0gdXNlci5zcGxpdCgnfCcpCiAgICAgICAgdHJ5OgogICAgICAgICAgICBwYXNzMSA9IG5hbWUubG93ZXIoKSArICcxMjM0NScKICAgICAgICAgICAgZGF0YSA9IHJlcXVlc3RzLmdldCgnaHR0cDovL2xvY2FsaG9zdDo1MDAwL2F1dGg/aWQ9JyArIHVpZCArICcmcGFzcz0nICsgcGFzczEsIGhlYWRlcnM9aGVhZGVyKS50ZXh0CiAgICAgICAgICAgIHEgPSBqc29uLmxvYWRzKGRhdGEpCiAgICAgICAgICAgIGlmICdsb2MnIGluIHE6CiAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkybVtKVVRULU9LXSBceDFiWzE7MzJtJyArIHVpZCArICcgfCAnICsgcGFzczEgKyAnXHgxYlswOzk3bScKICAgICAgICAgICAgICAgIG9rID0gb3BlbignL3NkY2FyZC9pZHMvSlVUVF9PSy50eHQnLCAnYScpCiAgICAgICAgICAgICAgICBvay53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3MxICsgJ1xuJykKICAgICAgICAgICAgICAgIG9rLmNsb3NlKCkKICAgICAgICAgICAgICAgIG9rcy5hcHBlbmQodWlkICsgcGFzczEpCiAgICAgICAgICAgIGVsaWYgJ3d3dy5mYWNlYm9vay5jb20nIGluIHFbJ2Vycm9yJ106CiAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzMxOzFtW0pVVFQtQ1BdICcgKyB1aWQgKyAnIHwgJyArIHBhc3MxCiAgICAgICAgICAgICAgICBjcCA9IG9wZW4oJ0pVVFRfQ1AudHh0JywgJ2EnKQogICAgICAgICAgICAgICAgY3Aud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzMSArICdcbicpCiAgICAgICAgICAgICAgICBjcC5jbG9zZSgpCiAgICAgICAgICAgICAgICBjcHMuYXBwZW5kKHVpZCArIHBhc3MxKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcGFzczIgPSBuYW1lLmxvd2VyKCkgKyAnMTIzNCcKICAgICAgICAgICAgICAgIGRhdGEgPSByZXF1ZXN0cy5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6NTAwMC9hdXRoP2lkPScgKyB1aWQgKyAnJnBhc3M9JyArIHBhc3MyLCBoZWFkZXJzPWhlYWRlcikudGV4dAogICAgICAgICAgICAgICAgcSA9IGpzb24ubG9hZHMoZGF0YSkKICAgICAgICAgICAgICAgIGlmICdsb2MnIGluIHE6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5Mm1bSlVUVC1PS10gXHgxYlsxOzMybScgKyB1aWQgKyAnIHwgJyArIHBhc3MyICsgJ1x4MWJbMDs5N20nCiAgICAgICAgICAgICAgICAgICAgb2sgPSBvcGVuKCcvc2RjYXJkL2lkcy9KVVRUX09LLnR4dCcsICdhJykKICAgICAgICAgICAgICAgICAgICBvay53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3MyICsgJ1xuJykKICAgICAgICAgICAgICAgICAgICBvay5jbG9zZSgpCiAgICAgICAgICAgICAgICAgICAgb2tzLmFwcGVuZCh1aWQgKyBwYXNzMikKICAgICAgICAgICAgICAgIGVsaWYgJ3d3dy5mYWNlYm9vay5jb20nIGluIHFbJ2Vycm9yJ106CiAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTszMTsxbVtKVVRULUNQXSAnICsgdWlkICsgJyB8ICcgKyBwYXNzMgogICAgICAgICAgICAgICAgICAgIGNwID0gb3BlbignSlVUVF9DUC50eHQnLCAnYScpCiAgICAgICAgICAgICAgICAgICAgY3Aud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzMiArICdcbicpCiAgICAgICAgICAgICAgICAgICAgY3AuY2xvc2UoKQogICAgICAgICAgICAgICAgICAgIGNwcy5hcHBlbmQodWlkICsgcGFzczIpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHBhc3MzID0gbmFtZS5sb3dlcigpICsgJzc4NicKICAgICAgICAgICAgICAgICAgICBkYXRhID0gcmVxdWVzdHMuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjUwMDAvYXV0aD9pZD0nICsgdWlkICsgJyZwYXNzPScgKyBwYXNzMywgaGVhZGVycz1oZWFkZXIpLnRleHQKICAgICAgICAgICAgICAgICAgICBxID0ganNvbi5sb2FkcyhkYXRhKQogICAgICAgICAgICAgICAgICAgIGlmICdsb2MnIGluIHE6CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTJtW0pVVFQtT0tdIFx4MWJbMTszMm0nICsgdWlkICsgJyB8ICcgKyBwYXNzMyArICdceDFiWzA7OTdtJwogICAgICAgICAgICAgICAgICAgICAgICBvayA9IG9wZW4oJy9zZGNhcmQvaWRzL0pVVFRfT0sudHh0JywgJ2EnKQogICAgICAgICAgICAgICAgICAgICAgICBvay53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3MzICsgJ1xuJykKICAgICAgICAgICAgICAgICAgICAgICAgb2suY2xvc2UoKQogICAgICAgICAgICAgICAgICAgICAgICBva3MuYXBwZW5kKHVpZCArIHBhc3MzKQogICAgICAgICAgICAgICAgICAgIGVsaWYgJ3d3dy5mYWNlYm9vay5jb20nIGluIHFbJ2Vycm9yJ106CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7MzE7MW1bSlVUVC1DUF0gJyArIHVpZCArICcgfCAnICsgcGFzczMKICAgICAgICAgICAgICAgICAgICAgICAgY3AgPSBvcGVuKCdKVVRUX0NQLnR4dCcsICdhJykKICAgICAgICAgICAgICAgICAgICAgICAgY3Aud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzMyArICdcbicpCiAgICAgICAgICAgICAgICAgICAgICAgIGNwLmNsb3NlKCkKICAgICAgICAgICAgICAgICAgICAgICAgY3BzLmFwcGVuZCh1aWQgKyBwYXNzMykKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBwYXNzNCA9IG5hbWUubG93ZXIoKSArICcxMjMnCiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSByZXF1ZXN0cy5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6NTAwMC9hdXRoP2lkPScgKyB1aWQgKyAnJnBhc3M9JyArIHBhc3M0LCBoZWFkZXJzPWhlYWRlcikudGV4dAogICAgICAgICAgICAgICAgICAgICAgICBxID0ganNvbi5sb2FkcyhkYXRhKQogICAgICAgICAgICAgICAgICAgICAgICBpZiAnbG9jJyBpbiBxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5Mm1bSlVUVC1PS10gXHgxYlsxOzMybScgKyB1aWQgKyAnIHwgJyArIHBhc3M0ICsgJ1x4MWJbMDs5N20nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvayA9IG9wZW4oJy9zZGNhcmQvaWRzL0pVVFRfT0sudHh0JywgJ2EnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgb2sud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzNCArICdcbicpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvay5jbG9zZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBva3MuYXBwZW5kKHVpZCArIHBhc3M0KQogICAgICAgICAgICAgICAgICAgICAgICBlbGlmICd3d3cuZmFjZWJvb2suY29tJyBpbiBxWydlcnJvciddOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTszMTsxbVtKVVRULUNQXSAnICsgdWlkICsgJyB8ICcgKyBwYXNzNAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3AgPSBvcGVuKCdKVVRUX0NQLnR4dCcsICdhJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwLndyaXRlKHVpZCArICcgfCAnICsgcGFzczQgKyAnXG4nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3AuY2xvc2UoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3BzLmFwcHBlbmQodWlkICsgcGFzczQpCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzNSA9ICcyMzQ1NjcnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gcmVxdWVzdHMuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjUwMDAvYXV0aD9pZD0nICsgdWlkICsgJyZwYXNzPScgKyBwYXNzNSwgaGVhZGVycz1oZWFkZXIpLnRleHQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHEgPSBqc29uLmxvYWRzKGRhdGEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAnbG9jJyBpbiBxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTJtW0pVVFQtT0tdIFx4MWJbMTszMm0nICsgdWlkICsgJyB8ICcgKyBwYXNzNSArICdceDFiWzA7OTdtJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rID0gb3BlbignL3NkY2FyZC9pZHMvSlVUVF9PSy50eHQnLCAnYScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2sud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzNSArICdcbicpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2suY2xvc2UoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rcy5hcHBlbmQodWlkICsgcGFzczUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmICd3d3cuZmFjZWJvb2suY29tJyBpbiBxWydlcnJvciddOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7MzE7MW1bSlVUVC1DUF0gJyArIHVpZCArICcgfCAnICsgcGFzczUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcCA9IG9wZW4oJ0pVVFRfQ1AudHh0JywgJ2EnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwLndyaXRlKHVpZCArICcgfCAnICsgcGFzczUgKyAnXG4nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwLmNsb3NlKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcHMuYXBwcGVuZCh1aWQgKyBwYXNzNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzczYgPSAnMjIzMzQ0JwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSByZXF1ZXN0cy5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6NTAwMC9hdXRoP2lkPScgKyB1aWQgKyAnJnBhc3M9JyArIHBhc3M2LCBoZWFkZXJzPWhlYWRlcikudGV4dAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHEgPSBqc29uLmxvYWRzKGRhdGEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgJ2xvYycgaW4gcToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5Mm1bSlVUVC1PS10gXHgxYlsxOzMybScgKyB1aWQgKyAnIHwgJyArIHBhc3M2ICsgJ1x4MWJbMDs5N20nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rID0gb3BlbignL3NkY2FyZC9pZHMvSlVUVF9PSy50eHQnLCAnYScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rLndyaXRlKHVpZCArICcgfCAnICsgcGFzczYgKyAnXG4nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvay5jbG9zZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rcy5hcHBlbmQodWlkICsgcGFzczYpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiAnd3d3LmZhY2Vib29rLmNvbScgaW4gcVsnZXJyb3InXToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTszMTsxbVtKVVRULUNQXSAnICsgdWlkICsgJyB8ICcgKyBwYXNzNgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcCA9IG9wZW4oJ0pVVFRfQ1AudHh0JywgJ2EnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcC53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3M2ICsgJ1xuJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3AuY2xvc2UoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcHMuYXBwcGVuZCh1aWQgKyBwYXNzNikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzNyA9ICczMzQ0NTUnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSByZXF1ZXN0cy5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6NTAwMC9hdXRoP2lkPScgKyB1aWQgKyAnJnBhc3M9JyArIHBhc3M3LCBoZWFkZXJzPWhlYWRlcikudGV4dAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxID0ganNvbi5sb2FkcyhkYXRhKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAnbG9jJyBpbiBxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5Mm1bSlVUVC1PS10gXHgxYlsxOzMybScgKyB1aWQgKyAnIHwgJyArIHBhc3M3ICsgJ1x4MWJbMDs5N20nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvayA9IG9wZW4oJy9zZGNhcmQvaWRzL0pVVFRfT0sudHh0JywgJ2EnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2sud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzNyArICdcbicpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvay5jbG9zZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBva3MuYXBwZW5kKHVpZCArIHBhc3M3KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmICd3d3cuZmFjZWJvb2suY29tJyBpbiBxWydlcnJvciddOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTszMTsxbVtKVVRULUNQXSAnICsgdWlkICsgJyB8ICcgKyBwYXNzNwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3AgPSBvcGVuKCdKVVRUX0NQLnR4dCcsICdhJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwLndyaXRlKHVpZCArICcgfCAnICsgcGFzczcgKyAnXG4nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3AuY2xvc2UoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3BzLmFwcHBlbmQodWlkICsgcGFzczcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzOCA9ICc0NDU1NjYnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gcmVxdWVzdHMuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjUwMDAvYXV0aD9pZD0nICsgdWlkICsgJyZwYXNzPScgKyBwYXNzOCwgaGVhZGVycz1oZWFkZXIpLnRleHQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHEgPSBqc29uLmxvYWRzKGRhdGEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAnbG9jJyBpbiBxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTJtW0pVVFQtT0tdIFx4MWJbMTszMm0nICsgdWlkICsgJyB8ICcgKyBwYXNzOCArICdceDFiWzA7OTdtJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rID0gb3BlbignL3NkY2FyZC9pZHMvSlVUVF9PSy50eHQnLCAnYScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2sud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzOCArICdcbicpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2suY2xvc2UoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rcy5hcHBlbmQodWlkICsgcGFzczgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmICd3d3cuZmFjZWJvb2suY29tJyBpbiBxWydlcnJvciddOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7MzE7MW1bSlVUVC1DUF0gJyArIHVpZCArICcgfCAnICsgcGFzczgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcCA9IG9wZW4oJ0pVVFRfQ1AudHh0JywgJ2EnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwLndyaXRlKHVpZCArICcgfCAnICsgcGFzczggKyAnXG4nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwLmNsb3NlKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcHMuYXBwcGVuZCh1aWQgKyBwYXNzOCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzczkgPSAnMDAwNzg2JwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSByZXF1ZXN0cy5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6NTAwMC9hdXRoP2lkPScgKyB1aWQgKyAnJnBhc3M9JyArIHBhc3M5LCBoZWFkZXJzPWhlYWRlcikudGV4dAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHEgPSBqc29uLmxvYWRzKGRhdGEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgJ2xvYycgaW4gcToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5Mm1bSlVUVC1PS10gXHgxYlsxOzMybScgKyB1aWQgKyAnIHwgJyArIHBhc3M5ICsgJ1x4MWJbMDs5N20nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rID0gb3BlbignL3NkY2FyZC9pZHMvSlVUVF9PSy50eHQnLCAnYScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rLndyaXRlKHVpZCArICcgfCAnICsgcGFzczkgKyAnXG4nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvay5jbG9zZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rcy5hcHBlbmQodWlkICsgcGFzczkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiAnd3d3LmZhY2Vib29rLmNvbScgaW4gcVsnZXJyb3InXToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTszMTsxbVtKVVRULUNQXSAnICsgdWlkICsgJyB8ICcgKyBwYXNzOQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcCA9IG9wZW4oJ0pVVFRfQ1AudHh0JywgJ2EnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcC53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3M5ICsgJ1xuJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3AuY2xvc2UoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcHMuYXBwcGVuZCh1aWQgKyBwYXNzOSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzMTAgPSAnNzg2MDAwJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gcmVxdWVzdHMuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjUwMDAvYXV0aD9pZD0nICsgdWlkICsgJyZwYXNzPScgKyBwYXNzMTAsIGhlYWRlcnM9aGVhZGVyKS50ZXh0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHEgPSBqc29uLmxvYWRzKGRhdGEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICdsb2MnIGluIHE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkybVtKVVRULU9LXSBceDFiWzE7MzJtJyArIHVpZCArICcgfCAnICsgcGFzczEwICsgJ1x4MWJbMDs5N20nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvayA9IG9wZW4oJy9zZGNhcmQvaWRzL0pVVFRfT0sudHh0JywgJ2EnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2sud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzMTAgKyAnXG4nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2suY2xvc2UoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2tzLmFwcGVuZCh1aWQgKyBwYXNzMTApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgJ3d3dy5mYWNlYm9vay5jb20nIGluIHFbJ2Vycm9yJ106CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzMxOzFtW0pVVFQtQ1BdICcgKyB1aWQgKyAnIHwgJyArIHBhc3MxMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3AgPSBvcGVuKCdKVVRUX0NQLnR4dCcsICdhJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwLndyaXRlKHVpZCArICcgfCAnICsgcGFzczEwICsgJ1xuJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwLmNsb3NlKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwcy5hcHBwZW5kKHVpZCArIHBhc3MxMCkKICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgIHBhc3MKCiAgICBwID0gVGhyZWFkUG9vbCgzMCkKICAgIHAubWFwKG1haW4sIGlkKQogICAgcHJpbnQgNDcgKiAnLScKICAgIHByaW50ICcgXHgxYlsxOzkybUNyYWNrIERvbmUnCiAgICBwcmludCAnIFx4MWJbMTs5Mm1Ub3RhbCBPay9DcDonICsgc3RyKGxlbihva3MpKSArICcvJyArIHN0cihsZW4oY3BzKSkKICAgIHByaW50IDQ3ICogJy0nCiAgICByYXdfaW5wdXQoJyBceDFiWzE7OTNtUHJlc3MgZW50ZXIgdG8gYmFjaycpCiAgICBhdXRvX2NyYWNrKCkKCgpkZWYgY3JhY2tfYigpOgogICAgZ2xvYmFsIHRva2V0CiAgICB0cnk6CiAgICAgICAgdG9rZXQgPSBvcGVuKCdsb2dpbi50eHQnLCAncicpLnJlYWQoKQogICAgZXhjZXB0IChLZXlFcnJvciwgSU9FcnJvcik6CiAgICAgICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICAgICAgcHJpbnQgbG9nbwogICAgICAgIHByaW50ICdcdCBGaWxlIE5vdCBGb3VuZCBceDFiWzA7OTdtJwogICAgICAgIHRpbWUuc2xlZXAoMSkKICAgICAgICBsb2dfbWVudSgpCgogICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICBwcmludCBsb2dvCiAgICBwcmludCAnXHgxYlsxOzkzbX5+fn4gTnVtYmVyIHBhc3MgY3JhY2tpbmcgfn5+flx4MWJbMTs5MW0nCiAgICBwcmludCA0NyAqICctJwogICAgcHJpbnQgJ1x4MWJbMTs5Mm1bMV0gUHVibGljIGlkIGNsb25pbmcnCiAgICBwcmludCAnXHgxYlsxOzkybVsyXSBGb2xsb3dlcnMgY2xvbmluZycKICAgIHByaW50ICdceDFiWzE7OTJtWzNdIEZpbGUgY2xvbmluZycKICAgIHByaW50ICdceDFiWzE7OTJtWzBdIEJhY2snCiAgICBjX3MoKQoKCmRlZiBjaG9pY2VfY3JhY2soKToKICAgIGdsb2JhbCB0b2tlbgogICAgdHJ5OgogICAgICAgIHRva2VuID0gb3BlbignYWNjZXNzX3Rva2VuLnR4dCcsICdyJykucmVhZCgpCiAgICBleGNlcHQgKEtleUVycm9yLCBJT0Vycm9yKToKICAgICAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgICAgICBwcmludCBsb2dvCiAgICAgICAgcHJpbnQgJ1x4MWJbMTs5M21+fn4gTG9naW4gRkIgaWQgdG8gY29udGludWUgfn5+JwogICAgICAgIHRpbWUuc2xlZXAoMSkKICAgICAgICBsb2dfbWVudSgpCgogICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICBwcmludCBsb2dvCiAgICBwcmludCAnXHgxYlsxOzkzbX5+fn4gTnVtYmVyIHBhc3MgY3JhY2tpbmcgfn5+flx4MWJbMTs5MW0nCiAgICBwcmludCA0NyAqICctJwogICAgcHJpbnQgJ1x4MWJbMTs5Mm1bMV0gUHVibGljIGlkIGNsb25pbmcnCiAgICBwcmludCAnXHgxYlsxOzkybVsyXSBGb2xsb3dlcnMgY2xvbmluZycKICAgIHByaW50ICdceDFiWzE7OTJtWzNdIEZpbGUgY2xvbmluZycKICAgIHByaW50ICdceDFiWzE7OTJtW0JdIEJhY2snCiAgICBjX3MoKQoKCmRlZiBjX3MoKToKICAgIGlkID0gW10KICAgIGNwcyA9IFtdCiAgICBva3MgPSBbXQogICAgYV9zID0gcmF3X2lucHV0KCcgXHgxYlsxOzk3bVx4ZTJceDk1XHhiMFx4ZTJceDk0XHg4MGp1dHRceGUyXHg5ZVx4YTQgJykKICAgIGlmIGFfcyA9PSAnMSc6CiAgICAgICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICAgICAgcHJpbnQgbG9nbwogICAgICAgIHByaW50ICdceDFiWzE7OTNtIH5+fn4gTnVtYmVyIHBhc3MgUHVibGljIGNyYWNraW5nIH5+fn5ceDFiWzE7OTFtJwogICAgICAgIHByaW50IDQ3ICogJy0nCiAgICAgICAgcHJpbnQgJ1x4MWJbMTs5M20gRm9yIGV4YW1wbGU6MjM0NTY3LDIyMzM0NCwzMzQ0NTUsNDQ1NTY2XHgxYlsxOzkxbScKICAgICAgICBwcmludCA0NyAqICctJwogICAgICAgIHBhc3MxID0gcmF3X2lucHV0KCcgXHgxYlsxOzkybVsxXVBhc3N3b3JkOiAnKQogICAgICAgIHBhc3MyID0gcmF3X2lucHV0KCcgXHgxYlsxOzkybVsyXVBhc3N3b3JkOiAnKQogICAgICAgIHBhc3MzID0gcmF3X2lucHV0KCcgXHgxYlsxOzkybVszXVBhc3N3b3JkOiAnKQogICAgICAgIHBhc3M0ID0gcmF3X2lucHV0KCcgXHgxYlsxOzkybVs0XVBhc3N3b3JkOiAnKQogICAgICAgIHBhc3M1ID0gcmF3X2lucHV0KCcgXHgxYlsxOzkybVs1XVBhc3N3b3JkOiAnKQogICAgICAgIHBhc3M2ID0gcmF3X2lucHV0KCcgXHgxYlsxOzkybVs2XVBhc3N3b3JkOiAnKQogICAgICAgIGlkdCA9IHJhd19pbnB1dCgnIFx4MWJbMTs5M21bXHhlMlx4OThceDg1XUVudGVyIGlkOiAnKQogICAgICAgIHRyeToKICAgICAgICAgICAgciA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJyArIGlkdCArICc/YWNjZXNzX3Rva2VuPScgKyB0b2tlbikKICAgICAgICAgICAgcSA9IGpzb24ubG9hZHMoci50ZXh0KQogICAgICAgICAgICB6ID0gcVsnbmFtZSddCiAgICAgICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgICAgICAgICBwcmludCBsb2dvCiAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTNtIH5+fn4gTnVtYmVyIHBhc3MgUHVibGljIGNyYWNraW5nIH5+fn4nCiAgICAgICAgICAgIHByaW50ICcgQ2xvbmluZyBmcm9tOiAnICsgegogICAgICAgIGV4Y2VwdCAoS2V5RXJyb3IsIElPRXJyb3IpOgogICAgICAgICAgICBwcmludCAnXHQgSW52YWxpZCB1c2VyIFx4MWJbMDs5N20nCiAgICAgICAgICAgIHJhd19pbnB1dCgnIFByZXNzIGVudGVyIHRvIHRyeSBhZ2FpbiAnKQogICAgICAgICAgICBjaG9pY2VfY3JhY2soKQoKICAgICAgICByID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8nICsgaWR0ICsgJy9mcmllbmRzP2FjY2Vzc190b2tlbj0nICsgdG9rZW4pCiAgICAgICAgeiA9IGpzb24ubG9hZHMoci50ZXh0KQogICAgICAgIGZvciBpIGluIHpbJ2RhdGEnXToKICAgICAgICAgICAgdWlkID0gaVsnaWQnXQogICAgICAgICAgICBuYSA9IGlbJ25hbWUnXQogICAgICAgICAgICBubSA9IG5hLnJzcGxpdCgnICcpWzBdCiAgICAgICAgICAgIGlkLmFwcGVuZCh1aWQgKyAnfCcgKyBubSkKCiAgICBlbGlmIGFfcyA9PSAnMic6CiAgICAgICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICAgICAgcHJpbnQgbG9nbwogICAgICAgIHByaW50ICdceDFiWzE7OTNtfn5+fiBOdW1iZXIgcGFzcyBmb2xsb3dlcnMgY3JhY2tpbmcgfn5+flx4MWJbMTs5MW0nCiAgICAgICAgcHJpbnQgNDcgKiAnLScKICAgICAgICBwcmludCAnXHgxYlsxOzkzbSBGb3IgZXhhbXBsZToyMzQ1NjcsMjIzMzQ0LDMzNDQ1NSw0NDU1NjZceDFiWzE7OTFtJwogICAgICAgIHByaW50IDQ3ICogJy0nCiAgICAgICAgcGFzczEgPSByYXdfaW5wdXQoJyBceDFiWzE7OTJtWzFdUGFzc3dvcmQ6ICcpCiAgICAgICAgcGFzczIgPSByYXdfaW5wdXQoJyBceDFiWzE7OTJtWzJdUGFzc3dvcmQ6ICcpCiAgICAgICAgcGFzczMgPSByYXdfaW5wdXQoJyBceDFiWzE7OTJtWzNdUGFzc3dvcmQ6ICcpCiAgICAgICAgcGFzczQgPSByYXdfaW5wdXQoJyBceDFiWzE7OTJtWzRdUGFzc3dvcmQ6ICcpCiAgICAgICAgaWR0ID0gcmF3X2lucHV0KCcgXHgxYlsxOzkzbUVudGVyIGlkOiAnKQogICAgICAgIHRyeToKICAgICAgICAgICAgciA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJyArIGlkdCArICc/YWNjZXNzX3Rva2VuPScgKyB0b2tlbikKICAgICAgICAgICAgcSA9IGpzb24ubG9hZHMoci50ZXh0KQogICAgICAgICAgICB6ID0gcVsnbmFtZSddCiAgICAgICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgICAgICAgICBwcmludCBsb2dvCiAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTNtfn5+fiBOdW1iZXIgcGFzcyBmb2xsb3dlcnMgY3JhY2tpbmcgfn5+ficKICAgICAgICAgICAgcHJpbnQgJyBDbG9uaW5nIGZyb206ICcgKyB6CiAgICAgICAgZXhjZXB0IChLZXlFcnJvciwgSU9FcnJvcik6CiAgICAgICAgICAgIHByaW50ICdcdCBJbnZhbGlkIHVzZXIgXHgxYlswOzk3bScKICAgICAgICAgICAgcmF3X2lucHV0KCdQcmVzcyBlbnRlciB0byB0cnkgYWdhaW4gJykKICAgICAgICAgICAgYXV0b19jcmFjaygpCgogICAgICAgIHIgPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLycgKyBpZHQgKyAnL3N1YnNjcmliZXJzP2FjY2Vzc190b2tlbj0nICsgdG9rZW4gKyAnJmxpbWl0PTk5OTk5OScpCiAgICAgICAgeiA9IGpzb24ubG9hZHMoci50ZXh0KQogICAgICAgIGZvciBpIGluIHpbJ2RhdGEnXToKICAgICAgICAgICAgdWlkID0gaVsnaWQnXQogICAgICAgICAgICBuYSA9IGlbJ25hbWUnXQogICAgICAgICAgICBubSA9IG5hLnJzcGxpdCgnICcpWzBdCiAgICAgICAgICAgIGlkLmFwcGVuZCh1aWQgKyAnfCcgKyBubSkKCiAgICBlbGlmIGFfcyA9PSAnMyc6CiAgICAgICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICAgICAgcHJpbnQgbG9nbwogICAgICAgIHByaW50ICdceDFiWzE7OTNtIH5+fn4gTnVtYmVyIHBhc3MgRmlsZSBjcmFja2luZyB+fn5+XHgxYlsxOzkxbScKICAgICAgICBwcmludCA0NyAqICctJwogICAgICAgIHByaW50ICdceDFiWzE7OTNtIEZvciBleGFtcGxlOjIzNDU2NywyMjMzNDQsMzM0NDU1LDQ0NTU2Nlx4MWJbMTs5MW0nCiAgICAgICAgcHJpbnQgNDcgKiAnLScKICAgICAgICBwYXNzMSA9IHJhd19pbnB1dCgnIFx4MWJbMTs5Mm1bMV1QYXNzd29yZDogJykKICAgICAgICBwYXNzMiA9IHJhd19pbnB1dCgnIFx4MWJbMTs5Mm1bMl1QYXNzd29yZDogJykKICAgICAgICBwYXNzMyA9IHJhd19pbnB1dCgnIFx4MWJbMTs5Mm1bM11QYXNzd29yZDogJykKICAgICAgICBwYXNzNCA9IHJhd19pbnB1dCgnIFx4MWJbMTs5Mm1bNF1QYXNzd29yZDogJykKICAgICAgICBwYXNzNSA9IHJhd19pbnB1dCgnIFx4MWJbMTs5Mm1bNV1QYXNzd29yZDogJykKICAgICAgICBwYXNzNiA9IHJhd19pbnB1dCgnIFx4MWJbMTs5Mm1bNl1QYXNzd29yZDogJykKICAgICAgICB0cnk6CiAgICAgICAgICAgIGlkbGlzdCA9IHJhd19pbnB1dCgnWytdIEZpbGUgTmFtZTogJykKICAgICAgICAgICAgZm9yIGxpbmUgaW4gb3BlbihpZGxpc3QsICdyJykucmVhZGxpbmVzKCk6CiAgICAgICAgICAgICAgICBpZC5hcHBlbmQobGluZS5zdHJpcCgpKQoKICAgICAgICBleGNlcHQgSU9FcnJvcjoKICAgICAgICAgICAgcHJpbnQgJ1shXSBGaWxlIE5vdCBGb3VuZC4nCiAgICAgICAgICAgIHJhd19pbnB1dCgnUHJlc3MgRW50ZXIgVG8gQmFjay4gJykKICAgICAgICAgICAgY3JhY2tfYigpCgogICAgZWxpZiBhX3MgPT0gJzAnOgogICAgICAgIG1lbnUoKQogICAgZWxzZToKICAgICAgICBwcmludCAnJwogICAgICAgIHByaW50ICdcdCBDaG9vc2UgdmFsaWQgb3B0aW9uJyArIHcKICAgICAgICBjX3MoKQogICAgcHJpbnQgJyBUb3RhbCBpZHM6ICcgKyBzdHIobGVuKGlkKSkKICAgIHRpbWUuc2xlZXAoMC41KQogICAgcHJpbnQgJyBceDFiWzE7OTdtfn5+IENyYWNrIFJ1bm5pbmcgfn5+XHgxYlsxOzkxbScKICAgIHRpbWUuc2xlZXAoMC41KQogICAgcHJpbnQgNDcgKiAnLScKICAgIHByaW50ICdcdFx4MWJbMTs5NG1KdXR0IEtpbmcgT2YgRmNlYm9va1x4MWJbMTs5MW0nCiAgICBwcmludCA0NyAqICctJwoKICAgIGRlZiBtYWluKGFyZyk6CiAgICAgICAgdXNlciA9IGFyZwogICAgICAgIHVpZCwgbmFtZSA9IHVzZXIuc3BsaXQoJ3wnKQogICAgICAgIHRyeToKICAgICAgICAgICAgZGF0YSA9IHJlcXVlc3RzLmdldCgnaHR0cDovL2xvY2FsaG9zdDo1MDAwL2F1dGg/aWQ9JyArIHVpZCArICcmcGFzcz0nICsgcGFzczEsIGhlYWRlcnM9aGVhZGVyKS50ZXh0CiAgICAgICAgICAgIHEgPSBqc29uLmxvYWRzKGRhdGEpCiAgICAgICAgICAgIGlmICdsb2MnIGluIHE6CiAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkybVtKVVRULU9LXSBceDFiWzE7MzJtJyArIHVpZCArICcgfCAnICsgcGFzczEgKyAnXHgxYlswOzk3bScKICAgICAgICAgICAgICAgIG9rID0gb3BlbignL3NkY2FyZC9pZHMvSlVUVF9PSy50eHQnLCAnYScpCiAgICAgICAgICAgICAgICBvay53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3MxICsgJ1xuJykKICAgICAgICAgICAgICAgIG9rLmNsb3NlKCkKICAgICAgICAgICAgICAgIG9rcy5hcHBlbmQodWlkICsgcGFzczEpCiAgICAgICAgICAgIGVsaWYgJ3d3dy5mYWNlYm9vay5jb20nIGluIHFbJ2Vycm9yJ106CiAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzMxOzFtW0pVVFQtQ1BdICcgKyB1aWQgKyAnIHwgJyArIHBhc3MxCiAgICAgICAgICAgICAgICBjcCA9IG9wZW4oJ0pVVFRfQ1AudHh0JywgJ2EnKQogICAgICAgICAgICAgICAgY3Aud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzMSArICdcbicpCiAgICAgICAgICAgICAgICBjcC5jbG9zZSgpCiAgICAgICAgICAgICAgICBjcHMuYXBwZW5kKHVpZCArIHBhc3MxKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgZGF0YSA9IHJlcXVlc3RzLmdldCgnaHR0cDovL2xvY2FsaG9zdDo1MDAwL2F1dGg/aWQ9JyArIHVpZCArICcmcGFzcz0nICsgcGFzczIsIGhlYWRlcnM9aGVhZGVyKS50ZXh0CiAgICAgICAgICAgICAgICBxID0ganNvbi5sb2FkcyhkYXRhKQogICAgICAgICAgICAgICAgaWYgJ2xvYycgaW4gcToKICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkybVtKVVRULU9LXSBceDFiWzE7MzJtJyArIHVpZCArICcgfCAnICsgcGFzczIgKyAnXHgxYlswOzk3bScKICAgICAgICAgICAgICAgICAgICBvayA9IG9wZW4oJy9zZGNhcmQvaWRzL0pVVFRfT0sudHh0JywgJ2EnKQogICAgICAgICAgICAgICAgICAgIG9rLndyaXRlKHVpZCArICcgfCAnICsgcGFzczIgKyAnXG4nKQogICAgICAgICAgICAgICAgICAgIG9rLmNsb3NlKCkKICAgICAgICAgICAgICAgICAgICBva3MuYXBwZW5kKHVpZCArIHBhc3MyKQogICAgICAgICAgICAgICAgZWxpZiAnd3d3LmZhY2Vib29rLmNvbScgaW4gcVsnZXJyb3InXToKICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzMxOzFtW0pVVFQtQ1BdICcgKyB1aWQgKyAnIHwgJyArIHBhc3MyCiAgICAgICAgICAgICAgICAgICAgY3AgPSBvcGVuKCdKVVRUX0NQLnR4dCcsICdhJykKICAgICAgICAgICAgICAgICAgICBjcC53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3MyICsgJ1xuJykKICAgICAgICAgICAgICAgICAgICBjcC5jbG9zZSgpCiAgICAgICAgICAgICAgICAgICAgY3BzLmFwcGVuZCh1aWQgKyBwYXNzMikKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgZGF0YSA9IHJlcXVlc3RzLmdldCgnaHR0cDovL2xvY2FsaG9zdDo1MDAwL2F1dGg/aWQ9JyArIHVpZCArICcmcGFzcz0nICsgcGFzczMsIGhlYWRlcnM9aGVhZGVyKS50ZXh0CiAgICAgICAgICAgICAgICAgICAgcSA9IGpzb24ubG9hZHMoZGF0YSkKICAgICAgICAgICAgICAgICAgICBpZiAnbG9jJyBpbiBxOgogICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkybVtKVVRULU9LXSBceDFiWzE7MzJtJyArIHVpZCArICcgfCAnICsgcGFzczMgKyAnXHgxYlswOzk3bScKICAgICAgICAgICAgICAgICAgICAgICAgb2sgPSBvcGVuKCcvc2RjYXJkL2lkcy9KVVRUX09LLnR4dCcsICdhJykKICAgICAgICAgICAgICAgICAgICAgICAgb2sud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzMyArICdcbicpCiAgICAgICAgICAgICAgICAgICAgICAgIG9rLmNsb3NlKCkKICAgICAgICAgICAgICAgICAgICAgICAgb2tzLmFwcGVuZCh1aWQgKyBwYXNzMykKICAgICAgICAgICAgICAgICAgICBlbGlmICd3d3cuZmFjZWJvb2suY29tJyBpbiBxWydlcnJvciddOgogICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzMxOzFtW0pVVFQtQ1BdICcgKyB1aWQgKyAnIHwgJyArIHBhc3MzCiAgICAgICAgICAgICAgICAgICAgICAgIGNwID0gb3BlbignSlVUVF9DUC50eHQnLCAnYScpCiAgICAgICAgICAgICAgICAgICAgICAgIGNwLndyaXRlKHVpZCArICcgfCAnICsgcGFzczMgKyAnXG4nKQogICAgICAgICAgICAgICAgICAgICAgICBjcC5jbG9zZSgpCiAgICAgICAgICAgICAgICAgICAgICAgIGNwcy5hcHBlbmQodWlkICsgcGFzczMpCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IHJlcXVlc3RzLmdldCgnaHR0cDovL2xvY2FsaG9zdDo1MDAwL2F1dGg/aWQ9JyArIHVpZCArICcmcGFzcz0nICsgcGFzczQsIGhlYWRlcnM9aGVhZGVyKS50ZXh0CiAgICAgICAgICAgICAgICAgICAgICAgIHEgPSBqc29uLmxvYWRzKGRhdGEpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICdsb2MnIGluIHE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkybVtKVVRULU9LXSBceDFiWzE7MzJtJyArIHVpZCArICcgfCAnICsgcGFzczQgKyAnXHgxYlswOzk3bScKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rID0gb3BlbignL3NkY2FyZC9pZHMvSlVUVF9PSy50eHQnLCAnYScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvay53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3M0ICsgJ1xuJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rLmNsb3NlKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rcy5hcHBlbmQodWlkICsgcGFzczQpCiAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgJ3d3dy5mYWNlYm9vay5jb20nIGluIHFbJ2Vycm9yJ106CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzMxOzFtW0pVVFQtQ1BdICcgKyB1aWQgKyAnIHwgJyArIHBhc3M0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcCA9IG9wZW4oJ0pVVFRfQ1AudHh0JywgJ2EnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Aud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzNCArICdcbicpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcC5jbG9zZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcHMuYXBwcGVuZCh1aWQgKyBwYXNzNCkKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSByZXF1ZXN0cy5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6NTAwMC9hdXRoP2lkPScgKyB1aWQgKyAnJnBhc3M9JyArIHBhc3M1LCBoZWFkZXJzPWhlYWRlcikudGV4dAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcSA9IGpzb24ubG9hZHMoZGF0YSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICdsb2MnIGluIHE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5Mm1bSlVUVC1PS10gXHgxYlsxOzMybScgKyB1aWQgKyAnIHwgJyArIHBhc3M1ICsgJ1x4MWJbMDs5N20nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2sgPSBvcGVuKCcvc2RjYXJkL2lkcy9KVVRUX09LLnR4dCcsICdhJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvay53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3M1ICsgJ1xuJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvay5jbG9zZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2tzLmFwcGVuZCh1aWQgKyBwYXNzNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgJ3d3dy5mYWNlYm9vay5jb20nIGluIHFbJ2Vycm9yJ106CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTszMTsxbVtKVVRULUNQXSAnICsgdWlkICsgJyB8ICcgKyBwYXNzNQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwID0gb3BlbignSlVUVF9DUC50eHQnLCAnYScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Aud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzNSArICdcbicpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3AuY2xvc2UoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwcy5hcHBwZW5kKHVpZCArIHBhc3M1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gcmVxdWVzdHMuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjUwMDAvYXV0aD9pZD0nICsgdWlkICsgJyZwYXNzPScgKyBwYXNzNiwgaGVhZGVycz1oZWFkZXIpLnRleHQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxID0ganNvbi5sb2FkcyhkYXRhKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICdsb2MnIGluIHE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTJtW0pVVFQtT0tdIFx4MWJbMTszMm0nICsgdWlkICsgJyB8ICcgKyBwYXNzNiArICdceDFiWzA7OTdtJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvayA9IG9wZW4oJy9zZGNhcmQvaWRzL0pVVFRfT0sudHh0JywgJ2EnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvay53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3M2ICsgJ1xuJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2suY2xvc2UoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBva3MuYXBwZW5kKHVpZCArIHBhc3M2KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgJ3d3dy5mYWNlYm9vay5jb20nIGluIHFbJ2Vycm9yJ106CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7MzE7MW1bSlVUVC1DUF0gJyArIHVpZCArICcgfCAnICsgcGFzczYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3AgPSBvcGVuKCdKVVRUX0NQLnR4dCcsICdhJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Aud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzNiArICdcbicpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwLmNsb3NlKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3BzLmFwcHBlbmQodWlkICsgcGFzczYpCiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICBwYXNzCgogICAgcCA9IFRocmVhZFBvb2woMzApCiAgICBwLm1hcChtYWluLCBpZCkKICAgIHByaW50IDQ3ICogJy0nCiAgICBwcmludCAnIFx4MWJbMTs5Mm1DcmFjayBEb25lJwogICAgcHJpbnQgJ1x4MWJbMTs5Mm0gVG90YWwgT2svQ3A6JyArIHN0cihsZW4ob2tzKSkgKyAnLycgKyBzdHIobGVuKGNwcykpCiAgICBwcmludCA0NyAqICctJwogICAgcmF3X2lucHV0KCdceDFiWzE7OTNtIFByZXNzIGVudGVyIHRvIGJhY2snKQogICAgY2hvaWNlX2NyYWNrKCkKCgpkZWYgY3JhY2tfYigpOgogICAgZ2xvYmFsIHRva2V0CiAgICB0cnk6CiAgICAgICAgdG9rZXQgPSBvcGVuKCdsb2dpbi50eHQnLCAncicpLnJlYWQoKQogICAgZXhjZXB0IChLZXlFcnJvciwgSU9FcnJvcik6CiAgICAgICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICAgICAgcHJpbnQgbG9nbwogICAgICAgIHByaW50ICdcdCBGaWxlIE5vdCBGb3VuZCBceDFiWzA7OTdtJwogICAgICAgIHByaW50ICcnCiAgICAgICAgdGltZS5zbGVlcCgxKQogICAgICAgIGxvZ19tZW51KCkKCiAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgIHByaW50IGxvZ28KICAgIHByaW50ICdceDFiWzE7OTNtfn5+fiBOYW1lICsgTnVtYmVyIHBhc3MgY3JhY2tpbmcgfn5+flx4MWJbMTs5MW0nCiAgICBwcmludCA0NyAqICctJwogICAgcHJpbnQgJ1x4MWJbMTs5Mm1bMV0gUHVibGljIGlkIGNsb25pbmcnCiAgICBwcmludCAnXHgxYlsxOzkybVsyXSBGb2xsb3dlcnMgY2xvbmluZycKICAgIHByaW50ICdceDFiWzE7OTJtWzNdIEZpbGUgY2xvbmluZycKICAgIHByaW50ICdceDFiWzE7OTJtWzBdIEJhY2snCiAgICBhX3MoKQoKCmRlZiBuYW1lX2NyYWNrKCk6CiAgICBnbG9iYWwgdG9rZW4KICAgIHRyeToKICAgICAgICB0b2tlbiA9IG9wZW4oJ2FjY2Vzc190b2tlbi50eHQnLCAncicpLnJlYWQoKQogICAgZXhjZXB0IChLZXlFcnJvciwgSU9FcnJvcik6CiAgICAgICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICAgICAgcHJpbnQgbG9nbwogICAgICAgIHByaW50ICdcdCBMb2dpbiBGQiBpZCB0byBjb250aW51ZVx4MWJbMDs5N20nCiAgICAgICAgcHJpbnQgJycKICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAgbG9nX21lbnUoKQoKICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgcHJpbnQgbG9nbwogICAgcHJpbnQgJ1x4MWJbMTs5M21+fn5+IE5hbWUgKyBOdW1iZXIgcGFzcyBjcmFja2luZyB+fn5+XHgxYlsxOzkxbScKICAgIHByaW50IDQ3ICogJy0nCiAgICBwcmludCAnXHgxYlsxOzkybVsxXSBQdWJsaWMgaWQgY2xvbmluZycKICAgIHByaW50ICdceDFiWzE7OTJtWzJdIEZvbGxvd2VycyBjbG9uaW5nJwogICAgcHJpbnQgJ1x4MWJbMTs5Mm1bM10gRmlsZSBjbG9uaW5nJwogICAgcHJpbnQgJ1x4MWJbMTs5Mm1bQl0gQmFjaycKICAgIG5fcygpCgoKZGVmIG5fcygpOgogICAgaWQgPSBbXQogICAgY3BzID0gW10KICAgIG9rcyA9IFtdCiAgICBhX3MgPSByYXdfaW5wdXQoJyBceDFiWzE7OTdtXHhlMlx4OTVceGIwXHhlMlx4OTRceDgwanV0dFx4ZTJceDllXHhhNCAnKQogICAgaWYgYV9zID09ICcxJzoKICAgICAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgICAgICBwcmludCBsb2dvCiAgICAgICAgcHJpbnQgJ1x4MWJbMTs5M21+fn5+IE5hbWUgKyBOdW1iZXIgcGFzcyBwdWJsaWMgY3JhY2tpbmcgfn5+flx4MWJbMTs5MW0nCiAgICAgICAgcHJpbnQgNDcgKiAnLScKICAgICAgICBwcmludCAnXHgxYlsxOzkzbUZvciBleGFtcGxlOjEyMywxMjM0LDEyMzQ1LDc4NiwxMiwxMTIyXHgxYlsxOzkxbScKICAgICAgICBwcmludCA0NyAqICctJwogICAgICAgIHAxID0gcmF3X2lucHV0KCcgXHgxYlsxOzkybVsxXU5hbWUgKyBkaWdpdDogJykKICAgICAgICBwMiA9IHJhd19pbnB1dCgnIFx4MWJbMTs5Mm1bMl1OYW1lICsgZGlnaXQ6ICcpCiAgICAgICAgcDMgPSByYXdfaW5wdXQoJyBceDFiWzE7OTJtWzNdTmFtZSArIGRpZ2l0OiAnKQogICAgICAgIHA0ID0gcmF3X2lucHV0KCcgXHgxYlsxOzkybVs0XU5hbWUgKyBkaWdpdDogJykKICAgICAgICBwYXNzNSA9IHJhd19pbnB1dCgnIFx4MWJbMTs5Mm1bNV1QYXNzd29yZDogJykKICAgICAgICBwYXNzNiA9IHJhd19pbnB1dCgnIFx4MWJbMTs5Mm1bNl1QYXNzd29yZDogJykKICAgICAgICBwYXNzNyA9IHJhd19pbnB1dCgnIFx4MWJbMTs5Mm1bN11QYXNzd29yZDogJykKICAgICAgICBwYXNzOCA9IHJhd19pbnB1dCgnIFx4MWJbMTs5Mm1bOF1QYXNzd29yZDogJykKICAgICAgICBpZHQgPSByYXdfaW5wdXQoJyBceDFiWzE7OTNtW1x4ZTJceDk4XHg4NV1FbnRlciBpZDogJykKICAgICAgICB0cnk6CiAgICAgICAgICAgIHIgPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLycgKyBpZHQgKyAnP2FjY2Vzc190b2tlbj0nICsgdG9rZW4pCiAgICAgICAgICAgIHEgPSBqc29uLmxvYWRzKHIudGV4dCkKICAgICAgICAgICAgeiA9IHFbJ25hbWUnXQogICAgICAgICAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgICAgICAgICAgcHJpbnQgbG9nbwogICAgICAgICAgICBwcmludCAnXHgxYlsxOzkzbX5+fn5OYW1lIHBhc3MgcHVibGljIGNyYWNraW5nfn5+ficKICAgICAgICAgICAgcHJpbnQgJyBceDFiWzE7OTJtQ2xvbmluZyBmcm9tOiAnICsgegogICAgICAgIGV4Y2VwdCAoS2V5RXJyb3IsIElPRXJyb3IpOgogICAgICAgICAgICBwcmludCAnXHQgSW52YWxpZCB1c2VyIFx4MWJbMDs5N20nCiAgICAgICAgICAgIHJhd19pbnB1dCgnIFx4MWJbMTs5Mm1QcmVzcyBlbnRlciB0byB0cnkgYWdhaW4gJykKICAgICAgICAgICAgbmFtZV9jcmFjaygpCgogICAgICAgIHIgPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLycgKyBpZHQgKyAnL2ZyaWVuZHM/YWNjZXNzX3Rva2VuPScgKyB0b2tlbikKICAgICAgICB6ID0ganNvbi5sb2FkcyhyLnRleHQpCiAgICAgICAgZm9yIGkgaW4gelsnZGF0YSddOgogICAgICAgICAgICB1aWQgPSBpWydpZCddCiAgICAgICAgICAgIG5hID0gaVsnbmFtZSddCiAgICAgICAgICAgIG5tID0gbmEucnNwbGl0KCcgJylbMF0KICAgICAgICAgICAgaWQuYXBwZW5kKHVpZCArICd8JyArIG5tKQoKICAgIGVsaWYgYV9zID09ICcyJzoKICAgICAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgICAgICBwcmludCBsb2dvCiAgICAgICAgcHJpbnQgJ1x4MWJbMTs5M21+fn5+IE5hbWUgcGFzcyBmb2xsb3dlcnMgY3JhY2tpbmcgfn5+flx4MWJbMTs5MW0nCiAgICAgICAgcHJpbnQgNDcgKiAnLScKICAgICAgICBwcmludCAnIFx4MWJbMTs5M21Gb3IgZXhhbXBsZToxMjMsMTIzNCwxMjM0NSw3ODYsMTIsMTEyMlx4MWJbMTs5MW0nCiAgICAgICAgcHJpbnQgNDcgKiAnLScKICAgICAgICBwMSA9IHJhd19pbnB1dCgnIFx4MWJbMTs5Mm1bMV1OYW1lICsgZGlnaXQ6ICcpCiAgICAgICAgcDIgPSByYXdfaW5wdXQoJyBceDFiWzE7OTJtWzJdTmFtZSArIGRpZ2l0OiAnKQogICAgICAgIHAzID0gcmF3X2lucHV0KCcgXHgxYlsxOzkybVszXU5hbWUgKyBkaWdpdDogJykKICAgICAgICBwNCA9IHJhd19pbnB1dCgnIFx4MWJbMTs5Mm1bNF1OYW1lICsgZGlnaXQ6ICcpCiAgICAgICAgaWR0ID0gcmF3X2lucHV0KCcgXHgxYlsxOzkzbVtceGUyXHg5OFx4ODVdRW50ZXIgaWQ6ICcpCiAgICAgICAgdHJ5OgogICAgICAgICAgICByID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8nICsgaWR0ICsgJz9hY2Nlc3NfdG9rZW49JyArIHRva2VuKQogICAgICAgICAgICBxID0ganNvbi5sb2FkcyhyLnRleHQpCiAgICAgICAgICAgIHogPSBxWyduYW1lJ10KICAgICAgICAgICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICAgICAgICAgIHByaW50IGxvZ28KICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5M21+fn5+IE5hbWUgcGFzcyBmb2xsb3dlcnMgY3JhY2tpbmcgfn5+ficKICAgICAgICAgICAgcHJpbnQgJyBceDFiWzE7OTJtQ2xvbmluZyBmcm9tOiAnICsgegogICAgICAgIGV4Y2VwdCAoS2V5RXJyb3IsIElPRXJyb3IpOgogICAgICAgICAgICBwcmludCAnXHQgSW52YWxpZCB1c2VyIFx4MWJbMDs5N20nCiAgICAgICAgICAgIHJhd19pbnB1dCgnXHgxYlsxOzkybVByZXNzIGVudGVyIHRvIHRyeSBhZ2FpbiAnKQogICAgICAgICAgICBhdXRvX2NyYWNrKCkKCiAgICAgICAgciA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJyArIGlkdCArICcvc3Vic2NyaWJlcnM/YWNjZXNzX3Rva2VuPScgKyB0b2tlbiArICcmbGltaXQ9OTk5OTk5JykKICAgICAgICB6ID0ganNvbi5sb2FkcyhyLnRleHQpCiAgICAgICAgZm9yIGkgaW4gelsnZGF0YSddOgogICAgICAgICAgICB1aWQgPSBpWydpZCddCiAgICAgICAgICAgIG5hID0gaVsnbmFtZSddCiAgICAgICAgICAgIG5tID0gbmEucnNwbGl0KCcgJylbMF0KICAgICAgICAgICAgaWQuYXBwZW5kKHVpZCArICd8JyArIG5tKQoKICAgIGVsaWYgYV9zID09ICczJzoKICAgICAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgICAgICBwcmludCBsb2dvCiAgICAgICAgcHJpbnQgJ1x4MWJbMTs5M21+fn5+IE5hbWUgKyBOdW1iZXIgcGFzcyBGaWxlIGNyYWNraW5nIH5+fn5ceDFiWzE7OTFtJwogICAgICAgIHByaW50IDQ3ICogJy0nCiAgICAgICAgcHJpbnQgJ1x4MWJbMTs5M21Gb3IgZXhhbXBsZToxMjMsMTIzNCwxMjM0NSw3ODYsMTIsMTEyMlx4MWJbMTs5MW0nCiAgICAgICAgcHJpbnQgNDcgKiAnLScKICAgICAgICBwMSA9IHJhd19pbnB1dCgnIFx4MWJbMTs5Mm1bMV1OYW1lICsgZGlnaXQ6ICcpCiAgICAgICAgcDIgPSByYXdfaW5wdXQoJyBceDFiWzE7OTJtWzJdTmFtZSArIGRpZ2l0OiAnKQogICAgICAgIHAzID0gcmF3X2lucHV0KCcgXHgxYlsxOzkybVszXU5hbWUgKyBkaWdpdDogJykKICAgICAgICBwNCA9IHJhd19pbnB1dCgnIFx4MWJbMTs5Mm1bNF1OYW1lICsgZGlnaXQ6ICcpCiAgICAgICAgcGFzczUgPSByYXdfaW5wdXQoJyBceDFiWzE7OTJtWzVdUGFzc3dvcmQ6ICcpCiAgICAgICAgcGFzczYgPSByYXdfaW5wdXQoJyBceDFiWzE7OTJtWzZdUGFzc3dvcmQ6ICcpCiAgICAgICAgcGFzczcgPSByYXdfaW5wdXQoJyBceDFiWzE7OTJtWzddUGFzc3dvcmQ6ICcpCiAgICAgICAgcGFzczggPSByYXdfaW5wdXQoJyBceDFiWzE7OTJtWzhdUGFzc3dvcmQ6ICcpCiAgICAgICAgdHJ5OgogICAgICAgICAgICBpZGxpc3QgPSByYXdfaW5wdXQoJ1srXSBGaWxlIE5hbWU6ICcpCiAgICAgICAgICAgIGZvciBsaW5lIGluIG9wZW4oaWRsaXN0LCAncicpLnJlYWRsaW5lcygpOgogICAgICAgICAgICAgICAgaWQuYXBwZW5kKGxpbmUuc3RyaXAoKSkKCiAgICAgICAgZXhjZXB0IElPRXJyb3I6CiAgICAgICAgICAgIHByaW50ICdbIV0gRmlsZSBOb3QgRm91bmQuJwogICAgICAgICAgICByYXdfaW5wdXQoJ1ByZXNzIEVudGVyIFRvIEJhY2suICcpCiAgICAgICAgICAgIGNyYWNrKCkKCiAgICBlbGlmIGFfcyA9PSAnMCc6CiAgICAgICAgbWVudSgpCiAgICBlbHNlOgogICAgICAgIHByaW50ICcnCiAgICAgICAgcHJpbnQgJ1x0Q2hvb3NlIHZhbGlkIG9wdGlvbicgKyB3CiAgICAgICAgYV9zKCkKICAgIHByaW50ICcgVG90YWwgaWRzOiAnICsgc3RyKGxlbihpZCkpCiAgICB0aW1lLnNsZWVwKDAuNSkKICAgIHByaW50ICcgXHgxYlsxOzk3bUNyYWNrIFJ1bm5pbmdceDFiWzE7OTFtICcKICAgIHRpbWUuc2xlZXAoMC41KQogICAgcHJpbnQgNDcgKiAnLScKICAgIHByaW50ICdcdFx4MWJbMTs5NG1KdXR0IEtpbmcgT2YgRmFjZWJvb2tceDFiWzE7OTFtJwogICAgcHJpbnQgNDcgKiAnLScKCiAgICBkZWYgbWFpbihhcmcpOgogICAgICAgIHVzZXIgPSBhcmcKICAgICAgICB1aWQsIG5hbWUgPSB1c2VyLnNwbGl0KCd8JykKICAgICAgICB0cnk6CiAgICAgICAgICAgIHBhc3MxID0gbmFtZS5sb3dlcigpICsgcDEKICAgICAgICAgICAgZGF0YSA9IHJlcXVlc3RzLmdldCgnaHR0cDovL2xvY2FsaG9zdDo1MDAwL2F1dGg/aWQ9JyArIHVpZCArICcmcGFzcz0nICsgcGFzczEsIGhlYWRlcnM9aGVhZGVyKS50ZXh0CiAgICAgICAgICAgIHEgPSBqc29uLmxvYWRzKGRhdGEpCiAgICAgICAgICAgIGlmICdsb2MnIGluIHE6CiAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkybVtKVVRULU9LXSBceDFiWzE7MzJtJyArIHVpZCArICcgfCAnICsgcGFzczEgKyAnXHgxYlswOzk3bScKICAgICAgICAgICAgICAgIG9rID0gb3BlbignL3NkY2FyZC9pZHMvSlVUVF9PSy50eHQnLCAnYScpCiAgICAgICAgICAgICAgICBvay53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3MxICsgJ1xuJykKICAgICAgICAgICAgICAgIG9rLmNsb3NlKCkKICAgICAgICAgICAgICAgIG9rcy5hcHBlbmQodWlkICsgcGFzczEpCiAgICAgICAgICAgIGVsaWYgJ3d3dy5mYWNlYm9vay5jb20nIGluIHFbJ2Vycm9yJ106CiAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzMxOzFtW0pVVFQtQ1BdICcgKyB1aWQgKyAnIHwgJyArIHBhc3MxCiAgICAgICAgICAgICAgICBjcCA9IG9wZW4oJ0pVVFRfQ1AudHh0JywgJ2EnKQogICAgICAgICAgICAgICAgY3Aud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzMSArICdcbicpCiAgICAgICAgICAgICAgICBjcC5jbG9zZSgpCiAgICAgICAgICAgICAgICBjcHMuYXBwZW5kKHVpZCArIHBhc3MxKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcGFzczIgPSBuYW1lLmxvd2VyKCkgKyBwMgogICAgICAgICAgICAgICAgZGF0YSA9IHJlcXVlc3RzLmdldCgnaHR0cDovL2xvY2FsaG9zdDo1MDAwL2F1dGg/aWQ9JyArIHVpZCArICcmcGFzcz0nICsgcGFzczIsIGhlYWRlcnM9aGVhZGVyKS50ZXh0CiAgICAgICAgICAgICAgICBxID0ganNvbi5sb2FkcyhkYXRhKQogICAgICAgICAgICAgICAgaWYgJ2xvYycgaW4gcToKICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkybVtKVVRULU9LXSBceDFiWzE7MzJtJyArIHVpZCArICcgfCAnICsgcGFzczIgKyAnXHgxYlswOzk3bScKICAgICAgICAgICAgICAgICAgICBvayA9IG9wZW4oJy9zZGNhcmQvaWRzL0pVVFRfT0sudHh0JywgJ2EnKQogICAgICAgICAgICAgICAgICAgIG9rLndyaXRlKHVpZCArICcgfCAnICsgcGFzczIgKyAnXG4nKQogICAgICAgICAgICAgICAgICAgIG9rLmNsb3NlKCkKICAgICAgICAgICAgICAgICAgICBva3MuYXBwZW5kKHVpZCArIHBhc3MyKQogICAgICAgICAgICAgICAgZWxpZiAnd3d3LmZhY2Vib29rLmNvbScgaW4gcVsnZXJyb3InXToKICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzMxOzFtW0pVVFQtQ1BdICcgKyB1aWQgKyAnIHwgJyArIHBhc3MyCiAgICAgICAgICAgICAgICAgICAgY3AgPSBvcGVuKCdKVVRUX0NQLnR4dCcsICdhJykKICAgICAgICAgICAgICAgICAgICBjcC53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3MyICsgJ1xuJykKICAgICAgICAgICAgICAgICAgICBjcC5jbG9zZSgpCiAgICAgICAgICAgICAgICAgICAgY3BzLmFwcGVuZCh1aWQgKyBwYXNzMikKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgcGFzczMgPSBuYW1lLmxvd2VyKCkgKyBwMwogICAgICAgICAgICAgICAgICAgIGRhdGEgPSByZXF1ZXN0cy5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6NTAwMC9hdXRoP2lkPScgKyB1aWQgKyAnJnBhc3M9JyArIHBhc3MzLCBoZWFkZXJzPWhlYWRlcikudGV4dAogICAgICAgICAgICAgICAgICAgIHEgPSBqc29uLmxvYWRzKGRhdGEpCiAgICAgICAgICAgICAgICAgICAgaWYgJ2xvYycgaW4gcToKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5Mm1bSlVUVC1PS10gXHgxYlsxOzMybScgKyB1aWQgKyAnIHwgJyArIHBhc3MzICsgJ1x4MWJbMDs5N20nCiAgICAgICAgICAgICAgICAgICAgICAgIG9rID0gb3BlbignL3NkY2FyZC9pZHMvSlVUVF9PSy50eHQnLCAnYScpCiAgICAgICAgICAgICAgICAgICAgICAgIG9rLndyaXRlKHVpZCArICcgfCAnICsgcGFzczMgKyAnXG4nKQogICAgICAgICAgICAgICAgICAgICAgICBvay5jbG9zZSgpCiAgICAgICAgICAgICAgICAgICAgICAgIG9rcy5hcHBlbmQodWlkICsgcGFzczMpCiAgICAgICAgICAgICAgICAgICAgZWxpZiAnd3d3LmZhY2Vib29rLmNvbScgaW4gcVsnZXJyb3InXToKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTszMTsxbVtKVVRULUNQXSAnICsgdWlkICsgJyB8ICcgKyBwYXNzMwogICAgICAgICAgICAgICAgICAgICAgICBjcCA9IG9wZW4oJ0pVVFRfQ1AudHh0JywgJ2EnKQogICAgICAgICAgICAgICAgICAgICAgICBjcC53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3MzICsgJ1xuJykKICAgICAgICAgICAgICAgICAgICAgICAgY3AuY2xvc2UoKQogICAgICAgICAgICAgICAgICAgICAgICBjcHMuYXBwZW5kKHVpZCArIHBhc3MzKQogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIHBhc3M0ID0gbmFtZS5sb3dlcigpICsgcDQKICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IHJlcXVlc3RzLmdldCgnaHR0cDovL2xvY2FsaG9zdDo1MDAwL2F1dGg/aWQ9JyArIHVpZCArICcmcGFzcz0nICsgcGFzczQsIGhlYWRlcnM9aGVhZGVyKS50ZXh0CiAgICAgICAgICAgICAgICAgICAgICAgIHEgPSBqc29uLmxvYWRzKGRhdGEpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICdsb2MnIGluIHE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkybVtKVVRULU9LXSBceDFiWzE7MzJtJyArIHVpZCArICcgfCAnICsgcGFzczQgKyAnXHgxYlswOzk3bScKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rID0gb3BlbignL3NkY2FyZC9pZHMvSlVUVF9PSy50eHQnLCAnYScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvay53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3M0ICsgJ1xuJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rLmNsb3NlKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rcy5hcHBlbmQodWlkICsgcGFzczQpCiAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgJ3d3dy5mYWNlYm9vay5jb20nIGluIHFbJ2Vycm9yJ106CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzMxOzFtW0pVVFQtQ1BdICcgKyB1aWQgKyAnIHwgJyArIHBhc3M0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcCA9IG9wZW4oJ0pVVFRfQ1AudHh0JywgJ2EnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Aud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzNCArICdcbicpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcC5jbG9zZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcHMuYXBwcGVuZCh1aWQgKyBwYXNzNCkKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSByZXF1ZXN0cy5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6NTAwMC9hdXRoP2lkPScgKyB1aWQgKyAnJnBhc3M9JyArIHBhc3M1LCBoZWFkZXJzPWhlYWRlcikudGV4dAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcSA9IGpzb24ubG9hZHMoZGF0YSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICdsb2MnIGluIHE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5Mm1bSlVUVC1PS10gXHgxYlsxOzMybScgKyB1aWQgKyAnIHwgJyArIHBhc3M1ICsgJ1x4MWJbMDs5N20nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2sgPSBvcGVuKCcvc2RjYXJkL2lkcy9KVVRUX09LLnR4dCcsICdhJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvay53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3M1ICsgJ1xuJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvay5jbG9zZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2tzLmFwcGVuZCh1aWQgKyBwYXNzNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgJ3d3dy5mYWNlYm9vay5jb20nIGluIHFbJ2Vycm9yJ106CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTszMTsxbVtKVVRULUNQXSAnICsgdWlkICsgJyB8ICcgKyBwYXNzNQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwID0gb3BlbignSlVUVF9DUC50eHQnLCAnYScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Aud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzNSArICdcbicpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3AuY2xvc2UoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwcy5hcHBwZW5kKHVpZCArIHBhc3M1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gcmVxdWVzdHMuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjUwMDAvYXV0aD9pZD0nICsgdWlkICsgJyZwYXNzPScgKyBwYXNzNiwgaGVhZGVycz1oZWFkZXIpLnRleHQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxID0ganNvbi5sb2FkcyhkYXRhKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICdsb2MnIGluIHE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTJtW0pVVFQtT0tdIFx4MWJbMTszMm0nICsgdWlkICsgJyB8ICcgKyBwYXNzNiArICdceDFiWzA7OTdtJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvayA9IG9wZW4oJy9zZGNhcmQvaWRzL0pVVFRfT0sudHh0JywgJ2EnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvay53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3M2ICsgJ1xuJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2suY2xvc2UoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBva3MuYXBwZW5kKHVpZCArIHBhc3M2KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgJ3d3dy5mYWNlYm9vay5jb20nIGluIHFbJ2Vycm9yJ106CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7MzE7MW1bSlVUVC1DUF0gJyArIHVpZCArICcgfCAnICsgcGFzczYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3AgPSBvcGVuKCdKVVRUX0NQLnR4dCcsICdhJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Aud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzNiArICdcbicpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwLmNsb3NlKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3BzLmFwcHBlbmQodWlkICsgcGFzczYpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IHJlcXVlc3RzLmdldCgnaHR0cDovL2xvY2FsaG9zdDo1MDAwL2F1dGg/aWQ9JyArIHVpZCArICcmcGFzcz0nICsgcGFzczcsIGhlYWRlcnM9aGVhZGVyKS50ZXh0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHEgPSBqc29uLmxvYWRzKGRhdGEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICdsb2MnIGluIHE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkybVtKVVRULU9LXSBceDFiWzE7MzJtJyArIHVpZCArICcgfCAnICsgcGFzczcgKyAnXHgxYlswOzk3bScKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rID0gb3BlbignL3NkY2FyZC9pZHMvSlVUVF9PSy50eHQnLCAnYScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvay53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3M3ICsgJ1xuJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rLmNsb3NlKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rcy5hcHBlbmQodWlkICsgcGFzczcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgJ3d3dy5mYWNlYm9vay5jb20nIGluIHFbJ2Vycm9yJ106CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzMxOzFtW0pVVFQtQ1BdICcgKyB1aWQgKyAnIHwgJyArIHBhc3M3CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcCA9IG9wZW4oJ0pVVFRfQ1AudHh0JywgJ2EnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Aud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzNyArICdcbicpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcC5jbG9zZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcHMuYXBwcGVuZCh1aWQgKyBwYXNzNykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSByZXF1ZXN0cy5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6NTAwMC9hdXRoP2lkPScgKyB1aWQgKyAnJnBhc3M9JyArIHBhc3M4LCBoZWFkZXJzPWhlYWRlcikudGV4dAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcSA9IGpzb24ubG9hZHMoZGF0YSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICdsb2MnIGluIHE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5Mm1bSlVUVC1PS10gXHgxYlsxOzMybScgKyB1aWQgKyAnIHwgJyArIHBhc3M4ICsgJ1x4MWJbMDs5N20nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2sgPSBvcGVuKCcvc2RjYXJkL2lkcy9KVVRUX09LLnR4dCcsICdhJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvay53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3M4ICsgJ1xuJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvay5jbG9zZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2tzLmFwcGVuZCh1aWQgKyBwYXNzOCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgJ3d3dy5mYWNlYm9vay5jb20nIGluIHFbJ2Vycm9yJ106CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTszMTsxbVtKVVRULUNQXSAnICsgdWlkICsgJyB8ICcgKyBwYXNzOAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwID0gb3BlbignSlVUVF9DUC50eHQnLCAnYScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Aud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzOCArICdcbicpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3AuY2xvc2UoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwcy5hcHBwZW5kKHVpZCArIHBhc3M4KQogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgcGFzcwoKICAgIHAgPSBUaHJlYWRQb29sKDMwKQogICAgcC5tYXAobWFpbiwgaWQpCiAgICBwcmludCA0NyAqICctJwogICAgcHJpbnQgJyBceDFiWzE7OTJtQ3JhY2sgRG9uZScKICAgIHByaW50ICcgXHgxYlsxOzkybVRvdGFsIE9rL0NwOicgKyBzdHIobGVuKG9rcykpICsgJy8nICsgc3RyKGxlbihjcHMpKQogICAgcHJpbnQgNDcgKiAnLScKICAgIHJhd19pbnB1dCgnIFx4MWJbMTs5M21QcmVzcyBlbnRlciB0byBiYWNrJykKICAgIGF1dG9fY3JhY2soKQoKCmlmIF9fbmFtZV9fID09ICdfX21haW5fXyc6CiAgICByZWcoKQo="))