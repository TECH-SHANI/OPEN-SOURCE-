import base64
exec(base64.b64decode("IyEvdXNyL2Jpbi9weXRob24zDQojLSotY29kaW5nOnV0Zi04LSotDQojIE1hZGUgV2l0aCDinaTvuI8gQnkgRGFwdW50YSBBbmQgWE5TQ09ERSBQcm9qZWN0DQojIFVwZGF0ZSBWMS42DQpfYXV0aDAxXyA9ICdEYXB1bnRhIEFSJw0KDQojIEF1dGhvciA6IERhcHVudGEgQWR5YXBha3NpIFIuDQojIEZhY2Vib29rIChEYXB1bnRhIEtodXJheXJhIFgpICAgOiBGYWNlYm9vay5jb20vRGFwdW50YS5LaHVyYXlyYS5YDQojIEluc3RhZ3JhbSAo4pisIPCdkIDwnZCn8J2QqPCdkKfwnZCy8J2QpiDwnZ+S8J2fjvCdn5Ig4pisKSAgICA6IEluc3RhZ3JhbS5jb20vcmF0eWEuYW5vbnltLmlkDQojIFdoYXRzYXBwIChEYXB1bnRhIEJvdF9LZXkpICAgICAgOiArNjI4MjI0NTc4MDUyNA0KIyBZb3VUdWJlIChYYXlvbmFyYS5JRCkgICAgICAgICAgIDogWW91dHViZS5jb20vY2hhbm5lbC9VQ1pxblpsSjBqZm9XU25Yck5FajVKSEENCg0KIyBSZWNvZGUgU0MgT3JhbmcgSXR1IEdhayBLZXJlbiBCcm8NCiMgTHUgR2Fha2FuIEJpc2EgQmVya2VtYmFuZyBLYWxhdSBTa2lsbHUgQ3VtYSBSZWNvZGUNCiMgR2FhZGEgWWcgU3VzYWggU2VsYW1hIEx1IE1hdSBCZWxhamFyICYgQmVydXNhaGENCiMgSmFuZ2FuIFNhbXBhaSBMdSBKdWFsIEZpbGUgU291cmNlIENvZGUgSW5pICENCg0KIyMjIEltcG9ydCBNb2R1bGUNCmltcG9ydCByZXF1ZXN0cyxiczQsc3lzLG9zLHJhbmRvbSx0aW1lLHJlLGpzb24sdXVpZCxzdWJwcm9jZXNzDQpmcm9tIHJhbmRvbSBpbXBvcnQgcmFuZGludA0KZnJvbSBjb25jdXJyZW50LmZ1dHVyZXMgaW1wb3J0IFRocmVhZFBvb2xFeGVjdXRvciBhcyBUaHJlYWRQb29sDQpmcm9tIGJzNCBpbXBvcnQgQmVhdXRpZnVsU291cCBhcyBwYXINCmZyb20gZGF0ZXRpbWUgaW1wb3J0IGRhdGUNCmZyb20gZGF0ZXRpbWUgaW1wb3J0IGRhdGV0aW1lDQpmcm9tIHVybGxpYi5wYXJzZSBpbXBvcnQgcXVvdGUNCg0KIyMjIFBlcnVtcGFtYWFuIE1vZHVsZSAmIFN5bnRheA0KX3JlcV9zZXNfICA9IHJlcXVlc3RzLlNlc3Npb24oKQ0KX3JlcV9nZXRfICA9IHJlcXVlc3RzLmdldA0KX3JlcV9wb3N0XyA9IHJlcXVlc3RzLnBvc3QNCl9qc19sb18gICAgPSBqc29uLmxvYWRzDQpfZGFwdW50YV9jaWNpXyAgICA9IHByaW50DQpfY2ljaV9kYXB1bnRhXyAgICA9IGlucHV0DQpfZGFwdW50YV9kYXB1bnRhXyA9IG9wZW4NCl9jaWNpX2NpY2lfICAgICAgID0gZXhpdA0KDQojIyMgV2FybmENClogPSAiXHgxYlswOzkwbSIgIyBIaXRhbQ0KUCA9ICJceDFiWzA7OTdtIiAjIFB1dGloDQpNID0gIlx4MWJbMDs5MW0iICMgTWVyYWgNCkggPSAiXHgxYlswOzkybSIgIyBIaWphdQ0KSyA9ICJceDFiWzA7OTNtIiAjIEt1bmluZw0KQiA9ICJceDFiWzA7OTRtIiAjIEJpcnUNClUgPSAiXHgxYlswOzk1bSIgIyBVbmd1DQpPID0gIlx4MWJbMDs5Nm0iICMgQmlydSBNdWRhDQoNCiMjIyBIb3N0ICYgUGVuYW1wdW5nYW4NCmhvc3QgPSAiaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29tIg0Kb2sgPSBbXQ0KY3AgPSBbXQ0KdHRsID0gW10NCmNvdW50ID0gMQ0KX3B1dGFyXyA9IDANCmRhdGFfMSA9IHt9DQpkYXRhXzIgPSB7fQ0KZGF0YV9jaGFuZ2VfMSA9IHt9DQpkYXRhX2NoYW5nZV8yID0ge30NCmRhdGFfdXNlciA9IFtdDQpoZWFkZXJfZ3J1cCA9IHsidXNlci1hZ2VudCI6ICJOb2tpYUMzLTAwLzUuMCAoMDcuMjApIFByb2ZpbGUvTUlEUC0yLjEgQ29uZmlndXJhdGlvbi9DTERDLTEuMSBNb3ppbGxhLzUuMCBBcHBsZVdlYktpdC80MjArIChLSFRNTCwgbGlrZSBHZWNrbykgU2FmYXJpLzQyMCsifQ0KaGVhZGVyX25hbWEgPSB7Im9yaWdpbiI6ICJodHRwczovL21iYXNpYy5mYWNlYm9vay5jb20iLCJhY2NlcHQtbGFuZ3VhZ2UiOiAiaWQtSUQsaWQ7cT0wLjksZW4tVVM7cT0wLjgsZW47cT0wLjciLCJhY2NlcHQtZW5jb2RpbmciOiAiZ3ppcCwgZGVmbGF0ZSIsImFjY2VwdCI6ICJ0ZXh0L2h0bWwsYXBwbGljYXRpb24veGh0bWwreG1sLGFwcGxpY2F0aW9uL3htbDtxPTAuOSxpbWFnZS93ZWJwLGltYWdlL2FwbmcsKi8qO3E9MC44IiwidXNlci1hZ2VudCI6ICJOb2tpYUMzLTAwLzUuMCAoMDcuMjApIFByb2ZpbGUvTUlEUC0yLjEgQ29uZmlndXJhdGlvbi9DTERDLTEuMSBNb3ppbGxhLzUuMCBBcHBsZVdlYktpdC80MjArIChLSFRNTCwgbGlrZSBHZWNrbykgU2FmYXJpLzQyMCsiLCJIb3N0IjogIiIuam9pbihiczQucmUuZmluZGFsbCgiOi8vKC4qPykkIiwiaHR0cHM6Ly9tLmZhY2Vib29rLmNvbSIpKSwicmVmZXJlciI6ICJodHRwczovL20uZmFjZWJvb2suY29tL2xvZ2luLz9uZXh0JnJlZj1kYmwmZmwmcmVmaWQ9OCIsImNhY2hlLWNvbnRyb2wiOiAibWF4LWFnZT0wIiwidXBncmFkZS1pbnNlY3VyZS1yZXF1ZXN0cyI6ICIxIiwiY29udGVudC10eXBlIjogImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCJ9DQpoZWFkZXJfaGFzaHRhZyA9IHsnYXV0aG9yaXR5JzogJ21iYXNpYy5mYWNlYm9vay5jb20nLCdtZXRob2QnOiAnR0VUJywncGF0aCc6ICcvZmF2aWNvbi5pY28nLCdzY2hlbWUnOiAnaHR0cHMnLCdhY2NlcHQnOiAnaW1hZ2UvYXZpZixpbWFnZS93ZWJwLGltYWdlL2FwbmcsaW1hZ2Uvc3ZnK3htbCxpbWFnZS8qLCovKjtxPTAuOCcsJ2FjY2VwdC1lbmNvZGluZyc6ICdnemlwLCBkZWZsYXRlJywnYWNjZXB0LWxhbmd1YWdlJzogJ2VuLVVTLGVuO3E9MC45JywndXNlci1hZ2VudCc6ICdOb2tpYUMzLTAwLzUuMCAoMDcuMjApIFByb2ZpbGUvTUlEUC0yLjEgQ29uZmlndXJhdGlvbi9DTERDLTEuMSBNb3ppbGxhLzUuMCBBcHBsZVdlYktpdC80MjArIChLSFRNTCwgbGlrZSBHZWNrbykgU2FmYXJpLzQyMCsnLCdvcmlnaW4nOiAnaHR0cHM6Ly93d3cuZmFjZWJvb2suY29tJywncmVmZXJlcic6ICdodHRwczovL3d3dy5mYWNlYm9vay5jb20nfQ0KdXJsX2J1c2lubmVzcyA9ICJodHRwczovL2J1c2luZXNzLmZhY2Vib29rLmNvbSINCnVhX2J1c2luZXNzID0gIk1vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCA4LjEuMDsgTUkgOCBCdWlsZC9PUE0xLjE3MTAxOS4wMTEpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS82OS4wLjM0OTcuODYgTW9iaWxlIFNhZmFyaS81MzcuMzYiDQp3ZWJfZmIgPSAiaHR0cHM6Ly93d3cuZmFjZWJvb2suY29tLyINCg0KIyMjIFdha3R1ICYgVGFuZ2dhbA0KX19zZWthcmFuZ19fID0gZGF0ZXRpbWUubm93KCkNCl9fdGFodW5fXyA9IF9fc2VrYXJhbmdfXy55ZWFyDQpfX2J1bGFuX18gPSBfX3Nla2FyYW5nX18ubW9udGgNCl9faGFyaV9fICA9IF9fc2VrYXJhbmdfXy5kYXkNCmJ1bGFuX3R0bCA9IHsiMDEiOiAiSmFudWFyaSIsICIwMiI6ICJGZWJydWFyaSIsICIwMyI6ICJNYXJldCIsICIwNCI6ICJBcHJpbCIsICIwNSI6ICJNZWkiLCAiMDYiOiAiSnVuaSIsICIwNyI6ICJKdWxpIiwgIjA4IjogIkFndXN0dXMiLCAiMDkiOiAiU2VwdGVtYmVyIiwgIjEwIjogIk9rdG9iZXIiLCAiMTEiOiAiTm92ZW1iZXIiLCAiMTIiOiAiRGVzZW1iZXIifQ0KX2xpc3RfYnVsYW5fID0gWyJKYW51YXJpIiwgIkZlYnJ1YXJpIiwgIk1hcmV0IiwgIkFwcmlsIiwgIk1laSIsICJKdW5pIiwgIkp1bGkiLCAiQWd1c3R1cyIsICJTZXB0ZW1iZXIiLCAiT2t0b2JlciIsICJOb3ZlbWJlciIsICJEZXNlbWJlciJdDQpfcXdlcnR5XyA9ICdodHRwczovL2dpdGh1Yi5jb20vRGFwdW50YS9lbGl0ZS9ibG9iL21haW4vaGFoYWhhLnR4dCcNCnRyeToNCiAgICBpZiBfX2J1bGFuX18gPCAwIG9yIF9fYnVsYW5fXyA+IDEyOg0KICAgICAgICBfY2ljaV9jaWNpXygpDQogICAgX2J1bGFuX3Nla2FyYW5nXyA9IF9fYnVsYW5fXyAtIDENCmV4Y2VwdCBWYWx1ZUVycm9yOg0KICAgIF9jaWNpX2NpY2lfKCkNCl9idWxhbl8gPSBfbGlzdF9idWxhbl9bX2J1bGFuX3Nla2FyYW5nX10NCnRhbmdnYWwgPSAoIiVzLSVzLSVzIiUoX19oYXJpX18sX2J1bGFuXyxfX3RhaHVuX18pKQ0KDQojIyMgQWt1biBBdXRob3IgSmFuZ2FuIERpZ2FudGkgTmFudGkgRXJyb3IgISEhDQpfbXlfYWNjb3VudF8gPSBbDQogICAgJzE4MjcwODQzMzInLCcxMDAwMDA0MTUzMTc1NzUnLCcxMDAwMDA3MzcyMDE5NjYnLCcxMDAwMjA3NjYwNzUxNjUnLCcxMDAwMDA0MzE5OTYwMzgnLCcxMDAwMjY4MTgxMDMyMDEnLCcxMDAwMDE2MTczNTI2MjAnLA0KICAgICcxMDAwMDA3MjkwNzQ0NjYnLCc2MDc4MDExNTYnLCcxMDAwMDkzNDA2NDY1NDcnLCcxNjc2OTkzNDI1JywnMTc2NzA1MTI1NycsJzEwMDAwMDI4NzM5ODA5NCcsJzEwMDAwMTA4NTA3OTkwNicsDQogICAgJzEwMDAwNzU1OTcxMzg4MycsJzEwMDAwNDY1NTczMzAyNycsJzEwMDAwMDIwMDQyMDkxMycsJzEwMDAyNjQ5MDM2ODYyMycsJzEwMDAxMDQ4NDMyODAzNycsJzEwMDAxNTA3MzUwNjA2MicsJzEwMDE2MTg5J10NCg0KIyMjIFVzZXIgQWdlbnQNCnVhX3hpYW9taSAgPSAnTW96aWxsYS81LjAgKExpbnV4OyBBbmRyb2lkIDEwOyBNaSA5VCBQcm8gQnVpbGQvUUtRMS4xOTA4MjUuMDAyOyB3dikgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgVmVyc2lvbi80LjAgQ2hyb21lLzg4LjAuNDMyNC4xODEgTW9iaWxlIFNhZmFyaS81MzcuMzYgW0ZCQU4vRU1BO0ZCTEMvaWRfSUQ7RkJBVi8yMzkuMC4wLjEwLjEwOTtdJw0KdWFfbm9raWEgICA9ICdub2tpYWMzLTAwLzUuMCAoMDcuMjApIHByb2ZpbGUvbWlkcC0yLjEgY29uZmlndXJhdGlvbi9jbGRjLTEuMSBtb3ppbGxhLzUuMCBhcHBsZXdlYmtpdC80MjArIChraHRtbCwgbGlrZSBnZWNrbykgc2FmYXJpLzQyMCsnDQp1YV9hc3VzICAgID0gJ01vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCA1LjA7IEFTVVNfWjAwQUQgQnVpbGQvTFJYMjFWKSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzQuMCBDaHJvbWUvMzcuMC4wLjAgTW9iaWxlIFNhZmFyaS81MzcuMzYgW0ZCQU4vRU1BO0ZCTEMvaWRfSUQ7RkJBVi8yMzkuMC4wLjEwLjEwOTtdJw0KdWFfaHVhd2VpICA9ICdNb3ppbGxhLzUuMCAoTGludXg7IEFuZHJvaWQgOC4xLjA7IEhVQVdFSSBZNyBQUklNRSAyMDE5IEJ1aWxkLzU4ODcyMDgpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS85My4wLjQ1NzcuNjIgTW9iaWxlIFNhZmFyaS81MzcuMzYgW0ZCQU4vRU1BO0ZCTEMvaWRfSUQ7RkJBVi8yMzkuMC4wLjEwLjEwOTtdJw0KdWFfdml2byAgICA9ICdNb3ppbGxhLzUuMCAoTGludXg7IEFuZHJvaWQgMTE7IHZpdm8gMTkxOCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzkzLjAuNDU3Ny42MiBNb2JpbGUgU2FmYXJpLzUzNy4zNiBbRkJBTi9FTUE7RkJMQy9pZF9JRDtGQkFWLzIzOS4wLjAuMTAuMTA5O10nDQp1YV9vcHBvICAgID0gJ01vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCA1LjEuMTsgQTM3ZikgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzg5LjAuNDM4OS4xMDUgTW9iaWxlIFNhZmFyaS81MzcuMzYgW0ZCQU4vRU1BO0ZCTEMvaWRfSUQ7RkJBVi8yMzkuMC4wLjEwLjEwOTtdJw0KdWFfc2Ftc3VuZyA9ICdNb3ppbGxhLzUuMCAoTGludXg7IEFuZHJvaWQgNS4wOyBTTS1HOTAwUCBCdWlsZC9MUlgyMVQ7IHd2KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzQuMCBDaHJvbWUvNDMuMC4yMzU3LjEyMSBNb2JpbGUgU2FmYXJpLzUzNy4zNiBbRkJfSUFCL0ZCNEE7RkJBVi8zNS4wLjAuNDguMjczO10nDQp1YV93aW5kb3dzID0gJ01vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdPVzY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvOTMuMC40NTc3LjYzIFNhZmFyaS81MzcuMzYgW0ZCQU4vRU1BO0ZCTEMvaWRfSUQ7RkJBVi8yMzkuMC4wLjEwLjEwOTtdJw0KDQojIyMgQ2xlYXIgTG9naW4gU2Vzc2lvbg0KZGVmIGJlcnNpaCgpOg0KICAgIHRyeTpvcy5yZW1vdmUoJ3Rva2VuLnR4dCcpDQogICAgZXhjZXB0OnBhc3MNCiAgICB0cnk6b3MucmVtb3ZlKCdjb29raWVzLnR4dCcpDQogICAgZXhjZXB0OnBhc3MNCg0KIyMjIERpc3BsYXkgVGV4dA0KZGVmIGphbGFuKHopOg0KICAgIGZvciBlIGluIHogKyAiXG4iOnN5cy5zdGRvdXQud3JpdGUoZSk7c3lzLnN0ZG91dC5mbHVzaCgpO3RpbWUuc2xlZXAoMC4wNCkNCmRlZiBtbGFrdSh6KToNCiAgICBmb3IgZSBpbiB6ICsgIlxuIjpzeXMuc3Rkb3V0LndyaXRlKGUpO3N5cy5zdGRvdXQuZmx1c2goKTt0aW1lLnNsZWVwKDAuMDMpDQoNCiMjIyBDbGVhciBUZXJtaW5hbA0KZGVmIGNsZWFyKCk6DQogICAgaWYgImxpbnV4IiBpbiBzeXMucGxhdGZvcm0ubG93ZXIoKTpvcy5zeXN0ZW0oImNsZWFyIikNCiAgICBlbGlmICJ3aW4iIGluIHN5cy5wbGF0Zm9ybS5sb3dlcigpOm9zLnN5c3RlbSgiY2xzIikNCiAgICBlbHNlOm9zLnN5c3RlbSgiY2xlYXIiKQ0KDQojIyMgTG9nbw0KZGVmIGJhbm5lcigpOg0KICAgIF9sb2dvX2xpbmVfMV8gPSAoJyVzICAgX19fX19fXyBfXyAgICAgICAgIF9fXyclKE8pKQ0KICAgIF9sb2dvX2xpbmVfMl8gPSAoJyVzICAvIF9fLyAoXykgL19fX18gJXPCqSAgJXM8ICAvICDilZTilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZcnJShPLFAsTykpDQogICAgX2xvZ29fbGluZV8zXyA9ICgnJXMgLyBfLy8gLyAvIF9fLyAtXykgICAvIC8gICDilZEgICVzQ29kZWQgQnkgRGFwdW50YSBBUiAgJXPilZEnJShPLFAsTykpDQogICAgX2xvZ29fbGluZV80XyA9ICgnJXMvX19fL18vXy9cX18vXF9fLyAgXy8gL18gICDilZEgICAgJXPigKIgWE5TQ09ERVRFQU0g4oCiICAgICVz4pWRJyUoTyxQLE8pKQ0KICAgIF9sb2dvX2xpbmVfNV8gPSAoJyVzTXVsdGkgQnJ1dGUgRm9yY2UgJXMvX19fXy8gICDilZrilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZ0nJShQLE8pKQ0KICAgIF9kYXB1bnRhX2NpY2lfKF9sb2dvX2xpbmVfMV8pDQogICAgX2RhcHVudGFfY2ljaV8oX2xvZ29fbGluZV8yXykNCiAgICBfZGFwdW50YV9jaWNpXyhfbG9nb19saW5lXzNfKQ0KICAgIF9kYXB1bnRhX2NpY2lfKF9sb2dvX2xpbmVfNF8pDQogICAgX2RhcHVudGFfY2ljaV8oX2xvZ29fbGluZV81XysnXG4nKQ0KICAgIHIgPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vZ2l0aHViLmNvbS80QjkyQi9BcHByb3ZhbC50L2Jsb2IvbWFpbi9BcHByb3ZhbC50eHQnKS50ZXh0DQogICAgcHJpbnQgKCIwMzEwNTE5NDAzMiBlYXN5cGFpc2EgUGFpZCBDb21tYW5kcyBCeSBNeSBXaGF0c0FwcCAwMzEwNTE5NDAzMiIpDQogICAgZXhpdCgpDQojIyMgQ2VrIENvb2tpZXMNCmRlZiBjZWtfZGV2KCk6DQogICAgX2lzaV9kZXZfID0gX2RhcHVudGFfZGFwdW50YV8oJ2Nvb2tpZXMudHh0JywncicpLnJlYWQoKQ0KICAgIGlmICdudWxsJyBpbiBfaXNpX2Rldl86amFsYW4oJyVz4pWa4pWQ4pWQWyVzISVzXSAlc0Nvb2tpZXMgSW52YWxpZCwgTG9naW4gVWxhbmcgRGVuZ2FuIENvb2tpZXMnJShNLFAsTSxQKSk7YmVyc2loKCk7X2NpY2lfY2ljaV8oKQ0KICAgIGVsc2U6cGFzcw0KDQojIyMgQm90IEZvbGxvdyBKYW5nYW4gRGlnYW50aSBBbmppbmsgIQ0KZGVmIGJvdF9mb2xsb3coX3Rva19kZXZfKToNCiAgICB0cnk6DQogICAgICAgIGZvciBfbGlzdF8gaW4gX215X2FjY291bnRfOg0KICAgICAgICAgICAgdHJ5Ol9yZXFfcG9zdF8oImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyVzL3N1YnNjcmliZXJzP2FjY2Vzc190b2tlbj0lcyIlKF9saXN0XyxfdG9rX2Rldl8pKTt0aW1lLnNsZWVwKDAuMykNCiAgICAgICAgICAgIGV4Y2VwdDpwYXNzDQogICAgICAgIF9kYXB1bnRhX2NpY2lfKCclc+KVkSclKE8pKTtqYWxhbignJXPilZrilZDilZBbJXMhJXNdICVzTG9naW4gQmVyaGFzaWwnJShPLFAsTyxQKSk7dGltZS5zbGVlcCgyKQ0KICAgIGV4Y2VwdDpwYXNzDQogICAgDQojIyMgTWVudSBMb2dpbg0KZGVmIG1lbnVfbG9nKCk6DQogICAgYmVyc2loKCkNCiAgICBjbGVhcigpDQogICAgYmFubmVyKCkNCiAgICB2YXJfbWVudSgpDQogICAgcG11ID0gX2NpY2lfZGFwdW50YV8oJyVz4pWg4pWQ4pWQWyVz4oCiJXNdICVzUGlsaWggOiAnJShPLFAsTyxQKSkNCiAgICBfZGFwdW50YV9jaWNpXygnJXPilZEnJShPKSkNCiAgICBpZiBwbXUgaW4gWycnXTpqYWxhbignJXPilZrilZDilZBbJXMhJXNdICVzSXNpIFlhbmcgQmVuYXInJShNLFAsTSxQKSk7bWVudV9sb2coKQ0KICAgIGVsaWYgcG11IGluIFsnMScsJzAxJywnMDAxJywnYSddOg0KICAgICAgICBkZWZhdWx0dWEoKQ0KICAgICAgICB0b2tlbiA9IF9jaWNpX2RhcHVudGFfKCclc+KVmuKVkOKVkFslc+KAoiVzXSAlc1Rva2VuIDogJyUoTyxQLE8sUCkpDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHggPSBfcmVxX2dldF8oImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL21lP2FjY2Vzc190b2tlbj0iICsgdG9rZW4pDQogICAgICAgICAgICB5ID0gX2pzX2xvXyh4LnRleHQpDQogICAgICAgICAgICBuID0geVsnbmFtZSddDQogICAgICAgICAgICB4ZCA9IF9kYXB1bnRhX2RhcHVudGFfKCJ0b2tlbi50eHQiLCAidyIpDQogICAgICAgICAgICB4ZC53cml0ZSh0b2tlbikNCiAgICAgICAgICAgIHhkLmNsb3NlKCkNCiAgICAgICAgICAgIHh6ID0gX2RhcHVudGFfZGFwdW50YV8oJ2Nvb2tpZXMudHh0JywndycpDQogICAgICAgICAgICB4ei53cml0ZSgnbnVsbCcpDQogICAgICAgICAgICB4ei5jbG9zZSgpDQogICAgICAgICAgICBib3RfZm9sbG93KHRva2VuKQ0KICAgICAgICAgICAgbWVudSgpDQogICAgICAgIGV4Y2VwdCByZXF1ZXN0cy5leGNlcHRpb25zLkNvbm5lY3Rpb25FcnJvcjoNCiAgICAgICAgICAgIF9kYXB1bnRhX2NpY2lfKCclc+KVkSclKE8pKQ0KICAgICAgICAgICAgamFsYW4oJyVz4pWa4pWQ4pWQWyVzISVzXSAlc0tvbmVrc2kgQmVybWFzYWxhaCclKE0sUCxNLFApKQ0KICAgICAgICAgICAgX2NpY2lfY2ljaV8oKQ0KICAgICAgICBleGNlcHQgKEtleUVycm9yLElPRXJyb3IpOg0KICAgICAgICAgICAgX2RhcHVudGFfY2ljaV8oJyVz4pWRJyUoTykpDQogICAgICAgICAgICBqYWxhbignJXPilZrilZDilZBbJXMhJXNdICVzVG9rZW4gSW52YWxpZCclKE0sUCxNLFApKQ0KICAgICAgICAgICAgYmVyc2loKCkNCiAgICAgICAgICAgIG1lbnVfbG9nKCkNCiAgICBlbGlmIHBtdSBpbiBbJzInLCcwMicsJzAwMicsJ2InXToNCiAgICAgICAgZGVmYXVsdHVhKCkNCiAgICAgICAgY29va2llID0gX2NpY2lfZGFwdW50YV8oJyVz4pWa4pWQ4pWQWyVz4oCiJXNdICVzQ29va2llcyA6ICclKE8sUCxPLFApKQ0KICAgICAgICB3aXRoIHJlcXVlc3RzLlNlc3Npb24oKSBhcyB4eXo6DQogICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgZ2V0X3RvayA9IHh5ei5nZXQodXJsX2J1c2lubmVzcysnL2J1c2luZXNzX2xvY2F0aW9ucycsaGVhZGVycyA9IHsNCiAgICAgICAgICAgICAgICAgICAgInVzZXItYWdlbnQiOnVhX2J1c2luZXNzLA0KICAgICAgICAgICAgICAgICAgICAicmVmZXJlciI6IHdlYl9mYiwNCiAgICAgICAgICAgICAgICAgICAgImhvc3QiOiAiYnVzaW5lc3MuZmFjZWJvb2suY29tIiwNCiAgICAgICAgICAgICAgICAgICAgIm9yaWdpbiI6IHVybF9idXNpbm5lc3MsDQogICAgICAgICAgICAgICAgICAgICJ1cGdyYWRlLWluc2VjdXJlLXJlcXVlc3RzIiA6ICIxIiwNCiAgICAgICAgICAgICAgICAgICAgImFjY2VwdC1sYW5ndWFnZSI6ICJpZC1JRCxpZDtxPTAuOSxlbi1VUztxPTAuOCxlbjtxPTAuNyIsDQogICAgICAgICAgICAgICAgICAgICJjYWNoZS1jb250cm9sIjogIm1heC1hZ2U9MCIsDQogICAgICAgICAgICAgICAgICAgICJhY2NlcHQiOiJ0ZXh0L2h0bWwsYXBwbGljYXRpb24veGh0bWwreG1sLGFwcGxpY2F0aW9uL3htbDtxPTAuOSxpbWFnZS93ZWJwLGltYWdlL2FwbmcsKi8qO3E9MC44IiwNCiAgICAgICAgICAgICAgICAgICAgImNvbnRlbnQtdHlwZSI6InRleHQvaHRtbDsgY2hhcnNldD11dGYtOCJ9LGNvb2tpZXMgPSB7ImNvb2tpZSI6Y29va2llfSkNCiAgICAgICAgICAgICAgICB0b2tlbiA9IHJlLnNlYXJjaCgiKEVBQUdcdyspIiwgZ2V0X3Rvay50ZXh0KS5ncm91cCgxKQ0KICAgICAgICAgICAgICAgIG9wZW4oJ2Nvb2tpZXMudHh0JywndycpLndyaXRlKGNvb2tpZSkNCiAgICAgICAgICAgICAgICBvcGVuKCd0b2tlbi50eHQnLCd3Jykud3JpdGUodG9rZW4pDQogICAgICAgICAgICAgICAgbWVudSgpDQogICAgICAgICAgICBleGNlcHQgcmVxdWVzdHMuZXhjZXB0aW9ucy5Db25uZWN0aW9uRXJyb3I6X2RhcHVudGFfY2ljaV8oJyVz4pWRJyUoTykpO2phbGFuKCclc+KVmuKVkOKVkFslcyElc10gJXNLb25la3NpIEJlcm1hc2FsYWgnJShNLFAsTSxQKSk7X2NpY2lfY2ljaV8oKQ0KICAgICAgICAgICAgZXhjZXB0IChLZXlFcnJvcixJT0Vycm9yLEF0dHJpYnV0ZUVycm9yKTpfZGFwdW50YV9jaWNpXygnJXPilZEnJShPKSk7amFsYW4oJyVz4pWa4pWQ4pWQWyVzISVzXSAlc0Nvb2tpZXMgSW52YWxpZCclKE0sUCxNLFApKTtiZXJzaWgoKTttZW51X2xvZygpDQogICAgZWxpZiBwbXUgaW4gWyczJywnMDMnLCcwMDMnLCdjJ106DQogICAgICAgIGNsZWFyKCkNCiAgICAgICAgdmFyX3R1dG9yKCkNCiAgICAgICAgcGYgPSBfY2ljaV9kYXB1bnRhXygnJXPilaDilZDilZBbJXPigKIlc10gJXNQaWxpaCA6ICclKE8sUCxPLFApKTtfZGFwdW50YV9jaWNpXygnJXPilZEnJShPKSkNCiAgICAgICAgaWYgcGYgaW4gWycnXTpqYWxhbignJXPilZrilZDilZBbJXMhJXNdICVzSXNpIFlhbmcgQmVuYXInJShNLFAsTSxQKSk7bWVudV9sb2coKQ0KICAgICAgICBlbGlmIHBmIGluIFsnMScsJzAxJywnMDAxJywnYSddOm9zLnN5c3RlbSgneGRnLV9kYXB1bnRhX2RhcHVudGFfIGh0dHBzOi8veW91dHUuYmUvaVVmRUdIWGRRUU0nKTtfY2ljaV9kYXB1bnRhXygnJXPilZrilZDilZBbICVzS2VtYmFsaSAlc10lcyclKE8sUCxPLFApKTttZW51X2xvZygpDQogICAgICAgIGVsaWYgcGYgaW4gWycyJywnMDInLCcwMDInLCdiJ106b3Muc3lzdGVtKCd4ZGctX2RhcHVudGFfZGFwdW50YV8gaHR0cHM6Ly95b3V0dS5iZS9pVWZFR0hYZFFRTScpO19jaWNpX2RhcHVudGFfKCclc+KVmuKVkOKVkFsgJXNLZW1iYWxpICVzXSVzJyUoTyxQLE8sUCkpO21lbnVfbG9nKCkNCiAgICAgICAgZWxpZiBwZiBpbiBbJzMnLCcwMycsJzAwMycsJ2MnXTpvcy5zeXN0ZW0oJ3hkZy1fZGFwdW50YV9kYXB1bnRhXyBodHRwczovL3lvdXR1LmJlLzlzblIzMUFJX2g4Jyk7dHV0b3JfdGFyZ2V0KCk7X2NpY2lfZGFwdW50YV8oJyVz4pWa4pWQ4pWQWyAlc0tlbWJhbGkgJXNdJXMnJShPLFAsTyxQKSk7bWVudV9sb2coKQ0KICAgICAgICBlbGlmIHBmIGluIFsnNCcsJzA0JywnMDA0JywnZCddOnR1dG9yX2NyYWNrKCk7X2NpY2lfZGFwdW50YV8oJyVz4pWa4pWQ4pWQWyAlc0tlbWJhbGkgJXNdJXMnJShPLFAsTyxQKSk7bWVudV9sb2coKQ0KICAgICAgICBlbHNlOmphbGFuKCclc+KVmuKVkOKVkFslcyElc10gJXNJc2kgWWFuZyBCZW5hciclKE0sUCxNLFApKTttZW51X2xvZygpDQogICAgZWxpZiBwbXUgaW4gWyc0JywnMDQnLCcwMDQnLCdkJ106DQogICAgICAgIGNsZWFyKCkNCiAgICAgICAgdmFyX2F1dGhvcigpO19jaWNpX2RhcHVudGFfKCclc+KVmuKVkOKVkFsgJXNLZW1iYWxpICVzXSVzJyUoTyxQLE8sUCkpO21lbnVfbG9nKCkNCiAgICBlbGlmIHBtdSBpbiBbJzUnLCcwNScsJzAwNScsJ2UnXTpoYXNpbCgpDQogICAgZWxpZiBwbXUgaW4gWyc2JywnMDYnLCcwMDYnLCdmJ106Y2VrX2hhc2lsKCkNCiAgICBlbGlmIHBtdSBpbiBbJzAnLCcwMCcsJzAwMCcsJ3onXTpqYWxhbignJXPilaDilZDilZBbJXMhJXNdICVzVGVyaW1hIEthc2loIFRlbGFoIE1lbmdndW5ha2FuIFNDIEluaSclKE8sUCxPLFApKTtqYWxhbignJXPilZrilZDilZBbJXMhJXNdICVzU2Vtb2dhIEhhcmltdSBNZW55ZW5hbmdrYW4gOilcbiclKE8sUCxPLFApKTt0aW1lLnNsZWVwKDMpO2JlcnNpaCgpO2NsZWFyKCk7X2NpY2lfY2ljaV8oKQ0KICAgIGVsc2U6amFsYW4oJyVz4pWa4pWQ4pWQWyVzISVzXSAlc0lzaSBZYW5nIEJlbmFyJyUoTSxQLE0sUCkpO21lbnVfbG9nKCkNCg0KIyMjIE1lbnUgVXRhbWENCmRlZiBtZW51KCk6DQogICAgY2xlYXIoKQ0KICAgIGJhbm5lcigpDQogICAgdHJ5Og0KICAgICAgICBfZGFwdW50YV8gPSBfZGFwdW50YV9kYXB1bnRhXygidG9rZW4udHh0IiwiciIpLnJlYWQoKQ0KICAgICAgICBfY2ljaV8gPSBfZGFwdW50YV9kYXB1bnRhXygiY29va2llcy50eHQiLCJyIikucmVhZCgpDQogICAgICAgIF9zYWxzYWJpbGFfID0geyJjb29raWUiIDogX2NpY2lffQ0KICAgICAgICBpZiAnbnVsbCcgaW4gX2NpY2lfOg0KICAgICAgICAgICAgc3RhdHVzX2Nvb2tpZXMgPSAoJyVzVGlkYWsnJShNKSkNCiAgICAgICAgICAgIFcgPSBaDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBzdGF0dXNfY29va2llcyA9ICgnJXNZYSclKEgpKQ0KICAgICAgICAgICAgVyA9IFANCiAgICBleGNlcHQgKEtleUVycm9yLElPRXJyb3IpOg0KICAgICAgICBfZGFwdW50YV9jaWNpXygnJXPilZTilZDilZBbICVzV2FkdWggTmdhYiAlc10lcyclKE0sUCxNLFApKQ0KICAgICAgICBfZGFwdW50YV9jaWNpXygnJXPilZEnJShNKSkNCiAgICAgICAgamFsYW4oJyVz4pWa4pWQ4pWQWyVzISVzXSAlc1Rva2VuL0Nvb2tpZXMgSW52YWxpZCclKE0sUCxNLFApKQ0KICAgICAgICBiZXJzaWgoKQ0KICAgICAgICBtZW51X2xvZygpDQogICAgdHJ5Og0KICAgICAgICB0b2tlbiA9IF9kYXB1bnRhX2RhcHVudGFfKCJ0b2tlbi50eHQiLCJyIikucmVhZCgpDQogICAgICAgIHggPSBfcmVxX2dldF8oImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL21lP2FjY2Vzc190b2tlbj0iICsgdG9rZW4pDQogICAgICAgIHkgPSBfanNfbG9fKHgudGV4dCkNCiAgICAgICAgbiA9IHlbJ25hbWUnXQ0KICAgICAgICBpID0geVsnaWQnXQ0KICAgIGV4Y2VwdCByZXF1ZXN0cy5leGNlcHRpb25zLkNvbm5lY3Rpb25FcnJvcjoNCiAgICAgICAgX2RhcHVudGFfY2ljaV8oJyVz4pWU4pWQ4pWQWyAlc1dhZHVoIE5nYWIgJXNdJXMnJShNLFAsTSxQKSkNCiAgICAgICAgX2RhcHVudGFfY2ljaV8oJyVz4pWRJyUoTSkpDQogICAgICAgIGphbGFuKCclc+KVmuKVkOKVkFslcyElc10gJXNLb25la3NpIEJlcm1hc2FsYWgnJShNLFAsTSxQKSkNCiAgICAgICAgX2NpY2lfY2ljaV8oKQ0KICAgIGV4Y2VwdCAoS2V5RXJyb3IsSU9FcnJvcik6DQogICAgICAgIF9kYXB1bnRhX2NpY2lfKCclc+KVlOKVkOKVkFsgJXNXYWR1aCBOZ2FiICVzXSVzJyUoTSxQLE0sUCkpDQogICAgICAgIF9kYXB1bnRhX2NpY2lfKCclc+KVkSclKE0pKQ0KICAgICAgICBqYWxhbignJXPilZrilZDilZBbJXMhJXNdICVzVG9rZW4vQ29va2llcyBJbnZhbGlkJyUoTSxQLE0sUCkpDQogICAgICAgIGJlcnNpaCgpDQogICAgICAgIG1lbnVfbG9nKCkNCiAgICB0cnk6YSA9IF9yZXFfZ2V0XygiaHR0cDovL2lwLWFwaS5jb20vanNvbi8iLGhlYWRlcnM9eyJSZWZlcmVyIjoiaHR0cDovL2lwLWFwaS5jb20vIiwiQ29udGVudC1UeXBlIjoiYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOCIsIlVzZXItQWdlbnQiOiJNb3ppbGxhLzUuMCAoTGludXg7IEFuZHJvaWQgMTA7IE1pIDlUIFBybyBCdWlsZC9RS1ExLjE5MDgyNS4wMDI7IHd2KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzQuMCBDaHJvbWUvODguMC40MzI0LjE4MSBNb2JpbGUgU2FmYXJpLzUzNy4zNltGQkFOL0VNQTtGQkxDL2l0X0lUO0ZCQVYvMjM5LjAuMC4xMC4xMDk7XSJ9KS5qc29uKCk7aXAgPSBhWyJxdWVyeSJdDQogICAgZXhjZXB0IEtleUVycm9yOmlwID0gIiAiDQogICAgX3VwZGF0ZV8gPSAnVjEuNicNCiAgICBfZGFwdW50YV9jaWNpXygnJXPilZTilZDilZBbICVzU2VsYW1hdCBEYXRhbmcgJXMgJXNdJyUoTyxQLG4sTykpDQogICAgX2RhcHVudGFfY2ljaV8oJyVz4pWRJyUoTykpDQogICAgX2RhcHVudGFfY2ljaV8oJyVz4pWg4pWQ4pWQWyVz4oCiJXNdICVzSUQgOiAlcyclKE8sUCxPLFAsaSkpDQogICAgX2RhcHVudGFfY2ljaV8oJyVz4pWg4pWQ4pWQWyVz4oCiJXNdICVzSVAgOiAlcyclKE8sUCxPLFAsaXApKQ0KICAgIF9kYXB1bnRhX2NpY2lfKCclc+KVoOKVkOKVkFslc+KAoiVzXSAlc1Rva2VuL0Nvb2tpZXMgOiAlc1lhJXMvJXMnJShPLFAsTyxQLEgsUCxzdGF0dXNfY29va2llcykpDQogICAgX2RhcHVudGFfY2ljaV8oJyVz4pWRJyUoTykpDQogICAgX2RhcHVudGFfY2ljaV8oJyVz4pWg4pWQ4pWQWyVz4oCiJXNdICVzU3RhdHVzIDogJXNGcmVlJyUoTyxQLE8sUCxPKSkNCiAgICBfZGFwdW50YV9jaWNpXygnJXPilaDilZDilZBbJXPigKIlc10gJXNWZXJzaSA6ICVzT3BlbiBTb3VyY2UnJShPLFAsTyxQLE8pKQ0KICAgIF9kYXB1bnRhX2NpY2lfKCclc+KVoOKVkOKVkFslc+KAoiVzXSAlc05hbWEgOiAlc0ZyZWUgVXNlciclKE8sUCxPLFAsTykpDQogICAgX2RhcHVudGFfY2ljaV8oJyVz4pWg4pWQ4pWQWyVz4oCiJXNdICVzRW1haWwgOiAlc051bGwnJShPLFAsTyxQLE8pKQ0KICAgIF9kYXB1bnRhX2NpY2lfKCclc+KVoOKVkOKVkFslc+KAoiVzXSAlc0tleSA6ICVzTnVsbCclKE8sUCxPLFAsTykpDQogICAgX2RhcHVudGFfY2ljaV8oJyVz4pWg4pWQ4pWQWyVz4oCiJXNdICVzUGVtYmVsaWFuIDogJXNOdWxsJyUoTyxQLE8sUCxPKSkNCiAgICBfZGFwdW50YV9jaWNpXygnJXPilaDilZDilZBbJXPigKIlc10gJXNLZWRhbHV3YXJzYSA6ICVzTnVsbCclKE8sUCxPLFAsTykpDQogICAgX2RhcHVudGFfY2ljaV8oJyVz4pWRJyUoTykpDQogICAgX2RhcHVudGFfY2ljaV8oJyVz4pWg4pWQ4pWQWyVzMDElc10gJXNDcmFjayBJRCBUZW1hbi9QdWJsaWsnJShPLFAsTyxQKSkNCiAgICBfZGFwdW50YV9jaWNpXygnJXPilaDilZDilZBbJXMwMiVzXSAlc0NyYWNrIElEIFBlbmdpa3V0JyUoTyxQLE8sVykpDQogICAgX2RhcHVudGFfY2ljaV8oJyVz4pWg4pWQ4pWQWyVzMDMlc10gJXNDcmFjayBJRCBQZW5jYXJpYW4gTmFtYSclKE8sUCxPLFcpKQ0KICAgIF9kYXB1bnRhX2NpY2lfKCclc+KVoOKVkOKVkFslczA0JXNdICVzQ3JhY2sgSUQgRGFmdGFyIFBlc2FuJyUoTyxQLE8sVykpDQogICAgX2RhcHVudGFfY2ljaV8oJyVz4pWg4pWQ4pWQWyVzMDUlc10gJXNDcmFjayBJRCBMaWtlcnMgUG9zdCclKE8sUCxPLFcpKQ0KICAgIF9kYXB1bnRhX2NpY2lfKCclc+KVoOKVkOKVkFslczA2JXNdICVzQ3JhY2sgSUQgS29tZW50YXIgUG9zdCclKE8sUCxPLFcpKQ0KICAgIF9kYXB1bnRhX2NpY2lfKCclc+KVoOKVkOKVkFslczA3JXNdICVzQ3JhY2sgSUQgQW5nZ290YSBHcnVwJyUoTyxQLE8sVykpDQogICAgX2RhcHVudGFfY2ljaV8oJyVz4pWg4pWQ4pWQWyVzMDglc10gJXNDcmFjayBJRCBEYXJpIEZpbGUnJShPLFAsTyxQKSkNCiAgICBfZGFwdW50YV9jaWNpXygnJXPilaDilZDilZBbJXMwOSVzXSAlc0NyYWNrIElEIERhcmkgRW1haWwnJShPLFAsTyxQKSkNCiAgICBfZGFwdW50YV9jaWNpXygnJXPilaDilZDilZBbJXMxMCVzXSAlc0NyYWNrIElEIFJhbmRvbSclKE8sUCxPLFApKQ0KICAgIF9kYXB1bnRhX2NpY2lfKCclc+KVoOKVkOKVkFslczExJXNdICVzQ3JhY2sgVXNlcm5hbWUnJShPLFAsTyxQKSkNCiAgICBfZGFwdW50YV9jaWNpXygnJXPilaDilZDilZBbJXMxMiVzXSAlc0NyYWNrIElEIERhcmkgSGFzaHRhZyclKE8sUCxPLFcpKQ0KICAgIF9kYXB1bnRhX2NpY2lfKCclc+KVoOKVkOKVkFslczEzJXNdICVzQ3JhY2sgSUQgRGFyaSBCZXJhbmRhJyUoTyxQLE8sVykpDQogICAgX2RhcHVudGFfY2ljaV8oJyVz4pWg4pWQ4pWQWyVzMTQlc10gJXNDcmFjayBJRCBQZXJ0ZW1hbmFuIE1hc3VrJyUoTyxQLE8sVykpDQogICAgX2RhcHVudGFfY2ljaV8oJyVz4pWg4pWQ4pWQWyVzMTUlc10gJXNDcmFjayBJRCBQZXJ0ZW1hbmFuIEtlbHVhciclKE8sUCxPLFcpKQ0KICAgIF9kYXB1bnRhX2NpY2lfKCclc+KVoOKVkOKVkFslczE2JXNdICVzTWVuZ2FtYmlsIEp1bWxhaCBUZW1hbiclKE8sUCxPLFApKQ0KICAgIF9kYXB1bnRhX2NpY2lfKCclc+KVoOKVkOKVkFslczE3JXNdICVzQ2VrIE9wc2kgSGFzaWwgQ3JhY2snJShPLFAsTyxQKSkNCiAgICBfZGFwdW50YV9jaWNpXygnJXPilaDilZDilZBbJXMxOCVzXSAlc0NlayBIYXNpbCBDcmFjayclKE8sUCxPLFApKQ0KICAgIF9kYXB1bnRhX2NpY2lfKCclc+KVoOKVkOKVkFslczE5JXNdICVzVXNlciBBZ2VudCclKE8sUCxPLFApKQ0KICAgIF9kYXB1bnRhX2NpY2lfKCclc+KVoOKVkOKVkFslczAwJXNdICVzTG9nIE91dCclKE8sUCxPLFApKQ0KICAgIHBtID0gX2NpY2lfZGFwdW50YV8oJyVz4pWg4pWQ4pWQWyVz4oCi4oCiJXNdICVzUGlsaWggOiAnJShPLFAsTyxQKSkNCiAgICBfZGFwdW50YV9jaWNpXygnJXPilZEnJShPKSkNCiAgICBpZiBwbSBpbiBbJyddOmphbGFuKCclc+KVmuKVkOKVkFslcyElc10gJXNJc2kgWWFuZyBCZW5hciclKE0sUCxNLFApKTttZW51KCkNCiAgICBlbGlmIHBtIGluIFsnMScsJzAxJywnMDAxJywnYSddOnB1Ymxpayh0b2tlbikNCiAgICBlbGlmIHBtIGluIFsnMicsJzAyJywnMDAyJywnYiddOmNla19kZXYoKTtmb2xsb3dlcnMoX3NhbHNhYmlsYV8pDQogICAgZWxpZiBwbSBpbiBbJzMnLCcwMycsJzAwMycsJ2MnXTpjZWtfZGV2KCk7ZHVtcF9uYW1lKF9zYWxzYWJpbGFfKQ0KICAgIGVsaWYgcG0gaW4gWyc0JywnMDQnLCcwMDQnLCdkJ106Y2VrX2RldigpO2R1bXBfcGVzYW4oX3NhbHNhYmlsYV8sbixpKQ0KICAgIGVsaWYgcG0gaW4gWyc1JywnMDUnLCcwMDUnLCdlJ106Y2VrX2RldigpO21haW5fbGlrZXJzKF9zYWxzYWJpbGFfKQ0KICAgIGVsaWYgcG0gaW4gWyc2JywnMDYnLCcwMDYnLCdmJ106Y2VrX2RldigpO21haW5fa29tZW4oX3NhbHNhYmlsYV8pDQogICAgZWxpZiBwbSBpbiBbJzcnLCcwNycsJzAwNycsJ2cnXTpjZWtfZGV2KCk7ZHVtcF9ncnVwKF9zYWxzYWJpbGFfLF9kYXB1bnRhXykNCiAgICBlbGlmIHBtIGluIFsnOCcsJzA4JywnMDA4JywnaCddOmR1bXBfZmlsZSgpDQogICAgZWxpZiBwbSBpbiBbJzknLCcwOScsJzAwOScsJ2knXTpkdW1wX2VtYWlsKCkNCiAgICBlbGlmIHBtIGluIFsnMTAnLCcwMTAnLCcwMDEwJywnaiddOl9tYWluX3JhbmRvbV8oKQ0KICAgIGVsaWYgcG0gaW4gWycxMScsJzAxMScsJzAwMTEnLCdrJ106ZHVtcF91c2VybmFtZSgpDQogICAgZWxpZiBwbSBpbiBbJzEyJywnMDEyJywnMDAxMicsJ2wnXTpjZWtfZGV2KCk7aGFzaHRhZyhfc2Fsc2FiaWxhXykNCiAgICBlbGlmIHBtIGluIFsnMTMnLCcwMTMnLCcwMDEzJywnbSddOmNla19kZXYoKTtiZXJhbmRhKF9zYWxzYWJpbGFfKQ0KICAgIGVsaWYgcG0gaW4gWycxNCcsJzAxNCcsJzAwMTQnLCduJ106Y2VrX2RldigpO3Blcm1pbnRhYW5fcGVydGVtYW5hbl9tYXN1ayhfc2Fsc2FiaWxhXykNCiAgICBlbGlmIHBtIGluIFsnMTUnLCcwMTUnLCcwMDE1JywnbyddOmNla19kZXYoKTtwZXJtaW50YWFuX3BlcnRlbWFuYW5fa2VsdWFyKF9zYWxzYWJpbGFfKQ0KICAgIGVsaWYgcG0gaW4gWycxNicsJzAxNicsJzAwMTYnLCdwJ106dGVtYW5fdGFyZ2V0KCkNCiAgICBlbGlmIHBtIGluIFsnMTcnLCcwMTcnLCcwMDE3JywncSddOmNla19oYXNpbCgpDQogICAgZWxpZiBwbSBpbiBbJzE4JywnMDE4JywnMDAxOCcsJ3InXTpoYXNpbCgpDQogICAgZWxpZiBwbSBpbiBbJzE5JywnMDE5JywnMDAxOScsJ3MnXTp1Z2VuKCkNCiAgICBlbGlmIHBtIGluIFsnMCcsJzAwJywnMDAwJywneiddOmphbGFuKCclc+KVmuKVkOKVkFslcyElc10gJXNTYW1wYWkgSnVtcGEgJXMlcyVzJyUoTyxQLE8sUCxPLG4sUCkpO2JlcnNpaCgpO21lbnVfbG9nKCkNCiAgICBlbHNlOmphbGFuKCclc+KVmuKVkOKVkFslcyElc10gJXNJc2kgWWFuZyBCZW5hciclKE0sUCxNLFApKTttZW51KCkNCg0KIyMjIFVzZXIgQWdlbnQgQmF3YWFuDQpkZWYgZGVmYXVsdHVhKCk6DQogICAgdWEgPSB1YV94aWFvbWkNCiAgICB0cnk6dWdlbnQgPSBfZGFwdW50YV9kYXB1bnRhXygndWdlbnQudHh0JywndycpO3VnZW50LndyaXRlKHVhKTt1Z2VudC5jbG9zZSgpDQogICAgZXhjZXB0IChLZXlFcnJvcixJT0Vycm9yKTptZW51X2xvZygpDQoNCiMjIyBNZW51IFVzZXIgQWdlbnQNCmRlZiB1Z2VuKCk6DQogICAgdmFyX3VnZW4oKQ0KICAgIHBtdSA9IF9jaWNpX2RhcHVudGFfKCclc+KVoOKVkOKVkFslc+KAoiVzXSAlc1BpbGloIDogJyUoTyxQLE8sUCkpDQogICAgX2RhcHVudGFfY2ljaV8oJyVz4pWRJyUoTykpDQogICAgaWYgcG11IGluWyIiXTpqYWxhbignJXPilZrilZDilZBbJXMhJXNdICVzSXNpIFlhbmcgQmVuYXInJShNLFAsTSxQKSk7bWVudSgpDQogICAgZWxpZiBwbXUgaW4gWycxJywnMDEnLCcwMDEnLCdhJ106b3Muc3lzdGVtKCd4ZGctX2RhcHVudGFfZGFwdW50YV8gaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS9zZWFyY2g/cT1NeStVc2VyK0FnZW50Jm9xPU15K1VzZXIrQWdlbnQmYXFzPWNocm9tZS4uNjlpNTdqMGwzajBpMjJpMzBsNi40Njc0ajBqMSZzb3VyY2VpZD1jaHJvbWUmaWU9VVRGLTgnKTtfY2ljaV9kYXB1bnRhXygnJXPilZrilZDilZBbICVzS2VtYmFsaSAlc10lcyclKE8sUCxPLFApKTttZW51KCkNCiAgICBlbGlmIHBtdSBpbiBbJzInLCcwMicsJzAwMicsJ2InXToNCiAgICAgICAgb3Muc3lzdGVtKCJybSAtcmYgdWdlbnQudHh0Iik7dWEgPSBfY2ljaV9kYXB1bnRhXygiJXPilZrilZDilZBbJXPigKIlc10gJXNNYXN1a2thbiBVc2VyIEFnZW50IDogXG5cbiIlKE8sUCxPLFApKQ0KICAgICAgICB0cnk6dWdlbnQgPSBfZGFwdW50YV9kYXB1bnRhXygndWdlbnQudHh0JywndycpO3VnZW50LndyaXRlKHVhKTt1Z2VudC5jbG9zZSgpO2phbGFuKCJcbiVz4pWU4pWQ4pWQWyAlc0Jlcmhhc2lsIE1lbmdnYW50aSBVc2VyIEFnZW50ICVzXSIlKE8sUCxPKSk7X2RhcHVudGFfY2ljaV8oJyVz4pWRJyUoTykpO19jaWNpX2RhcHVudGFfKCclc+KVmuKVkOKVkFsgJXNLZW1iYWxpICVzXSVzJyUoTyxQLE8sUCkpO21lbnUoKQ0KICAgICAgICBleGNlcHQgKEtleUVycm9yLElPRXJyb3IpOmphbGFuKCJcbiVz4pWU4pWQ4pWQWyAlc0dhZ2FsIE1lbmdnYW50aSBVc2VyIEFnZW50ICVzXSIlKE0sUCxNKSk7X2RhcHVudGFfY2ljaV8oJyVz4pWRJyUoTSkpO19jaWNpX2RhcHVudGFfKCclc+KVmuKVkOKVkFsgJXNLZW1iYWxpICVzXSVzJyUoTSxQLE0sUCkpO21lbnUoKQ0KICAgIGVsaWYgcG11IGluIFsnMycsJzAzJywnMDAzJywnYyddOnVnZW5faHAoKQ0KICAgIGVsaWYgcG11IGluIFsnNCcsJzA0JywnMDA0JywnZCddOm9zLnN5c3RlbSgicm0gLXJmIHVnZW50LnR4dCIpO2phbGFuKCIlc+KVoOKVkOKVkFsgJXNVc2VyIEFnZW50IEJlcmhhc2lsIERpaGFwdXMgJXNdIiUoTyxQLE8pKTtfZGFwdW50YV9jaWNpXygnJXPilZEnJShPKSk7X2NpY2lfZGFwdW50YV8oJyVz4pWa4pWQ4pWQWyAlc0tlbWJhbGkgJXNdJXMnJShPLFAsTyxQKSk7bWVudSgpDQogICAgZWxpZiBwbXUgaW4gWyc1JywnMDUnLCcwMDUnLCdlJ106DQogICAgICAgIHRyeTp1bmdzZXIgPSBfZGFwdW50YV9kYXB1bnRhXygndWdlbnQudHh0JywgJ3InKS5yZWFkKCkNCiAgICAgICAgZXhjZXB0IChLZXlFcnJvcixJT0Vycm9yKTp1bmdzZXIgPSAnVGlkYWsgRGl0ZW11a2FuJw0KICAgICAgICBfZGFwdW50YV9jaWNpXygiJXPilZrilZDilZBbJXPigKIlc10gJXNVc2VyIEFnZW50IEFuZGEgIDogXG5cbiVzJXMiJShPLFAsTyxQLE8sdW5nc2VyKSk7amFsYW4oIlxuJXPilZTilZDilZBbICVzSW5pIEFkYWxhaCBVc2VyIEFnZW50IEFuZGEgU2FhdCBJbmkgJXNdIiUoTyxQLE8pKTtfZGFwdW50YV9jaWNpXygnJXPilZEnJShPKSk7X2NpY2lfZGFwdW50YV8oJyVz4pWa4pWQ4pWQWyAlc0tlbWJhbGkgJXNdJXMnJShPLFAsTyxQKSk7bWVudSgpDQogICAgZWxpZiBwbXUgaW4gWycwJywnMDAnLCcwMDAnLCdmJ106bWVudSgpDQogICAgZWxzZTpqYWxhbignJXPilZrilZDilZBbJXMhJXNdICVzSXNpIFlhbmcgQmVuYXInJShNLFAsTSxQKSkNCmRlZiB1Z2VuX2hwKCk6DQogICAgb3Muc3lzdGVtKCJybSAtcmYgdWdlbnQudHh0IikNCiAgICBfZGFwdW50YV9jaWNpXygnJXPilaDilZDilZBbJXMxJXNdICVzWGlhb21pJyUoTyxQLE8sUCkpDQogICAgX2RhcHVudGFfY2ljaV8oJyVz4pWg4pWQ4pWQWyVzMiVzXSAlc05va2lhJyUoTyxQLE8sUCkpDQogICAgX2RhcHVudGFfY2ljaV8oJyVz4pWg4pWQ4pWQWyVzMyVzXSAlc0FzdXMnJShPLFAsTyxQKSkNCiAgICBfZGFwdW50YV9jaWNpXygnJXPilaDilZDilZBbJXM0JXNdICVzSHVhd2VpJyUoTyxQLE8sUCkpDQogICAgX2RhcHVudGFfY2ljaV8oJyVz4pWg4pWQ4pWQWyVzNSVzXSAlc1Zpdm8nJShPLFAsTyxQKSkNCiAgICBfZGFwdW50YV9jaWNpXygnJXPilaDilZDilZBbJXM2JXNdICVzT3BwbyclKE8sUCxPLFApKQ0KICAgIF9kYXB1bnRhX2NpY2lfKCclc+KVoOKVkOKVkFslczclc10gJXNTYW1zdW5nJyUoTyxQLE8sUCkpDQogICAgX2RhcHVudGFfY2ljaV8oJyVz4pWg4pWQ4pWQWyVzOCVzXSAlc1dpbmRvd3MnJShPLFAsTyxQKSkNCiAgICBwYyA9IF9jaWNpX2RhcHVudGFfKCclc+KVoOKVkOKVkFslc+KAoiVzXSAlc1BpbGloIDogJyUoTyxQLE8sUCkpDQogICAgX2RhcHVudGFfY2ljaV8oJyVz4pWRJyUoTykpDQogICAgaWYgcGMgaW5bJyddOmphbGFuKCclc+KVmuKVkOKVkFslcyElc10gJXNJc2kgWWFuZyBCZW5hciclKE0sUCxNLFApKTttZW51KCkNCiAgICBlbGlmIHBjIGluIFsnMScsJzAxJ106dWdlbnQgPSBfZGFwdW50YV9kYXB1bnRhXygndWdlbnQudHh0JywndycpO3VnZW50LndyaXRlKHVhX3hpYW9taSk7dWdlbnQuY2xvc2UoKQ0KICAgIGVsaWYgcGMgaW4gWycyJywnMDInXTp1Z2VudCA9IF9kYXB1bnRhX2RhcHVudGFfKCd1Z2VudC50eHQnLCd3Jyk7dWdlbnQud3JpdGUodWFfbm9raWEpO3VnZW50LmNsb3NlKCkNCiAgICBlbGlmIHBjIGluIFsnMycsJzAzJ106dWdlbnQgPSBfZGFwdW50YV9kYXB1bnRhXygndWdlbnQudHh0JywndycpO3VnZW50LndyaXRlKHVhX2FzdXMpO3VnZW50LmNsb3NlKCkNCiAgICBlbGlmIHBjIGluIFsnNCcsJzA0J106dWdlbnQgPSBfZGFwdW50YV9kYXB1bnRhXygndWdlbnQudHh0JywndycpO3VnZW50LndyaXRlKHVhX2h1YXdlaSk7dWdlbnQuY2xvc2UoKQ0KICAgIGVsaWYgcGMgaW4gWyc1JywnMDUnXTp1Z2VudCA9IF9kYXB1bnRhX2RhcHVudGFfKCd1Z2VudC50eHQnLCd3Jyk7dWdlbnQud3JpdGUodWFfdml2byk7dWdlbnQuY2xvc2UoKQ0KICAgIGVsaWYgcGMgaW4gWyc2JywnMDYnXTp1Z2VudCA9IF9kYXB1bnRhX2RhcHVudGFfKCd1Z2VudC50eHQnLCd3Jyk7dWdlbnQud3JpdGUodWFfb3Bwbyk7dWdlbnQuY2xvc2UoKQ0KICAgIGVsaWYgcGMgaW4gWyc3JywnMDcnXTp1Z2VudCA9IF9kYXB1bnRhX2RhcHVudGFfKCd1Z2VudC50eHQnLCd3Jyk7dWdlbnQud3JpdGUodWFfc2Ftc3VuZyk7dWdlbnQuY2xvc2UoKQ0KICAgIGVsaWYgcGMgaW4gWyc4JywnMDgnXTp1Z2VudCA9IF9kYXB1bnRhX2RhcHVudGFfKCd1Z2VudC50eHQnLCd3Jyk7dWdlbnQud3JpdGUodWFfd2luZG93cyk7dWdlbnQuY2xvc2UoKQ0KICAgIGVsc2U6amFsYW4oJyVz4pWa4pWQ4pWQWyVzISVzXSAlc0lzaSBZYW5nIEJlbmFyJyUoTSxQLE0sUCkpO21lbnUoKQ0KICAgIGphbGFuKCIlc+KVoOKVkOKVkFsgJXNCZXJoYXNpbCBNZW5nZ2FudGkgVXNlciBBZ2VudCAlc10iJShPLFAsTykpO19kYXB1bnRhX2NpY2lfKCclc+KVkSclKE8pKTtfY2ljaV9kYXB1bnRhXygnJXPilZrilZDilZBbICVzS2VtYmFsaSAlc10lcyclKE8sUCxPLFApKTttZW51KCkNCg0KIyMjIER1bXAgSUQgRnJvbSBQdWJsaWMNCmRlZiBwdWJsaWsodG9rZW4pOg0KICAgIHRyeToNCiAgICAgICAgX2RhcHVudGFfY2ljaV8oJyVz4pWg4pWQ4pWQWyVz4oCiJXNdICVzVHVsaXMgXCdtZVwnIFVudHVrIE1lbmdhbWJpbCBJRCBUZW1hbiclKE8sUCxPLFApKQ0KICAgICAgICBpdCA9IF9jaWNpX2RhcHVudGFfKCIlc+KVoOKVkOKVkFslc+KAoiVzXSAlc0lEIFRhcmdldCA6ICIlKE8sUCxPLFApKQ0KICAgICAgICBjZWtfdGFyZ2V0X2NyYWNrXyhpdCkNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgcGIgPSBfcmVxX2dldF8oImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyIgKyBpdCArICI/ZmllbGRzPW5hbWUsaWQsZmlyc3RfbmFtZSxtaWRkbGVfbmFtZSxsYXN0X25hbWUsbmFtZV9mb3JtYXQscGljdHVyZSxzaG9ydF9uYW1lJmFjY2Vzc190b2tlbj0iICsgdG9rZW4pDQogICAgICAgICAgICBvYiA9IF9qc19sb18ocGIudGV4dCkNCiAgICAgICAgICAgIF9kYXB1bnRhX2NpY2lfICgnJXPilaDilZDilZBbJXPigKIlc10gJXNOYW1hIDogJXMnJShPLFAsTyxQLG9iWyduYW1lJ10pKQ0KICAgICAgICBleGNlcHQgKEtleUVycm9yLElPRXJyb3IpOg0KICAgICAgICAgICAgX2RhcHVudGFfY2ljaV8oJyVz4pWRJyUoTykpDQogICAgICAgICAgICBqYWxhbignJXPilZrilZDilZBbJXMhJXNdICVzSUQgVGlkYWsgRGl0ZW11a2FuJyUoTSxQLE0sUCkpO21lbnUoKQ0KICAgICAgICByID0gX3JlcV9nZXRfKCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8lcz9maWVsZHM9ZnJpZW5kcy5maWVsZHMoaWQsbmFtZSkmYWNjZXNzX3Rva2VuPSVzIiUoaXQsdG9rZW4pKQ0KICAgICAgICBpZCA9IFtdDQogICAgICAgIHogPSBfanNfbG9fKHIudGV4dCkNCiAgICAgICAgeGMgPSAob2JbImZpcnN0X25hbWUiXSsiLmpzb24iKS5yZXBsYWNlKCIgIiwiXyIpDQogICAgICAgIHhiID0gX2RhcHVudGFfZGFwdW50YV8oeGMsInciKQ0KICAgICAgICBmb3IgYSBpbiB6WyJmcmllbmRzIl1bImRhdGEiXToNCiAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICBpZC5hcHBlbmQoYVsiaWQiXSsi4oCiIithWyJuYW1lIl0pDQogICAgICAgICAgICAgICAgeGIud3JpdGUoYVsiaWQiXSsi4oCiIithWyJuYW1lIl0rIlxuIikNCiAgICAgICAgICAgIGV4Y2VwdDpjb250aW51ZQ0KICAgICAgICB4Yi5jbG9zZSgpDQogICAgICAgIF9kYXB1bnRhX2NpY2lfKCclc+KVoOKVkOKVkFslc+KAoiVzXSAlc1RvdGFsIElEIDogJXMnJShPLFAsTyxQLGxlbihpZCkpKQ0KICAgICAgICByZXR1cm4gY3JhY2soeGMpDQogICAgZXhjZXB0IChLZXlFcnJvcixJT0Vycm9yKToNCiAgICAgICAgX2NpY2lfY2ljaV8oJyVz4pWa4pWQ4pWQWyVzISVzXSAlc1Rva2VuL0Nvb2tpZXMgSW52YWxpZCBBdGF1IElEIFRpZGFrIERpdGVtdWthbiclKE0sUCxNLFApKQ0KDQojIyMgRHVtcCBJRCBGcm9tIEZvbGxvd2Vycw0KZGVmIGZvbGxvd2Vycyhjb29raWVzKToNCiAgICBfcXVlcnlfID0gX2NpY2lfZGFwdW50YV8oJyVz4pWg4pWQ4pWQWyVz4oCiJXNdICVzTWFzdWtrYW4gSUQgVGFyZ2V0IDogJyUoTyxQLE8sUCkpO19kYXB1bnRhX2NpY2lfKCIlc+KVoOKVkOKVkFslc+KAoiVzXSAlc1Rla2FuIGN0cmwrYyBVbnR1ayBCZXJoZW50aSBEdW1wIiUoTyxQLE8sUCkpO19maWxlXyA9IF9xdWVyeV8rJy5qc29uJztfdXJsX2Rldl8gPSAnaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29tL3N1YnNjcmliZS9saXN0cy8/aWQ9JyArIF9xdWVyeV87X2ZpbGVfID0gKF9xdWVyeV8rJy5qc29uJykucmVwbGFjZSgnICcsJ18nKQ0KICAgIHRyeTpvcy5yZW1vdmUoX2ZpbGVfKQ0KICAgIGV4Y2VwdDpwYXNzDQogICAgZXhlY19mb2xsb3dlcnMoX3VybF9kZXZfLGNvb2tpZXMsX2ZpbGVfKTtfZGFwdW50YV9jaWNpXygiXG4lc+KVoOKVkOKVkFslc+KAoiVzXSAlc0Jlcmhhc2lsIER1bXAgJXMgSUQiJShPLFAsTyxQLGxlbihfZGFwdW50YV9kYXB1bnRhXyhfZmlsZV8pLnJlYWQoKS5zcGxpdGxpbmVzKCkpKSk7cmV0dXJuIGNyYWNrKF9maWxlXykNCmRlZiBleGVjX2ZvbGxvd2Vycyh1cmwsY29va2llcyxfZmlsZV8pOg0KICAgIG9wZW4oX2ZpbGVfLCdhJyk7X3JlcV9zZXNfID0gcmVxdWVzdHMuU2Vzc2lvbigpO19yZXFfZ2V0XyA9IF9yZXFfc2VzXy5nZXQodXJsLGNvb2tpZXM9Y29va2llcyk7X3NvcF9kZXZfID0gcGFyKF9yZXFfZ2V0Xy50ZXh0LCdodG1sLnBhcnNlcicpO19idWthX2ZpbGVfID0gb3BlbihfZmlsZV8pLnJlYWQoKTtfZGFwdW50YV9jaWNpXygiXHIlc+KVoOKVkOKVkFslc+KAoiVzXSAlc1NlZGFuZyBNZW5nYW1iaWwgJXMgSUQiJShPLFAsTyxQLGxlbihfZGFwdW50YV9kYXB1bnRhXyhfZmlsZV8pLnJlYWQoKS5zcGxpdGxpbmVzKCkpKSwgZW5kPScgJyk7c3lzLnN0ZG91dC5mbHVzaCgpDQogICAgdHJ5Og0KICAgICAgICBmb3IgX2NpY2lfIGluIF9zb3BfZGV2Xy5maW5kX2FsbCgnYScsaHJlZj1UcnVlKToNCiAgICAgICAgICAgIGlmICJwcm9maWxlLnBocCIgaW4gX2NpY2lfLmdldCgnaHJlZicpOg0KICAgICAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICAgICAgX25hbWVfZGV2XyA9IF9jaWNpXy50ZXh0O19pZF9kZXZfID0gIiIuam9pbihiczQucmUuZmluZGFsbCgicHJvZmlsZVwucGhwXD9pZD0oLio/KSYiLF9jaWNpXy5nZXQoImhyZWYiKSkpDQogICAgICAgICAgICAgICAgICAgIGlmIF9uYW1lX2Rldl8gaW4gX2J1a2FfZmlsZV86cGFzcw0KICAgICAgICAgICAgICAgICAgICBlbGlmICcvJyBpbiBfaWRfZGV2XzpwYXNzDQogICAgICAgICAgICAgICAgICAgIGVsc2U6b3BlbihfZmlsZV8sJ2ErJykud3JpdGUoJyVz4oCiJXNcbiclKF9pZF9kZXZfLF9uYW1lX2Rldl8pKQ0KICAgICAgICAgICAgICAgIGV4Y2VwdDpwYXNzDQogICAgICAgICAgICBlbHNlOnBhc3MNCiAgICAgICAgZm9yIF9jaWNpXyBpbiBfc29wX2Rldl8uZmluZF9hbGwoJ2EnLGhyZWY9VHJ1ZSk6DQogICAgICAgICAgICBpZiAnTGloYXQgU2VsZW5na2FwbnlhJyBpbiBfY2ljaV8udGV4dDp1cmxfZGV2ID0gJ2h0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbS8nICsgX2NpY2lfLmdldCgnaHJlZicpO2V4ZWNfZm9sbG93ZXJzKHVybF9kZXYsY29va2llcyxfZmlsZV8pDQogICAgZXhjZXB0IEtleWJvYXJkSW50ZXJydXB0Ol9kYXB1bnRhX2NpY2lfKCJcbiVz4pWg4pWQ4pWQWyVz4oCiJXNdICVzQmVyaGFzaWwgRHVtcCAlcyBJRCIlKE8sUCxPLFAsbGVuKF9kYXB1bnRhX2RhcHVudGFfKF9maWxlXykucmVhZCgpLnNwbGl0bGluZXMoKSkpKTtyZXR1cm4gY3JhY2soX2ZpbGVfKQ0KDQojIyMgRHVtcCBJRCBGcm9tIExpa2VycyBQb3N0DQpkZWYgbWFpbl9saWtlcnMoX2RhcHVudGFfKToNCiAgICBfcXVlcnlfID0gX2NpY2lfZGFwdW50YV8oJyVz4pWg4pWQ4pWQWyVz4oCiJXNdICVzTWFzdWtrYW4gSUQgUG9zdGluZ2FuIDogJyUoTyxQLE8sUCkpO19kYXB1bnRhX2NpY2lfKCIlc+KVoOKVkOKVkFslc+KAoiVzXSAlc1Rla2FuIGN0cmwrYyBVbnR1ayBCZXJoZW50aSBEdW1wIiUoTyxQLE8sUCkpO19maWxlXyA9IF9xdWVyeV8rJy5qc29uJw0KICAgIHRyeTpvcy5yZW1vdmUoX3F1ZXJ5XysnLmpzb24nKQ0KICAgIGV4Y2VwdDpwYXNzDQogICAgX2RhcHVudGFfZGFwdW50YV8oX2ZpbGVfLCd3Jyk7X3VybF8gPSAoJ2h0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbS91ZmkvcmVhY3Rpb24vcHJvZmlsZS9icm93c2VyLz9mdF9lbnRfaWRlbnRpZmllcj0nK19xdWVyeV8pO3NjcmFwZV9saWtlcnMoX2RhcHVudGFfLF91cmxfLF9maWxlXykNCiAgICBpZiBsZW4oX2RhcHVudGFfZGFwdW50YV8oX2ZpbGVfKS5yZWFkKCkuc3BsaXRsaW5lcygpKSA9PSAwOl9kYXB1bnRhX2NpY2lfKCdcbiVz4pWa4pWQ4pWQWyVzISVzXSAlc1Bvc3RpbmdhbiBUaWRhayBEaXRlbXVrYW4nJShNLFAsTSxQKSk7X2NpY2lfY2ljaV8oKQ0KICAgIF9kYXB1bnRhX2NpY2lfKCJcbiVz4pWg4pWQ4pWQWyVz4oCiJXNdICVzQmVyaGFzaWwgRHVtcCAlcyBJRCIlKE8sUCxPLFAsbGVuKF9kYXB1bnRhX2RhcHVudGFfKF9maWxlXykucmVhZCgpLnNwbGl0bGluZXMoKSkpKTtyZXR1cm4gY3JhY2soX2ZpbGVfKQ0KZGVmIHNjcmFwZV9saWtlcnMoX2RhcHVudGFfLF91cmxfLF9maWxlXyk6DQogICAgX3Nlc18gPSBfcmVxX3Nlc187X3VybF9sb2FkXyA9IF9zZXNfLmdldChfdXJsXyxjb29raWVzPV9kYXB1bnRhXyxoZWFkZXJzPWhlYWRlcl9ncnVwKS50ZXh0LmVuY29kZSgidXRmLTgiKTtfc2VzX3Bhcl8gPSBwYXIoX3VybF9sb2FkXywnaHRtbC5wYXJzZXInKTtfZGFwdW50YV9jaWNpXygiXHIlc+KVoOKVkOKVkFslc+KAoiVzXSAlc1NlZGFuZyBNZW5nYW1iaWwgJXMgSUQiJShPLFAsTyxQLGxlbihfZGFwdW50YV9kYXB1bnRhXyhfZmlsZV8pLnJlYWQoKS5zcGxpdGxpbmVzKCkpKSwgZW5kPScgJyk7c3lzLnN0ZG91dC5mbHVzaCgpDQogICAgdHJ5OiANCiAgICAgICAgZm9yIF9pc2lfIGluIF9zZXNfcGFyXy5maW5kX2FsbCgnaDMnKToNCiAgICAgICAgICAgIGZvciBfaWRfIGluIF9pc2lfLmZpbmRfYWxsKCdhJyxocmVmPVRydWUpOg0KICAgICAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICAgICAgaWYgInByb2ZpbGUucGhwIiBpbiBfaWRfLmdldCgiaHJlZiIpOl9hXyA9IF9pZF8uZ2V0KCJocmVmIikuc3BsaXQoJz0nKVsxXTtfX2lkX18gPSBfaWRfLnRleHQ7X2RhcHVudGFfZGFwdW50YV8oX2ZpbGVfLCdhKycpLndyaXRlKF9hXysn4oCiJytfX2lkX18rJ1xuJykNCiAgICAgICAgICAgICAgICAgICAgZWxzZTpfYV8gPSBfaWRfLmdldCgiaHJlZiIpLnNwbGl0KCcvJylbMV07X19pZF9fID0gX2lkXy50ZXh0O19kYXB1bnRhX2RhcHVudGFfKF9maWxlXywnYSsnKS53cml0ZShfYV8rJ+KAoicrX19pZF9fKydcbicpDQogICAgICAgICAgICAgICAgZXhjZXB0OmNvbnRpbnVlDQogICAgICAgIGZvciBfbGFuanV0XyBpbiBfc2VzX3Bhcl8uZmluZF9hbGwoImEiLGhyZWY9VHJ1ZSk6DQogICAgICAgICAgICBpZiAiTGloYXQgU2VsZW5na2FwbnlhIiBpbiBfbGFuanV0Xy50ZXh0Og0KICAgICAgICAgICAgICAgIHdoaWxlIFRydWU6DQogICAgICAgICAgICAgICAgICAgIHRyeTpzY3JhcGVfbGlrZXJzKF9kYXB1bnRhXywiaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29tLyIrX2xhbmp1dF8uZ2V0KCJocmVmIiksX2ZpbGVfKTticmVhaw0KICAgICAgICAgICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6X2RhcHVudGFfY2ljaV8oJyVzJXMnJShNLGUpKQ0KICAgIGV4Y2VwdCBLZXlib2FyZEludGVycnVwdDpfZGFwdW50YV9jaWNpXygiXG4lc+KVoOKVkOKVkFslc+KAoiVzXSAlc0Jlcmhhc2lsIER1bXAgJXMgSUQiJShPLFAsTyxQLGxlbihfZGFwdW50YV9kYXB1bnRhXyhfZmlsZV8pLnJlYWQoKS5zcGxpdGxpbmVzKCkpKSk7cmV0dXJuIGNyYWNrKF9maWxlXykNCg0KIyMjIER1bXAgSUQgRnJvbSBDb21tZW50IFBvc3QNCmRlZiBtYWluX2tvbWVuKF9kYXB1bnRhXyk6DQogICAgX3F1ZXJ5XyA9IF9jaWNpX2RhcHVudGFfKCclc+KVoOKVkOKVkFslc+KAoiVzXSAlc01hc3Vra2FuIElEIFBvc3RpbmdhbiA6ICclKE8sUCxPLFApKTtfZGFwdW50YV9jaWNpXygiJXPilaDilZDilZBbJXPigKIlc10gJXNUZWthbiBjdHJsK2MgVW50dWsgQmVyaGVudGkgRHVtcCIlKE8sUCxPLFApKTtfZmlsZV8gPSBfcXVlcnlfKycuanNvbicNCiAgICB0cnk6b3MucmVtb3ZlKF9xdWVyeV8rJy5qc29uJykNCiAgICBleGNlcHQ6cGFzcw0KICAgIF9kYXB1bnRhX2RhcHVudGFfKF9maWxlXywndycpO191cmxfID0gKCdodHRwczovL21iYXNpYy5mYWNlYm9vay5jb20vJytfcXVlcnlfKTtzY3JhcGVfa29tZW4oX2RhcHVudGFfLF91cmxfLF9maWxlXykNCiAgICBpZiBsZW4oX2RhcHVudGFfZGFwdW50YV8oX2ZpbGVfKS5yZWFkKCkuc3BsaXRsaW5lcygpKSA9PSAwOl9kYXB1bnRhX2NpY2lfKCdcbiVz4pWa4pWQ4pWQWyVzISVzXSAlc1Bvc3RpbmdhbiBUaWRhayBEaXRlbXVrYW4nJShNLFAsTSxQKSk7X2NpY2lfY2ljaV8oKQ0KICAgIF9kYXB1bnRhX2NpY2lfKCJcbiVz4pWg4pWQ4pWQWyVz4oCiJXNdICVzQmVyaGFzaWwgRHVtcCAlcyBJRCIlKE8sUCxPLFAsbGVuKF9kYXB1bnRhX2RhcHVudGFfKF9maWxlXykucmVhZCgpLnNwbGl0bGluZXMoKSkpKTtyZXR1cm4gY3JhY2soX2ZpbGVfKQ0KZGVmIHNjcmFwZV9rb21lbihfZGFwdW50YV8sX3VybF8sX2ZpbGVfKToNCiAgICBfc2VzXyA9IF9yZXFfc2VzXztfdXJsX2xvYWRfID0gX3Nlc18uZ2V0KF91cmxfLGNvb2tpZXM9X2RhcHVudGFfLGhlYWRlcnM9aGVhZGVyX2dydXApLnRleHQuZW5jb2RlKCJ1dGYtOCIpO19zZXNfcGFyXyA9IHBhcihfdXJsX2xvYWRfLCdodG1sLnBhcnNlcicpO19kYXB1bnRhX2NpY2lfKCJcciVz4pWg4pWQ4pWQWyVz4oCiJXNdICVzU2VkYW5nIE1lbmdhbWJpbCAlcyBJRCIlKE8sUCxPLFAsbGVuKF9kYXB1bnRhX2RhcHVudGFfKF9maWxlXykucmVhZCgpLnNwbGl0bGluZXMoKSkpLCBlbmQ9JyAnKTtzeXMuc3Rkb3V0LmZsdXNoKCkNCiAgICB0cnk6IA0KICAgICAgICBmb3IgX2lzaV8gaW4gX3Nlc19wYXJfLmZpbmRfYWxsKCdoMycpOg0KICAgICAgICAgICAgZm9yIF9pZF8gaW4gX2lzaV8uZmluZF9hbGwoJ2EnLGhyZWY9VHJ1ZSk6DQogICAgICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgICAgICBpZiAicHJvZmlsZS5waHAiIGluIF9pZF8uZ2V0KCJocmVmIik6X2FfPSIiLmpvaW4oYnM0LnJlLmZpbmRhbGwoInByb2ZpbGVcLnBocFw/aWQ9KC4qPykmIixfaWRfLmdldCgiaHJlZiIpKSk7X19pZF9fID0gX2lkXy50ZXh0O19kYXB1bnRhX2RhcHVudGFfKF9maWxlXywnYSsnKS53cml0ZShzdHIoX2FfKS5zcGxpdCgnJicpWzBdKyfigKInK19faWRfXysnXG4nKQ0KICAgICAgICAgICAgICAgICAgICBlbHNlOl9hXz0iIi5qb2luKGJzNC5yZS5maW5kYWxsKCIvKC4qPylcPyIsX2lkXy5nZXQoImhyZWYiKSkpO19faWRfXyA9IF9pZF8udGV4dDtfZGFwdW50YV9kYXB1bnRhXyhfZmlsZV8sJ2ErJykud3JpdGUoc3RyKF9hXykuc3BsaXQoJz8nKVswXSsn4oCiJytfX2lkX18rJ1xuJykNCiAgICAgICAgICAgICAgICBleGNlcHQ6Y29udGludWUNCiAgICAgICAgZm9yIF9sYW5qdXRfIGluIF9zZXNfcGFyXy5maW5kX2FsbCgiYSIsaHJlZj1UcnVlKToNCiAgICAgICAgICAgIGlmICJMaWhhdCBrb21lbnRhciBsYWlubnlh4oCmIiBpbiBfbGFuanV0Xy50ZXh0Og0KICAgICAgICAgICAgICAgIHdoaWxlIFRydWU6DQogICAgICAgICAgICAgICAgICAgIHRyeTpzY3JhcGVfa29tZW4oX2RhcHVudGFfLCJodHRwczovL21iYXNpYy5mYWNlYm9vay5jb20vIitfbGFuanV0Xy5nZXQoImhyZWYiKSxfZmlsZV8pO2JyZWFrDQogICAgICAgICAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZTpfZGFwdW50YV9jaWNpXygnJXMlcyclKE0sZSkpDQogICAgICAgICAgICBlbGlmICJMaWhhdCBrb21lbnRhciBzZWJlbHVtbnlh4oCmIiBpbiBfbGFuanV0Xy50ZXh0Og0KICAgICAgICAgICAgICAgIHdoaWxlIFRydWU6DQogICAgICAgICAgICAgICAgICAgIHRyeTpzY3JhcGVfbGlrZXJzKF9kYXB1bnRhXywiaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29tLyIrX2xhbmp1dF8uZ2V0KCJocmVmIiksX2ZpbGVfKTticmVhaw0KICAgICAgICAgICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6X2RhcHVudGFfY2ljaV8oJyVzJXMnJShNLGUpKQ0KICAgIGV4Y2VwdCBLZXlib2FyZEludGVycnVwdDpfZGFwdW50YV9jaWNpXygiXG4lc+KVoOKVkOKVkFslc+KAoiVzXSAlc0Jlcmhhc2lsIER1bXAgJXMgSUQiJShPLFAsTyxQLGxlbihfZGFwdW50YV9kYXB1bnRhXyhfZmlsZV8pLnJlYWQoKS5zcGxpdGxpbmVzKCkpKSk7cmV0dXJuIGNyYWNrKF9maWxlXykNCg0KIyMjIER1bXAgSUQgRnJvbSBHcm91cA0KY2xhc3MgZHVtcF9ncnVwOg0KICAgIGRlZiBfX2luaXRfXyhzZWxmLF9kYXB1bnRhXyxfY2ljaV8pOg0KICAgICAgICBzZWxmLmdsaXN0PVtdO3NlbGYuX2dydXBfPVtdO3NlbGYuaWQ9J19fZGFwdW50YV9fLmpzb24nO3NlbGYudG9rZW49X2NpY2lfO3NlbGYuY29va2llcz1fZGFwdW50YV87c2VsZi5oZWFkZXIgPSB7InVzZXItYWdlbnQiOiAiTW96aWxsYS81LjAgKExpbnV4OyBBbmRyb2lkIDEwOyBNaSA5VCBQcm8gQnVpbGQvUUtRMS4xOTA4MjUuMDAyOyB3dikgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgVmVyc2lvbi80LjAgQ2hyb21lLzg4LjAuNDMyNC4xODEgTW9iaWxlIFNhZmFyaS81MzcuMzYgW0ZCQU4vRU1BO0ZCTEMvaWRfSUQ7RkJBVi8yMzkuMC4wLjEwLjEwOTtdIn07c2VsZi5tYWluX2dyb3VwKCJodHRwczovL20uZmFjZWJvb2suY29tL2dyb3Vwcy8/c2VlbW9yZSIpDQogICAgZGVmIG1haW5fZ3JvdXAoc2VsZiwgdXJsX2Rldik6DQogICAgICAgIGJzPWJzNC5CZWF1dGlmdWxTb3VwKF9yZXFfZ2V0Xyh1cmxfZGV2LGNvb2tpZXM9c2VsZi5jb29raWVzLGhlYWRlcnM9c2VsZi5oZWFkZXIpLnRleHQsImh0bWwucGFyc2VyIikNCiAgICAgICAgZm9yIF9jaWNpXyBpbiBicy5maW5kX2FsbCgiYSIsaHJlZj1UcnVlKToNCiAgICAgICAgICAgIGlmICIvZ3JvdXBzLyIgaW4gX2NpY2lfLmdldCgiaHJlZiIpOg0KICAgICAgICAgICAgICAgIGlmICJjYXRlZ29yeSIgaW4gX2NpY2lfLmdldCgiaHJlZiIpIG9yICJjcmVhdGUiIGluIF9jaWNpXy5nZXQoImhyZWYiKTpjb250aW51ZQ0KICAgICAgICAgICAgICAgIGVsc2U6c2VsZi5nbGlzdC5hcHBlbmQoeyJpZCI6IiIuam9pbihiczQucmUuZmluZGFsbCgiL2dyb3Vwcy8oLio/KVw/IixfY2ljaV8uZ2V0KCJocmVmIikpKSwibmFtZSI6X2NpY2lfLnRleHR9KQ0KICAgICAgICBpZiBsZW4oc2VsZi5nbGlzdCkgIT0wOg0KICAgICAgICAgICAgX2RhcHVudGFfY2ljaV8oIiVz4pWg4pWQ4pWQWyVz4oCiJXNdICVzS2FtdSBCZXJnYWJ1bmcgRGFsYW0gJXMlcyVzIEdydXAiJShPLFAsTyxQLE8sbGVuKHNlbGYuZ2xpc3QpLFApKTtfZGFwdW50YV9jaWNpXygnJXPilaDilZDilZBbJXMxJXNdICVzQ2FyaSBTZW11YSBHcnVwIEJlcmdhYnVuZyclKE8sUCxPLFApKTtfZGFwdW50YV9jaWNpXygnJXPilaDilZDilZBbJXMyJXNdICVzQ2FyaSBHcnVwIEJlcmRhc2FyIE5hbWEnJShPLFAsTyxQKSk7X2RhcHVudGFfY2ljaV8oJyVz4pWg4pWQ4pWQWyVzMyVzXSAlc0NhcmkgR3J1cCBCZXJkYXNhciBJRCclKE8sUCxPLFApKQ0KICAgICAgICAgICAgd2hpbGUgVHJ1ZToNCiAgICAgICAgICAgICAgICBjPV9jaWNpX2RhcHVudGFfKCclc+KVoOKVkOKVkFslc+KAoiVzXSAlc1BpbGloIDogJyUoTyxQLE8sUCkpO19kYXB1bnRhX2NpY2lfKCclc+KVkSclKE8pKQ0KICAgICAgICAgICAgICAgIGlmIGM9PSIiOmNvbnRpbnVlDQogICAgICAgICAgICAgICAgZWxpZiBjPT0iMSI6c2VsZi5zYXlhKCkNCiAgICAgICAgICAgICAgICBlbGlmIGM9PSIyIjpzZWxmLnNlYXJjaCgpDQogICAgICAgICAgICAgICAgZWxpZiBjPT0iMyI6c2VsZi5tYW51YWwoKQ0KICAgICAgICAgICAgICAgIGVsc2U6amFsYW4oJyVz4pWa4pWQ4pWQWyVzISVzXSAlc0lzaSBZYW5nIEJlbmFyJyUoTSxQLE0sUCkpO21lbnUoKQ0KICAgICAgICBlbHNlOl9kYXB1bnRhX2NpY2lfKCIlc+KVoOKVkOKVkFslc+KAoiVzXSAlc0thbXUgVGlkYWsgQmVyZ2FidW5nIERhbGFtIEdydXAgTWFuYXB1biIlKE8sUCxPLFApKTtzZWxmLm1hbnVhbCgpDQogICAgZGVmIHNheWEoc2VsZik6DQogICAgICAgIHNlbGYuZmw9KHNlbGYuaWQpDQogICAgICAgIHRyeTpvcy5yZW1vdmUoc2VsZi5mbCkNCiAgICAgICAgZXhjZXB0OnBhc3MNCiAgICAgICAgX2RhcHVudGFfY2ljaV8oIiVz4pWg4pWQ4pWQWyVz4oCiJXNdICVzVGVrYW4gY3RybCtjIFVudHVrIEJlcmhlbnRpIER1bXAiJShPLFAsTyxQKSkNCiAgICAgICAgdHJ5OiANCiAgICAgICAgICAgIHVybCA9ICJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS9tZS9ncm91cHM/YWNjZXNzX3Rva2VuPXt9Ii5mb3JtYXQoc2VsZi50b2tlbikNCiAgICAgICAgICAgIHdpdGggX3JlcV9zZXNfIGFzIHNlc186DQogICAgICAgICAgICAgICAgZGF0YSA9IHNlc18uZ2V0KHVybCkuanNvbigpDQogICAgICAgICAgICAgICAgZm9yIF9kYXB1bnRhXyBpbiBkYXRhWyJkYXRhIl06DQogICAgICAgICAgICAgICAgICAgIHRyeTpzZWxmLl9ncnVwXy5hcHBlbmQoX2RhcHVudGFfWyJpZCJdKQ0KICAgICAgICAgICAgICAgICAgICBleGNlcHQ6cGFzcw0KICAgICAgICAgICAgZm9yIF9jaWNpXyBpbiBzZWxmLl9ncnVwXzoNCiAgICAgICAgICAgICAgICB0cnk6c2VsZi51cmxfZ3J1cCA9ICgiaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29tL2Jyb3dzZS9ncm91cC9tZW1iZXJzLz9pZD0lcyIlKF9jaWNpXykpO3NlbGYuZXhlY19ncnVwX3NheWEoKTtfZGFwdW50YV9jaWNpXygiXG4lc+KVoOKVkOKVkFslc+KAoiVzXSAlc0Jlcmhhc2lsIER1bXAgJXMgSUQgRGFyaSBHcnVwIFNheWEiJShPLFAsTyxQLGxlbihfZGFwdW50YV9kYXB1bnRhXyhzZWxmLmZsKS5yZWFkKCkuc3BsaXRsaW5lcygpKSkpO3JldHVybiBjcmFjayhzZWxmLmZsKQ0KICAgICAgICAgICAgICAgIGV4Y2VwdCBLZXlib2FyZEludGVycnVwdDpfZGFwdW50YV9jaWNpXygiXG4lc+KVoOKVkOKVkFslc+KAoiVzXSAlc0Jlcmhhc2lsIER1bXAgJXMgSUQgRGFyaSBHcnVwIFNheWEiJShPLFAsTyxQLGxlbihfZGFwdW50YV9kYXB1bnRhXyhzZWxmLmZsKS5yZWFkKCkuc3BsaXRsaW5lcygpKSkpO3JldHVybiBjcmFjayhzZWxmLmZsKQ0KICAgICAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgX2Vycm9yXzpfZGFwdW50YV9jaWNpXygnXG4lc+KVmuKVkOKVkFslcyElc10gJXNFcnJvciBEaSBCYWdpYW4gOiAlcyclKE0sUCxNLFAsX2Vycm9yXykpO19jaWNpX2NpY2lfKCkNCiAgICAgICAgZXhjZXB0IChLZXlFcnJvcixJT0Vycm9yKTpqYWxhbignJXPilZrilZDilZBbJXMhJXNdICVzQ29va2llIEludmFsaWQnJShNLFAsTSxQKSk7bWVudSgpDQogICAgICAgIGV4Y2VwdCByZXF1ZXN0cy5leGNlcHRpb25zLkNvbm5lY3Rpb25FcnJvcjpqYWxhbignJXPilZrilZDilZBbJXMhJXNdICVzS29uZWtzaSBCZXJtYXNhYWgnJShNLFAsTSxQKSk7bWVudSgpDQogICAgICAgIGV4Y2VwdCBLZXlib2FyZEludGVycnVwdDpfZGFwdW50YV9jaWNpXygiXG4lc+KVoOKVkOKVkFslc+KAoiVzXSAlc0Jlcmhhc2lsIER1bXAgJXMgSUQgRGFyaSBHcnVwIFNheWEiJShPLFAsTyxQLGxlbihfZGFwdW50YV9kYXB1bnRhXyhzZWxmLmZsKS5yZWFkKCkuc3BsaXRsaW5lcygpKSkpO3JldHVybiBjcmFjayhzZWxmLmZsKQ0KICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIF9lcnJvcl86X2RhcHVudGFfY2ljaV8oJ1xuJXPilZrilZDilZBbJXMhJXNdICVzRXJyb3IgRGkgQmFnaWFuIDogJXMnJShNLFAsTSxQLF9lcnJvcl8pKTtfY2ljaV9jaWNpXygpDQogICAgZGVmIGV4ZWNfZ3J1cF9zYXlhKHNlbGYpOg0KICAgICAgICBnbG9iYWwgY291bnQNCiAgICAgICAgd2l0aCBfcmVxX3Nlc18gYXMgc2VzXzoNCiAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICBkYXRhID0gc2VzXy5nZXQoc2VsZi51cmxfZ3J1cCwgY29va2llcz1zZWxmLmNvb2tpZXMsIGhlYWRlcnM9c2VsZi5oZWFkZXIpLmNvbnRlbnQ7c29wX2RldiA9IHBhcihkYXRhLCAiaHRtbC5wYXJzZXIiKTttZW1iZXJzID0gc29wX2Rldi5maW5kKCJkaXYiLCBpZD0ib2JqZWN0c19jb250YWluZXIiKQ0KICAgICAgICAgICAgICAgIGZvciBkZXYgaW4gbWVtYmVycy5maW5kX2FsbCgidGFibGUiKToNCiAgICAgICAgICAgICAgICAgICAgdXNlcl8gPSBkZXZbImlkIl0ucmVwbGFjZSgibWVtYmVyXyIsICIiKTtuYW1hXyA9IHJlLmZpbmRhbGwoJzxpbWcgYWx0PSIoLiopLCBwcm9maWxlIHBpY3R1cmUiJywgc3RyKGRldikpWzBdDQogICAgICAgICAgICAgICAgICAgIHRyeTpfZGFwdW50YV9kYXB1bnRhXyhzZWxmLmZsLCdhKycpLndyaXRlKHN0cih1c2VyXykrIuKAoiIrc3RyKG5hbWFfKSsiXG4iKS5jbG9zZSgpDQogICAgICAgICAgICAgICAgICAgIGV4Y2VwdDpwYXNzDQogICAgICAgICAgICAgICAgX2RhcHVudGFfY2ljaV8oIlxyJXPilaDilZDilZBbJXPigKIlc10gJXNTZWRhbmcgTWVuZ2FtYmlsICVzIElEIiUoTyxQLE8sUCxsZW4oX2RhcHVudGFfZGFwdW50YV8oc2VsZi5mbCkucmVhZCgpLnNwbGl0bGluZXMoKSkpLCBlbmQ9JyAnKTtzeXMuc3Rkb3V0LmZsdXNoKCkNCiAgICAgICAgICAgICAgICBpZiAiTGloYXQgU2VsZW5na2FwbnlhIiBpbiBzdHIoc29wX2Rldik6dXJsID0gc29wX2Rldi5maW5kKCJhIiwgc3RyaW5nPSJMaWhhdCBTZWxlbmdrYXBueWEiKVsiaHJlZiJdO3VybF9ncnVwID0gImh0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbSIrdXJsO3NlbGYuZXhlY19ncnVwX3NheWEoKQ0KICAgICAgICAgICAgZXhjZXB0IEtleWJvYXJkSW50ZXJydXB0Ol9kYXB1bnRhX2NpY2lfKCJcbiVz4pWg4pWQ4pWQWyVz4oCiJXNdICVzQmVyaGFzaWwgRHVtcCAlcyBJRCBEYXJpIEdydXAgU2F5YSIlKE8sUCxPLFAsbGVuKF9kYXB1bnRhX2RhcHVudGFfKHNlbGYuZmwpLnJlYWQoKS5zcGxpdGxpbmVzKCkpKSk7cmV0dXJuIGNyYWNrKHNlbGYuZmwpDQogICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIF9lcnJvcl86X2RhcHVudGFfY2ljaV8oJ1xuJXPilZrilZDilZBbJXMhJXNdICVzRXJyb3IgRGkgQmFnaWFuIDogJXMnJShNLFAsTSxQLF9lcnJvcl8pKTtfY2ljaV9jaWNpXygpDQogICAgZGVmIG1hbnVhbChzZWxmKToNCiAgICAgICAgaWQ9X2NpY2lfZGFwdW50YV8oIiVz4pWg4pWQ4pWQWyVz4oCiJXNdICVzTWFzdWtrYW4gSUQgR3J1cCA6ICIlKE8sUCxPLFApKQ0KICAgICAgICBpZiBpZD09IiI6amFsYW4oJyVz4pWa4pWQ4pWQWyVzISVzXSAlc0lzaSBZYW5nIEJlbmFyJyUoTSxQLE0sUCkpO21lbnUoKQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgcj1iczQuQmVhdXRpZnVsU291cChfcmVxX2dldF8oImh0dHBzOi8vbS5mYWNlYm9vay5jb20vZ3JvdXBzLyIraWQsaGVhZGVycz1oZWFkZXJfZ3J1cCxjb29raWVzPXNlbGYuY29va2llcykudGV4dCwiaHRtbC5wYXJzZXIiKQ0KICAgICAgICAgICAgaWYgImtvbnRlbiB0aWRhayIgaW4gci5maW5kKCJ0aXRsZSIpLnRleHQubG93ZXIoKTpqYWxhbignJXPilZrilZDilZBbJXMhJXNdICVzR3J1cCBQcml2YXQgQXRhdSBJRCBTYWxhaCclKE0sUCxNLFApKTttZW51KCkNCiAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgc2VsZi5saXN0ZWQ9eyJpZCI6aWQsIm5hbWUiOnIuZmluZCgidGl0bGUiKS50ZXh0fTtzZWxmLmYoaWQpO19kYXB1bnRhX2NpY2lfKCclc+KVkSclKE8pKTtfZGFwdW50YV9jaWNpXygiJXPilaDilZDilZBbJXPigKIlc10gJXNOYW1hIDogJXMiJShPLFAsTyxQLHNlbGYubGlzdGVkLmdldCgibmFtZSIpKSk7eGQgPSBfY2ljaV9kYXB1bnRhXygnJXPilaDilZDilZBbJXPigKIlc10gJXNEdW1wIElEL1VzZXJuYW1lPyBbaS91XSA6ICclKE8sUCxPLFApKTtfZGFwdW50YV9jaWNpXygiJXPilaDilZDilZBbJXPigKIlc10gJXNUZWthbiBjdHJsK2MgVW50dWsgQmVyaGVudGkgRHVtcCIlKE8sUCxPLFApKQ0KICAgICAgICAgICAgICAgIGlmIHhkIGluIFsnJ106amFsYW4oJyVz4pWa4pWQ4pWQWyVzISVzXSAlc0lzaSBZYW5nIEJlbmFyJyUoTSxQLE0sUCkpO21lbnUoKQ0KICAgICAgICAgICAgICAgIGVsaWYgeGQgaW4gWydpJywnSScsJzEnXToNCiAgICAgICAgICAgICAgICAgICAgdHJ5OnNlbGYuZHVtcF9pZCgiaHR0cHM6Ly9tLmZhY2Vib29rLmNvbS9ncm91cHMvIitpZCk7X2RhcHVudGFfY2ljaV8oIlxuJXPilaDilZDilZBbJXPigKIlc10gJXNCZXJoYXNpbCBEdW1wICVzIElEIERhcmkgJXMiJShPLFAsTyxQLGxlbihfZGFwdW50YV9kYXB1bnRhXyhzZWxmLmZsKS5yZWFkKCkuc3BsaXRsaW5lcygpKSxzZWxmLmxpc3RlZC5nZXQoIm5hbWUiKSkpO3JldHVybiBjcmFjayhzZWxmLmZsKQ0KICAgICAgICAgICAgICAgICAgICBleGNlcHQgS2V5Ym9hcmRJbnRlcnJ1cHQ6X2RhcHVudGFfY2ljaV8oIlxuJXPilaDilZDilZBbJXPigKIlc10gJXNCZXJoYXNpbCBEdW1wICVzIElEIERhcmkgJXMiJShPLFAsTyxQLGxlbihfZGFwdW50YV9kYXB1bnRhXyhzZWxmLmZsKS5yZWFkKCkuc3BsaXRsaW5lcygpKSxzZWxmLmxpc3RlZC5nZXQoIm5hbWUiKSkpO3JldHVybiBjcmFjayhzZWxmLmZsKQ0KICAgICAgICAgICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIF9lcnJvcl86X2RhcHVudGFfY2ljaV8oJ1xuJXPilZrilZDilZBbJXMhJXNdICVzRXJyb3IgRGkgQmFnaWFuIDogJXMnJShNLFAsTSxQLF9lcnJvcl8pKTtfY2ljaV9jaWNpXygpDQogICAgICAgICAgICAgICAgZWxpZiB4ZCBpbiBbJ3UnLCdVJywnMiddOg0KICAgICAgICAgICAgICAgICAgICB0cnk6c2VsZi5kdW1wX3VzZXJuYW1lKCJodHRwczovL20uZmFjZWJvb2suY29tL2dyb3Vwcy8iK2lkKTtfZGFwdW50YV9jaWNpXygiXG4lc+KVoOKVkOKVkFslc+KAoiVzXSAlc0Jlcmhhc2lsIER1bXAgJXMgSUQgRGFyaSAlcyIlKE8sUCxPLFAsbGVuKF9kYXB1bnRhX2RhcHVudGFfKHNlbGYuZmwpLnJlYWQoKS5zcGxpdGxpbmVzKCkpLHNlbGYubGlzdGVkLmdldCgibmFtZSIpKSk7cmV0dXJuIGNyYWNrKHNlbGYuZmwpDQogICAgICAgICAgICAgICAgICAgIGV4Y2VwdCBLZXlib2FyZEludGVycnVwdDpfZGFwdW50YV9jaWNpXygiXG4lc+KVoOKVkOKVkFslc+KAoiVzXSAlc0Jlcmhhc2lsIER1bXAgJXMgSUQgRGFyaSAlcyIlKE8sUCxPLFAsbGVuKF9kYXB1bnRhX2RhcHVudGFfKHNlbGYuZmwpLnJlYWQoKS5zcGxpdGxpbmVzKCkpLHNlbGYubGlzdGVkLmdldCgibmFtZSIpKSk7cmV0dXJuIGNyYWNrKHNlbGYuZmwpDQogICAgICAgICAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgX2Vycm9yXzpfZGFwdW50YV9jaWNpXygnXG4lc+KVmuKVkOKVkFslcyElc10gJXNFcnJvciBEaSBCYWdpYW4gOiAlcyclKE0sUCxNLFAsX2Vycm9yXykpO19jaWNpX2NpY2lfKCkNCiAgICAgICAgICAgICAgICBlbHNlOmphbGFuKCclc+KVmuKVkOKVkFslcyElc10gJXNJc2kgWWFuZyBCZW5hciclKE0sUCxNLFApKTttZW51KCkgICAgDQogICAgZGVmIHNlYXJjaChzZWxmKToNCiAgICAgICAgd2hpdGVsaXN0PVtdO3E9X2NpY2lfZGFwdW50YV8oJyVz4pWg4pWQ4pWQWyVz4oCiJXNdICVzTmFtYSA6ICclKE8sUCxPLFApKS5sb3dlcigpDQogICAgICAgIGlmIHE9PScnOnNlbGYuc2VhcmNoKCkNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIGZvciBlLGkgaW4gZW51bWVyYXRlKHNlbGYuZ2xpc3QpOg0KICAgICAgICAgICAgICAgIGlmIHEgaW4gaS5nZXQoIm5hbWUiKS5sb3dlcigpOndoaXRlbGlzdC5hcHBlbmQoaSk7X2RhcHVudGFfY2ljaV8oJyVz4pWg4pWQ4pWQWyVzJXMlc10gJXMlcyclKE8sUCxsZW4od2hpdGVsaXN0KSxPLFAsaS5nZXQoIm5hbWUiKS5yZXBsYWNlKHEsIiVzIiUocSkpKSkNCiAgICAgICAgICAgIGlmIGxlbih3aGl0ZWxpc3QpPT0wOmphbGFuKCclc+KVmuKVkOKVkFslcyElc10gJXNHcnVwIFByaXZhdCBBdGF1IElEIFNhbGFoJyUoTSxQLE0sUCkpO21lbnUoKQ0KICAgICAgICAgICAgZWxzZTpzZWxmLmNob2ljZSh3aGl0ZWxpc3QscSkNCiAgICBkZWYgY2hvaWNlKHNlbGYsIHdoaXRlbGlzdCxxKToNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgc2VsZi5saXN0ZWQ9d2hpdGVsaXN0W2ludChfY2ljaV9kYXB1bnRhXygnJXPilaDilZDilZBbJXPigKIlc10gJXNQaWxpaCA6ICclKE8sUCxPLFApKSktaW50KDEpXTtzZWxmLmYocSk7X2RhcHVudGFfY2ljaV8oJyVz4pWRJyUoTykpO19kYXB1bnRhX2NpY2lfKCIlc+KVoOKVkOKVkFslc+KAoiVzXSAlc05hbWEgOiAlcyIlKE8sUCxPLFAsc2VsZi5saXN0ZWQuZ2V0KCJuYW1lIikpKTt4ZCA9IF9jaWNpX2RhcHVudGFfKCclc+KVoOKVkOKVkFslc+KAoiVzXSAlc0R1bXAgSUQvVXNlcm5hbWU/IFtpL3VdIDogJyUoTyxQLE8sUCkpO19kYXB1bnRhX2NpY2lfKCIlc+KVoOKVkOKVkFslc+KAoiVzXSAlc1Rla2FuIGN0cmwrYyBVbnR1ayBCZXJoZW50aSBEdW1wIiUoTyxQLE8sUCkpDQogICAgICAgICAgICBpZiB4ZCBpbiBbJyddOmphbGFuKCclc+KVmuKVkOKVkFslcyElc10gJXNJc2kgWWFuZyBCZW5hciclKE0sUCxNLFApKTttZW51KCkNCiAgICAgICAgICAgIGVsaWYgeGQgaW4gWydpJywnSScsJzEnXToNCiAgICAgICAgICAgICAgICB0cnk6c2VsZi5kdW1wX2lkKCJodHRwczovL20uZmFjZWJvb2suY29tL2dyb3Vwcy8iK3NlbGYubGlzdGVkLmdldCgiaWQiKSk7X2RhcHVudGFfY2ljaV8oIlxuJXPilaDilZDilZBbJXPigKIlc10gJXNCZXJoYXNpbCBEdW1wICVzIElEIERhcmkgJXMiJShPLFAsTyxQLGxlbihfZGFwdW50YV9kYXB1bnRhXyhzZWxmLmZsKS5yZWFkKCkuc3BsaXRsaW5lcygpKSxzZWxmLmxpc3RlZC5nZXQoIm5hbWUiKSkpO3JldHVybiBjcmFjayhzZWxmLmZsKQ0KICAgICAgICAgICAgICAgIGV4Y2VwdCBLZXlib2FyZEludGVycnVwdDpfZGFwdW50YV9jaWNpXygiXG4lc+KVoOKVkOKVkFslc+KAoiVzXSAlc0Jlcmhhc2lsIER1bXAgJXMgSUQgRGFyaSAlcyIlKE8sUCxPLFAsbGVuKF9kYXB1bnRhX2RhcHVudGFfKHNlbGYuZmwpLnJlYWQoKS5zcGxpdGxpbmVzKCkpLHNlbGYubGlzdGVkLmdldCgibmFtZSIpKSk7cmV0dXJuIGNyYWNrKHNlbGYuZmwpDQogICAgICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBfZXJyb3JfOl9kYXB1bnRhX2NpY2lfKCdcbiVz4pWa4pWQ4pWQWyVzISVzXSAlc0Vycm9yIERpIEJhZ2lhbiA6ICVzJyUoTSxQLE0sUCxfZXJyb3JfKSk7X2NpY2lfY2ljaV8oKQ0KICAgICAgICAgICAgZWxpZiB4ZCBpbiBbJ3UnLCdVJywnMiddOg0KICAgICAgICAgICAgICAgIHRyeTpzZWxmLmR1bXBfdXNlcm5hbWUoImh0dHBzOi8vbS5mYWNlYm9vay5jb20vZ3JvdXBzLyIrc2VsZi5saXN0ZWQuZ2V0KCJpZCIpKTtfZGFwdW50YV9jaWNpXygiXG4lc+KVoOKVkOKVkFslc+KAoiVzXSAlc0Jlcmhhc2lsIER1bXAgJXMgSUQgRGFyaSAlcyIlKE8sUCxPLFAsbGVuKF9kYXB1bnRhX2RhcHVudGFfKHNlbGYuZmwpLnJlYWQoKS5zcGxpdGxpbmVzKCkpLHNlbGYubGlzdGVkLmdldCgibmFtZSIpKSk7cmV0dXJuIGNyYWNrKHNlbGYuZmwpDQogICAgICAgICAgICAgICAgZXhjZXB0IEtleWJvYXJkSW50ZXJydXB0Ol9kYXB1bnRhX2NpY2lfKCJcbiVz4pWg4pWQ4pWQWyVz4oCiJXNdICVzQmVyaGFzaWwgRHVtcCAlcyBJRCBEYXJpICVzIiUoTyxQLE8sUCxsZW4oX2RhcHVudGFfZGFwdW50YV8oc2VsZi5mbCkucmVhZCgpLnNwbGl0bGluZXMoKSksc2VsZi5saXN0ZWQuZ2V0KCJuYW1lIikpKTtyZXR1cm4gY3JhY2soc2VsZi5mbCkNCiAgICAgICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIF9lcnJvcl86X2RhcHVudGFfY2ljaV8oJ1xuJXPilZrilZDilZBbJXMhJXNdICVzRXJyb3IgRGkgQmFnaWFuIDogJXMnJShNLFAsTSxQLF9lcnJvcl8pKTtfY2ljaV9jaWNpXygpDQogICAgICAgICAgICBlbHNlOmphbGFuKCclc+KVmuKVkOKVkFslcyElc10gJXNJc2kgWWFuZyBCZW5hciclKE0sUCxNLFApKTttZW51KCkNCiAgICAgICAgZXhjZXB0IEtleWJvYXJkSW50ZXJydXB0Ol9kYXB1bnRhX2NpY2lfKCJcbiVz4pWg4pWQ4pWQWyVz4oCiJXNdICVzQmVyaGFzaWwgRHVtcCAlcyBJRCBEYXJpICVzIiUoTyxQLE8sUCxsZW4oX2RhcHVudGFfZGFwdW50YV8oc2VsZi5mbCkucmVhZCgpLnNwbGl0bGluZXMoKSksc2VsZi5saXN0ZWQuZ2V0KCJuYW1lIikpKTtyZXR1cm4gY3JhY2soc2VsZi5mbCkNCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBfZXJyb3JfOl9kYXB1bnRhX2NpY2lfKCdcbiVz4pWa4pWQ4pWQWyVzISVzXSAlc0Vycm9yIERpIEJhZ2lhbiA6ICVzJyUoTSxQLE0sUCxfZXJyb3JfKSk7X2NpY2lfY2ljaV8oKQ0KICAgIGRlZiBmKHNlbGYsaWQpOg0KICAgICAgICBzZWxmLmZsPShpZC5yZXBsYWNlKCcgJywnXycpKycuanNvbicpDQogICAgICAgIGlmIHNlbGYuZmw9PScnOnNlbGYuZigpDQogICAgICAgIHRyeTpvcy5yZW1vdmUoc2VsZi5mbCkNCiAgICAgICAgZXhjZXB0OnBhc3MNCiAgICAgICAgX2RhcHVudGFfZGFwdW50YV8oc2VsZi5mbCwidyIpLmNsb3NlKCkNCiAgICBkZWYgZHVtcF91c2VybmFtZShzZWxmLCB1cmwpOg0KICAgICAgICByPWJzNC5CZWF1dGlmdWxTb3VwKF9yZXFfZ2V0Xyh1cmwsY29va2llcz1zZWxmLmNvb2tpZXMsaGVhZGVycz1oZWFkZXJfZ3J1cCkudGV4dCwiaHRtbC5wYXJzZXIiKTtfZGFwdW50YV9jaWNpXygiXHIlc+KVoOKVkOKVkFslc+KAoiVzXSAlc1NlZGFuZyBNZW5nYW1iaWwgJXMgSUQiJShPLFAsTyxQLGxlbihfZGFwdW50YV9kYXB1bnRhXyhzZWxmLmZsKS5yZWFkKCkuc3BsaXRsaW5lcygpKSksIGVuZD0nICcpO3N5cy5zdGRvdXQuZmx1c2goKQ0KICAgICAgICBmb3IgaSBpbiByLmZpbmRfYWxsKCJoMyIpOg0KICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgIGlmIGxlbihiczQucmUuZmluZGFsbCgiXC8iLGkuZmluZCgiYSIsaHJlZj1UcnVlKS5nZXQoImhyZWYiKSkpPT0xOg0KICAgICAgICAgICAgICAgICAgICBvZ2VoPWkuZmluZCgiYSIsaHJlZj1UcnVlKQ0KICAgICAgICAgICAgICAgICAgICBpZiAicHJvZmlsZS5waHAiIGluIG9nZWguZ2V0KCJocmVmIik6DQogICAgICAgICAgICAgICAgICAgICAgICBhPSIiLmpvaW4oYnM0LnJlLmZpbmRhbGwoInByb2ZpbGVcLnBocFw/aWQ9KC4qPykmIixvZ2VoLmdldCgiaHJlZiIpKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGxlbihhKT09MDpjb250aW51ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBhIGluIF9kYXB1bnRhX2RhcHVudGFfKHNlbGYuZmwpLnJlYWQoKTpjb250aW51ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZTpfZGFwdW50YV9kYXB1bnRhXyhzZWxmLmZsLCJhKyIpLndyaXRlKCIlc+KAoiVzXG4iJShhLG9nZWgudGV4dCkpO2NvbnRpbnVlDQogICAgICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgICAgICBhPSIiLmpvaW4oYnM0LnJlLmZpbmRhbGwoIi8oLio/KVw/IixvZ2VoLmdldCgiaHJlZiIpKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGxlbihhKT09MDpjb250aW51ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBhIGluIF9kYXB1bnRhX2RhcHVudGFfKHNlbGYuZmwpLnJlYWQoKTpjb250aW51ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZTpfZGFwdW50YV9kYXB1bnRhXyhzZWxmLmZsLCJhKyIpLndyaXRlKCIlc+KAoiVzXG4iJShhLG9nZWgudGV4dCkpDQogICAgICAgICAgICBleGNlcHQ6Y29udGludWUNCiAgICAgICAgZm9yIGkgaW4gci5maW5kX2FsbCgiYSIsaHJlZj1UcnVlKToNCiAgICAgICAgICAgIGlmICJMaWhhdCBQb3N0aW5nYW4gTGFpbm55YSIgaW4gaS50ZXh0Og0KICAgICAgICAgICAgICAgIHdoaWxlIFRydWU6DQogICAgICAgICAgICAgICAgICAgIHRyeTpzZWxmLmR1bXBfdXNlcm5hbWUoImh0dHBzOi8vbS5mYWNlYm9vay5jb20vIitpLmdldCgiaHJlZiIpKTticmVhaw0KICAgICAgICAgICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6X2RhcHVudGFfY2ljaV8oJ1xyJXPilZrilZDilZBbJXMhJXNdICVzTWVuZ3VsYW5naSclKE0sUCxNLFApKTtjb250aW51ZQ0KICAgIGRlZiBkdW1wX2lkKHNlbGYsIHVybCk6DQogICAgICAgIHI9YnM0LkJlYXV0aWZ1bFNvdXAoX3JlcV9nZXRfKHVybCxjb29raWVzPXNlbGYuY29va2llcyxoZWFkZXJzPWhlYWRlcl9ncnVwKS50ZXh0LCJodG1sLnBhcnNlciIpO19kYXB1bnRhX2NpY2lfKCJcciVz4pWg4pWQ4pWQWyVz4oCiJXNdICVzU2VkYW5nIE1lbmdhbWJpbCAlcyBJRCIlKE8sUCxPLFAsbGVuKF9kYXB1bnRhX2RhcHVudGFfKHNlbGYuZmwpLnJlYWQoKS5zcGxpdGxpbmVzKCkpKSwgZW5kPScgJyk7c3lzLnN0ZG91dC5mbHVzaCgpDQogICAgICAgIGZvciBpIGluIHIuZmluZF9hbGwoImgzIik6DQogICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgaWYgbGVuKGJzNC5yZS5maW5kYWxsKCJcLyIsaS5maW5kKCJhIixocmVmPVRydWUpLmdldCgiaHJlZiIpKSk9PTE6DQogICAgICAgICAgICAgICAgICAgIG9nZWg9aS5maW5kKCJhIixocmVmPVRydWUpDQogICAgICAgICAgICAgICAgICAgIGlmICJwcm9maWxlLnBocCIgaW4gb2dlaC5nZXQoImhyZWYiKToNCiAgICAgICAgICAgICAgICAgICAgICAgIGE9IiIuam9pbihiczQucmUuZmluZGFsbCgicHJvZmlsZVwucGhwXD9pZD0oLio/KSYiLG9nZWguZ2V0KCJocmVmIikpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgbGVuKGEpPT0wOmNvbnRpbnVlDQogICAgICAgICAgICAgICAgICAgICAgICBlbGlmIGEgaW4gX2RhcHVudGFfZGFwdW50YV8oc2VsZi5mbCkucmVhZCgpOmNvbnRpbnVlDQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlOl9kYXB1bnRhX2RhcHVudGFfKHNlbGYuZmwsImErIikud3JpdGUoIiVz4oCiJXNcbiIlKGEsb2dlaC50ZXh0KSk7Y29udGludWUNCiAgICAgICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgICAgIGE9IiIuam9pbihiczQucmUuZmluZGFsbCgiLyguKj8pXD8iLG9nZWguZ2V0KCJocmVmIikpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgbGVuKGEpPT0wOmNvbnRpbnVlDQogICAgICAgICAgICAgICAgICAgICAgICBlbGlmIGEgaW4gX2RhcHVudGFfZGFwdW50YV8oc2VsZi5mbCkucmVhZCgpOmNvbnRpbnVlDQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlOl9kYXB1bnRhX2RhcHVudGFfKHNlbGYuZmwsImErIikud3JpdGUoIiVz4oCiJXNcbiIlKF9nZXRfaWRfKGEpLG9nZWgudGV4dCkpDQogICAgICAgICAgICBleGNlcHQ6Y29udGludWUNCiAgICAgICAgZm9yIGkgaW4gci5maW5kX2FsbCgiYSIsaHJlZj1UcnVlKToNCiAgICAgICAgICAgIGlmICJMaWhhdCBQb3N0aW5nYW4gTGFpbm55YSIgaW4gaS50ZXh0Og0KICAgICAgICAgICAgICAgIHdoaWxlIFRydWU6DQogICAgICAgICAgICAgICAgICAgIHRyeTpzZWxmLmR1bXBfaWQoImh0dHBzOi8vbS5mYWNlYm9vay5jb20vIitpLmdldCgiaHJlZiIpKTticmVhaw0KICAgICAgICAgICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6X2RhcHVudGFfY2ljaV8oJ1xyJXPilZrilZDilZBbJXMhJXNdICVzTWVuZ3VsYW5naSclKE0sUCxNLFApKTtjb250aW51ZQ0KDQojIyMgQ29udmVydCBVc2VybmFtZSBUbyBJRA0KZGVmIF9nZXRfaWRfKHVzZXJuYW1lKToNCiAgICB1cmwgPSAiaHR0cHM6Ly9sb29rdXAtaWQuY29tLyMiDQogICAgd2l0aCBfcmVxX3Nlc18gYXMgZGV2Og0KICAgICAgICBwYXlsb2FkID0geyJmYnVybCI6ICJodHRwczovL20uZmFjZWJvb2suY29tL3t9Ii5mb3JtYXQodXNlcm5hbWUpLCAiY2hlY2siOiAiTG9va3VwIn0NCiAgICAgICAgaWYgImZhY2Vib29rIiBpbiB1c2VybmFtZTpwYXlsb2FkID0geyJmYnVybCI6IHVzZXJuYW1lLCAiY2hlY2siOiAiTG9va3VwIn0NCiAgICAgICAgZGF0YV9kZXYgPSBkZXYucG9zdCh1cmwsIGRhdGE9cGF5bG9hZCkuY29udGVudDtzb3BfID0gcGFyKGRhdGFfZGV2LCAiaHRtbC5wYXJzZXIiKTtpZF8gPSBzb3BfLmZpbmQoInNwYW4iLCBpZD0iY29kZSIpO3VzZXJfZ2V0X2lkID0gaWRfLnRleHQNCiAgICAgICAgcmV0dXJuIHVzZXJfZ2V0X2lkDQoNCiMjIyBEdW1wIElEIEZyb20gTmFtZQ0KZGVmIGR1bXBfbmFtZShfZGFwdW50YV8pOg0KICAgIF9kYXB1bnRhX2NpY2lfKCclc+KVoOKVkOKVkFslc+KAoiVzXSAlc0NvbnRvaCA6IERhcHVudGEsUml6YWwsQW5nZ2EnJShPLFAsTyxQKSk7X19uYW1lX18gPSBfY2ljaV9kYXB1bnRhXygnJXPilaDilZDilZBbJXPigKIlc10gJXNNYXN1a2thbiBOYW1hIDogJyUoTyxQLE8sUCkpLnNwbGl0KCcsJyk7X2ZpbGVfID0gJ2R1bXBfbmFtZS5qc29uJw0KICAgIHRyeTpvcy5yZW1vdmUoX2ZpbGVfKQ0KICAgIGV4Y2VwdDpwYXNzDQogICAgZm9yIF9uYW1lXyBpbiBfX25hbWVfXzpfdXJsXyA9ICJodHRwczovL21iYXNpYy5mYWNlYm9vay5jb20vc2VhcmNoL3Blb3BsZS8/cT0iK19uYW1lXztjYXJpX25hbWEoX2ZpbGVfLF9kYXB1bnRhXyxfdXJsXykNCiAgICBfYnVrYV9maWxlXyA9IF9kYXB1bnRhX2RhcHVudGFfKF9maWxlXywncicpLnJlYWQoKS5zcGxpdGxpbmVzKCk7X2RhcHVudGFfY2ljaV8oIlxuJXPilaDilZDilZBbJXPigKIlc10gJXNUb3RhbCBJRCA6ICVzIiUoTyxQLE8sUCxzdHIobGVuKF9idWthX2ZpbGVfKSkpKQ0KICAgIHJldHVybiBjcmFjayhfZmlsZV8pDQpkZWYgY2FyaV9uYW1hKF9maWxlXyxfY29va2llc18sX3VybF8pOg0KICAgIF9kYXB1bnRhX2RhcHVudGFfKF9maWxlXywiYSsiKTtfcmVxX3Nlc19kZXZfID0gYnM0LkJlYXV0aWZ1bFNvdXAoX3JlcV9nZXRfKF91cmxfLCBjb29raWVzPV9jb29raWVzXyxoZWFkZXJzPWhlYWRlcl9uYW1hKS50ZXh0LCJodG1sLnBhcnNlciIpDQogICAgZm9yIF9kYXB1bnRhX2Rldl8gaW4gX3JlcV9zZXNfZGV2Xy5maW5kX2FsbCgiYSIsaHJlZj1UcnVlKToNCiAgICAgICAgX2RhcHVudGFfY2ljaV8gKCJcciVz4pWg4pWQ4pWQWyVz4oCiJXNdICVzU2VkYW5nIE1lbmdhbWJpbCAlcyBJRCIlKE8sUCxPLFAsbGVuKF9kYXB1bnRhX2RhcHVudGFfKF9maWxlXykucmVhZCgpLnNwbGl0bGluZXMoKSkpLGVuZD0nJyk7c3lzLnN0ZG91dC5mbHVzaCgpDQogICAgICAgIGlmICI8aW1nIGFsdD0iIGluIHN0cihfZGFwdW50YV9kZXZfKToNCiAgICAgICAgICAgIGlmICJob21lLnBocCIgaW4gc3RyKF9kYXB1bnRhX2Rldl9bImhyZWYiXSk6Y29udGludWUNCiAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgX3N0cl9kZXZfID0gc3RyKF9kYXB1bnRhX2Rldl9bImhyZWYiXSkNCiAgICAgICAgICAgICAgICBpZiAicHJvZmlsZS5waHAiIGluIF9zdHJfZGV2XzoNCiAgICAgICAgICAgICAgICAgICAgX25hbWVfID0gX2RhcHVudGFfZGV2Xy5maW5kKCJpbWciKS5nZXQoImFsdCIpLnJlcGxhY2UoIiwgcHJvZmlsZSBwaWN0dXJlIiwiIik7X2ZpbmRfID0gYnM0LnJlLmZpbmRhbGwoIi9wcm9maWxlXC5waHBcP2lkPSguKj8pJiIsX3N0cl9kZXZfKQ0KICAgICAgICAgICAgICAgICAgICBpZiBsZW4gKF9maW5kXykgIT0wOg0KICAgICAgICAgICAgICAgICAgICAgICAgX3VzZXJfID0gIiIuam9pbihfZmluZF8pDQogICAgICAgICAgICAgICAgICAgICAgICBpZiBfdXNlcl8gaW4gX2RhcHVudGFfZGFwdW50YV8oX2ZpbGVfKS5yZWFkKCk6cGFzcw0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZTpfZGFwdW50YV9kYXB1bnRhXyhfZmlsZV8sImErIikud3JpdGUoIiVz4oCiJXNcbiIlKF91c2VyXyxfbmFtZV8pKQ0KICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgIF9maW5kXyA9IGJzNC5yZS5maW5kYWxsKCIvKC4qPylcPyIsX3N0cl9kZXZfKTtfbmFtZV8gPSBfZGFwdW50YV9kZXZfLmZpbmQoImltZyIpLmdldCgiYWx0IikucmVwbGFjZSgiLCBwcm9maWxlIHBpY3R1cmUiLCIiKQ0KICAgICAgICAgICAgICAgICAgICBpZiBsZW4oX2ZpbmRfKSAhPTA6DQogICAgICAgICAgICAgICAgICAgICAgICBfdXNlcl89IiIuam9pbihfZmluZF8pDQogICAgICAgICAgICAgICAgICAgICAgICBpZiBfdXNlcl8gaW4gX2RhcHVudGFfZGFwdW50YV8oX2ZpbGVfKS5yZWFkKCk6cGFzcw0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZTpfZGFwdW50YV9kYXB1bnRhXyhfZmlsZV8sImErIikud3JpdGUoIiVz4oCiJXNcbiIlKF91c2VyXyxfbmFtZV8pKQ0KICAgICAgICBpZiAiTGloYXQgSGFzaWwgU2VsYW5qdXRueWEiIGluIF9kYXB1bnRhX2Rldl8udGV4dDpjYXJpX25hbWEoX2ZpbGVfLF9jb29raWVzXyxfZGFwdW50YV9kZXZfWyJocmVmIl0pDQoNCiMjIyBEdW1wIElEIEZyb20gTWVzc2FnZQ0KY2xhc3MgZHVtcF9wZXNhbjoNCiAgICBkZWYgX19pbml0X18oc2VsZixfY29va2llc18sX25hbWFfLF9pZF8pOg0KICAgICAgICBzZWxmLmNvb2tpZXMgPSBfY29va2llc187c2VsZi5pZCA9IF9pZF87c2VsZi5maWxlcyA9IChfbmFtYV8rJy5qc29uJykucmVwbGFjZSgiICIsIl8iKTtfZGFwdW50YV9kYXB1bnRhXyhzZWxmLmZpbGVzLCJ3IikuY2xvc2UoKTtzZWxmLmR1bXAoImh0dHBzOi8vbS5mYWNlYm9vay5jb20vbWVzc2FnZXMiKQ0KICAgIGRlZiBkdW1wKHNlbGYsdXJsKToNCiAgICAgICAgX3JlcV9zZXNfZGV2XyA9IGJzNC5CZWF1dGlmdWxTb3VwKF9yZXFfZ2V0Xyh1cmwsaGVhZGVycz1oZWFkZXJfbmFtYSxjb29raWVzPXNlbGYuY29va2llcykudGV4dCwiaHRtbC5wYXJzZXIiKQ0KICAgICAgICBmb3IgX2Rldl8gaW4gX3JlcV9zZXNfZGV2Xy5maW5kX2FsbCgiYSIsaHJlZj1UcnVlKToNCiAgICAgICAgICAgIGlmICIvbWVzc2FnZXMvcmVhZCIgaW4gX2Rldl8uZ2V0KCJocmVmIik6DQogICAgICAgICAgICAgICAgX3NvdXBfID0gYnM0LnJlLmZpbmRhbGwoImNpZFwuY1wuKC4qPyklM0EoLio/KSYiLF9kZXZfLmdldCgiaHJlZiIpKQ0KICAgICAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICAgICAgZm9yIF91c2VyXyBpbiBsaXN0KF9zb3VwXy5wb3AoKSk6DQogICAgICAgICAgICAgICAgICAgICAgICBpZiBfdXNlcl8gaW4gc2VsZi5pZDpjb250aW51ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAicGVuZ2d1bmEgZmFjZWJvb2siIGluIF9kZXZfLnRleHQubG93ZXIoKTpjb250aW51ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9kYXB1bnRhX2RhcHVudGFfKHNlbGYuZmlsZXMsImErIikud3JpdGUoIiVz4oCiJXNcbiIlKF91c2VyXyxfZGV2Xy50ZXh0KSk7X2RhcHVudGFfY2ljaV8oIlxyJXPilaDilZDilZBbJXPigKIlc10gJXNTZWRhbmcgTWVuZ2FtYmlsICVzIElEIiUoTyxQLE8sUCxsZW4oX2RhcHVudGFfZGFwdW50YV8oc2VsZi5maWxlcykucmVhZCgpLnNwbGl0bGluZXMoKSkpLGVuZD0nJyk7c3lzLnN0ZG91dC5mbHVzaCgpDQogICAgICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOmNvbnRpbnVlDQogICAgICAgICAgICBpZiAiTGloYXQgUGVzYW4gU2ViZWx1bW55YSIgaW4gX2Rldl8udGV4dDpzZWxmLmR1bXAoImh0dHBzOi8vbS5mYWNlYm9vay5jb20vIitfZGV2Xy5nZXQoImhyZWYiKSkNCiAgICAgICAgX2J1a2FfZmlsZV8gPSBfZGFwdW50YV9kYXB1bnRhXyhzZWxmLmZpbGVzLCdyJykucmVhZCgpLnNwbGl0bGluZXMoKTtfZGFwdW50YV9jaWNpXygiXG4lc+KVoOKVkOKVkFslc+KAoiVzXSAlc1RvdGFsIElEIDogJXMiJShPLFAsTyxQLHN0cihsZW4oX2J1a2FfZmlsZV8pKSkpDQogICAgICAgIHJldHVybiBjcmFjayhzZWxmLmZpbGVzKQ0KDQojIyMgRHVtcCBJRCBGcm9tIEZpbGVzDQpkZWYgZHVtcF9maWxlKCk6DQogICAgX2RhcHVudGFfY2ljaV8oIiVz4pWg4pWQ4pWQWyVz4oCiJXNdICVzQ29udG9oIDogL3NkY2FyZC9kYXB1bnRhLmpzb24iJShPLFAsTyxQKSk7X2ZpbGVzXyA9IF9jaWNpX2RhcHVudGFfKCIlc+KVoOKVkOKVkFslc+KAoiVzXSAlc01hc3Vra2FuIE5hbWEgRmlsZSA6ICIlKE8sUCxPLFApKTtfc2VrYXRfID0gX2NpY2lfZGFwdW50YV8oIiVz4pWg4pWQ4pWQWyVz4oCiJXNdICVzUGVtaXNhaCBJRCAmIE5hbWEgOiAiJShPLFAsTyxQKSkNCiAgICB0cnk6X2JhY2FfID0gX2RhcHVudGFfZGFwdW50YV8oX2ZpbGVzXywncicpLnJlYWQoKTtfYnVrdV8gPSBfYmFjYV8ucmVwbGFjZShfc2VrYXRfLCfigKInKTtfZGFwdW50YV9kYXB1bnRhXyhfZmlsZXNfLCd3Jykud3JpdGUoX2J1a3VfKQ0KICAgIGV4Y2VwdDpqYWxhbignJXPilZrilZDilZBbJXMhJXNdICVzRmlsZSBUaWRhayBEaXRlbXVrYW4nJShNLFAsTSxQKSk7bWVudSgpDQogICAgcmV0dXJuIGNyYWNrKF9maWxlc18pDQoNCiMjIyBEdW1wIElEIEZyb20gRW1haWwNCmRlZiBkdW1wX2VtYWlsKCk6DQogICAgX2RhcHVudGFfY2ljaV8oIiVz4pWg4pWQ4pWQWyVz4oCiJXNdICVzQ29udG9oIDogRGFwdW50YSBLaHVyYXlyYSIlKE8sUCxPLFApKTtfcXVlcnlfID0gX2NpY2lfZGFwdW50YV8oIiVz4pWg4pWQ4pWQWyVz4oCiJXNdICVzTWFzdWtrYW4gTmFtYSA6ICIlKE8sUCxPLFApKS5sb3dlcigpDQogICAgaWYgbGVuKF9xdWVyeV8pIDwgMzpqYWxhbignJXPilZrilZDilZBbJXMhJXNdICVzTmFtYSBIYXJ1cyBMZWJpaCBEYXJpIDIgRGlnaXQnJShNLFAsTSxQKSk7dGltZS5zbGVlcCgyKTttZW51KCkNCiAgICBfZGFwdW50YV9jaWNpXygiJXPilaDilZDilZBbJXPigKIlc10gJXNDb250b2ggOiBnbWFpbC5jb20iJShPLFAsTyxQKSk7X2RvbWFpbl8gPSBfY2ljaV9kYXB1bnRhXygiJXPilaDilZDilZBbJXPigKIlc10gJXNNYXN1a2thbiBEb21haW4gOiAiJShPLFAsTyxQKSkubG93ZXIoKQ0KICAgIGlmICdAJyBpbiBfZG9tYWluXzpfZG9tYWluXyA9IF9kb21haW5fLnNwbGl0KCdAJylbMV0NCiAgICBfbGltaXRfYXdhbF8gPSBpbnQoX2NpY2lfZGFwdW50YV8oIiVz4pWg4pWQ4pWQWyVz4oCiJXNdICVzU2V0IEFuZ2thIEF3YWwgOiAiJShPLFAsTyxQKSkpO19saW1pdF9ha2hpcl89IGludChfY2ljaV9kYXB1bnRhXygiJXPilaDilZDilZBbJXPigKIlc10gJXNTZXQgQW5na2EgQWtoaXIgOiAiJShPLFAsTyxQKSkpO19maWxlXyA9IChfcXVlcnlfKyIuanNvbiIpLnJlcGxhY2UoIiAiLCJfIikNCiAgICB0cnk6b3MucmVtb3ZlKF9maWxlXykNCiAgICBleGNlcHQ6cGFzcw0KICAgIGV4ZWNfZW1haWwoX3F1ZXJ5XyxfZG9tYWluXyxfbGltaXRfYXdhbF8sX2xpbWl0X2FraGlyXyxfZmlsZV8pDQpkZWYgZXhlY19lbWFpbChfX3F1ZXJ5X18sX2RvbWFpbl8sX2xpbWl0X2F3YWxfLF9saW1pdF9ha2hpcl8sX2ZpbGVfKToNCiAgICBfaGl0dW5nX2VtYWlsXzFfID0gX2xpbWl0X2F3YWxfKzE7X2hpdHVuZ19lbWFpbF8yXyA9IF9saW1pdF9hd2FsXysxO19oaXR1bmdfZW1haWxfM18gPSBfbGltaXRfYXdhbF8rMTtfaGl0dW5nX2VtYWlsX2Z1bGxfID0gX2xpbWl0X2F3YWxfKzENCiAgICBpZiAnICcgaW4gX19xdWVyeV9fOg0KICAgICAgICB0cnk6X3F1ZXJ5XzFfID0gX19xdWVyeV9fLnNwbGl0KCcgJylbMF0NCiAgICAgICAgZXhjZXB0OnBhc3MNCiAgICAgICAgdHJ5Ol9xdWVyeV8yXyA9IF9fcXVlcnlfXy5zcGxpdCgnICcpWzFdDQogICAgICAgIGV4Y2VwdDpwYXNzDQogICAgICAgIHRyeTpfcXVlcnlfM18gPSBfX3F1ZXJ5X18uc3BsaXQoJyAnKVsyXQ0KICAgICAgICBleGNlcHQ6cGFzcw0KICAgIGVsaWYgJy4nIGluIF9fcXVlcnlfXzoNCiAgICAgICAgdHJ5Ol9xdWVyeV8xXyA9IF9fcXVlcnlfXy5zcGxpdCgnLicpWzBdDQogICAgICAgIGV4Y2VwdDpwYXNzDQogICAgICAgIHRyeTpfcXVlcnlfMl8gPSBfX3F1ZXJ5X18uc3BsaXQoJy4nKVsxXQ0KICAgICAgICBleGNlcHQ6cGFzcw0KICAgICAgICB0cnk6X3F1ZXJ5XzNfID0gX19xdWVyeV9fLnNwbGl0KCcuJylbMl0NCiAgICAgICAgZXhjZXB0OnBhc3MNCiAgICBlbGlmICdfJyBpbiBfX3F1ZXJ5X186DQogICAgICAgIHRyeTpfcXVlcnlfMV8gPSBfX3F1ZXJ5X18uc3BsaXQoJ18nKVswXQ0KICAgICAgICBleGNlcHQ6cGFzcw0KICAgICAgICB0cnk6X3F1ZXJ5XzJfID0gX19xdWVyeV9fLnNwbGl0KCdfJylbMV0NCiAgICAgICAgZXhjZXB0OnBhc3MNCiAgICAgICAgdHJ5Ol9xdWVyeV8zXyA9IF9fcXVlcnlfXy5zcGxpdCgnXycpWzJdDQogICAgICAgIGV4Y2VwdDpwYXNzDQogICAgZWxpZiAnLScgaW4gX19xdWVyeV9fOg0KICAgICAgICB0cnk6X3F1ZXJ5XzFfID0gX19xdWVyeV9fLnNwbGl0KCctJylbMF0NCiAgICAgICAgZXhjZXB0OnBhc3MNCiAgICAgICAgdHJ5Ol9xdWVyeV8yXyA9IF9fcXVlcnlfXy5zcGxpdCgnLScpWzFdDQogICAgICAgIGV4Y2VwdDpwYXNzDQogICAgICAgIHRyeTpfcXVlcnlfM18gPSBfX3F1ZXJ5X18uc3BsaXQoJy0nKVsyXQ0KICAgICAgICBleGNlcHQ6cGFzcw0KICAgIGVsc2U6DQogICAgICAgIHRyeTpfcXVlcnlfMV8gPSBfX3F1ZXJ5X18NCiAgICAgICAgZXhjZXB0OnBhc3MNCiAgICB0cnkgOg0KICAgICAgICBmb3IgX2p1bWxhaF8gaW4gcmFuZ2UoX2xpbWl0X2F3YWxfLF9saW1pdF9ha2hpcl8pOg0KICAgICAgICAgICAgdHJ5Om5hbWEgPSBfcXVlcnlfMV87ZW1haWwgPSAoJyVzJXNAJXMnJShfcXVlcnlfMV8sc3RyKF9oaXR1bmdfZW1haWxfMV8pLF9kb21haW5fKSk7X2RhcHVudGFfZGFwdW50YV8oX2ZpbGVfLCdhKycpLndyaXRlKCclc+KAoiVzXG4nJShlbWFpbCxuYW1hKSk7X2hpdHVuZ19lbWFpbF8xXyArPSAxDQogICAgICAgICAgICBleGNlcHQ6Y29udGludWUNCiAgICAgICAgZm9yIF9qdW1sYWhfIGluIHJhbmdlKF9saW1pdF9hd2FsXyxfbGltaXRfYWtoaXJfKToNCiAgICAgICAgICAgIHRyeTpuYW1hID0gX3F1ZXJ5XzJfO2VtYWlsID0gKCclcyVzQCVzJyUoX3F1ZXJ5XzJfLHN0cihfaGl0dW5nX2VtYWlsXzJfKSxfZG9tYWluXykpO19kYXB1bnRhX2RhcHVudGFfKF9maWxlXywnYSsnKS53cml0ZSgnJXPigKIlc1xuJyUoZW1haWwsbmFtYSkpO19oaXR1bmdfZW1haWxfMl8gKz0gMQ0KICAgICAgICAgICAgZXhjZXB0OmNvbnRpbnVlDQogICAgICAgIGZvciBfanVtbGFoXyBpbiByYW5nZShfbGltaXRfYXdhbF8sX2xpbWl0X2FraGlyXyk6DQogICAgICAgICAgICB0cnk6bmFtYSA9IF9xdWVyeV8zXztlbWFpbCA9ICgnJXMlc0AlcyclKF9xdWVyeV8zXyxzdHIoX2hpdHVuZ19lbWFpbF8zXyksX2RvbWFpbl8pKTtfZGFwdW50YV9kYXB1bnRhXyhfZmlsZV8sJ2ErJykud3JpdGUoJyVz4oCiJXNcbiclKGVtYWlsLG5hbWEpKTtfaGl0dW5nX2VtYWlsXzNfICs9IDENCiAgICAgICAgICAgIGV4Y2VwdDpjb250aW51ZQ0KICAgICAgICBmb3IgX2p1bWxhaF8gaW4gcmFuZ2UoX2xpbWl0X2F3YWxfLF9saW1pdF9ha2hpcl8pOg0KICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgIGlmICcuJyBpbiBfX3F1ZXJ5X186X3F1ZXJ5XyA9IF9fcXVlcnlfXztuYW1hID0gX19xdWVyeV9fLnJlcGxhY2UoJy4nLCcgJykNCiAgICAgICAgICAgICAgICBlbGlmICdfJyBpbiBfX3F1ZXJ5X186X3F1ZXJ5XyA9IF9fcXVlcnlfXztuYW1hID0gX19xdWVyeV9fLnJlcGxhY2UoJ18nLCcgJykNCiAgICAgICAgICAgICAgICBlbGlmICctJyBpbiBfX3F1ZXJ5X186X3F1ZXJ5XyA9IF9fcXVlcnlfXztuYW1hID0gX19xdWVyeV9fLnJlcGxhY2UoJy0nLCcgJykNCiAgICAgICAgICAgICAgICBlbHNlOl9xdWVyeV8gPSBfX3F1ZXJ5X18ucmVwbGFjZSgnICcsJycpO25hbWEgPSBfX3F1ZXJ5X18NCiAgICAgICAgICAgICAgICBlbWFpbCA9ICgnJXMlc0AlcyclKF9xdWVyeV8sc3RyKF9oaXR1bmdfZW1haWxfZnVsbF8pLF9kb21haW5fKSk7X2RhcHVudGFfZGFwdW50YV8oX2ZpbGVfLCdhKycpLndyaXRlKCclc+KAoiVzXG4nJShlbWFpbCxuYW1hKSk7X2hpdHVuZ19lbWFpbF9mdWxsXyArPSAxDQogICAgICAgICAgICBleGNlcHQ6Y29udGludWUNCiAgICBleGNlcHQ6DQogICAgICAgIGphbGFuKCclc+KVmuKVkOKVkFslcyElc10gJXNUZXJqYWRpIEtlc2FsYWhhbiclKE0sUCxNLFApKTt0aW1lLnNsZWVwKDIpO21lbnUoKQ0KICAgIF9idWthX2ZpbGVfID0gX2RhcHVudGFfZGFwdW50YV8oX2ZpbGVfLCdyJykucmVhZCgpLnNwbGl0bGluZXMoKQ0KICAgIF9kYXB1bnRhX2NpY2lfKCIlc+KVoOKVkOKVkFslc+KAoiVzXSAlc1RvdGFsIElEIDogJXMiJShPLFAsTyxQLHN0cihsZW4oX2J1a2FfZmlsZV8pKSkpDQogICAgcmV0dXJuIGNyYWNrKF9maWxlXykNCg0KIyMjIER1bXAgSUQgQWNhayAoQnkgRGFwdW50YSkNCmRlZiBfbWFpbl9yYW5kb21fKCk6DQogICAgZmlsZSA9ICdkdW1wX3JhbmRvbS5qc29uJw0KICAgIHRyeTpvcy5yZW1vdmUoZmlsZSkNCiAgICBleGNlcHQ6cGFzcw0KICAgIF9kYXB1bnRhX2NpY2lfKCclc+KVoOKVkOKVkFslczAxJXNdICVzRHVtcCBJRCBPbGQnJShPLFAsTyxQKSkNCiAgICBfZGFwdW50YV9jaWNpXygnJXPilaDilZDilZBbJXMwMiVzXSAlc0R1bXAgSUQgTmV3JyUoTyxQLE8sUCkpDQogICAgX2Nva18gPSBpbnB1dCgnJXPilaDilZDilZBbJXPigKLigKIlc10gJXNQaWxpaCA6ICclKE8sUCxPLFApKQ0KICAgIF9kYXB1bnRhX2NpY2lfKCclc+KVkSclKE8pKQ0KICAgIGlmIF9jb2tfIGluIFsnMScsJzAxJ106X3JhbmRvbV9vbGRfKGZpbGUpO19kYXB1bnRhX2NpY2lfKCcnKTtyZXR1cm4gc2V0X3Bhc3NfZGV2KGZpbGUpDQogICAgZWxpZiBfY29rXyBpbiBbJzInLCcwMiddOl9yYW5kb21fbmV3XyhmaWxlKTtfZGFwdW50YV9jaWNpXygnJyk7cmV0dXJuIHNldF9wYXNzX2RldihmaWxlKQ0KICAgIGVsc2U6amFsYW4oJyVz4pWa4pWQ4pWQWyVzISVzXSAlc0lzaSBZYW5nIEJlbmFyJyUoTSxQLE0sUCkpO21lbnUoKQ0KZGVmIF9yYW5kb21fb2xkXyhfZmlsZV8pOg0KICAgIHRyeToNCiAgICAgICAgb3BlbihfZmlsZV8sJ2EnKQ0KICAgICAgICBfanVtXyA9IGludChpbnB1dCgiJXPilaDilZDilZBbJXPigKIlc10gJXNNYXN1a2thbiBKdW1sYWggOiAiJShPLFAsTyxQKSkpDQogICAgICAgIF9vbGRfID0gaW5wdXQoIiVz4pWg4pWQ4pWQWyVz4oCiJXNdICVzSUQgT2xkIEJlcmFwYSBEaWdpdCA6ICIlKE8sUCxPLFApKQ0KICAgICAgICBfZGFwdW50YV9jaWNpXygnJXPilaDilZDilZBbJXPigKIlc10gJXNDb250b2ggOiAxIC8gMTIgLyAxNSAvIDE4IC8gMTknJShPLFAsTyxQKSkNCiAgICAgICAgX2RpZ18gPSBpbnB1dCgnJXPilaDilZDilZBbJXPigKIlc10gJXNNYXN1a2thbiBJRCBEZXBhbiA6ICclKE8sUCxPLFApKQ0KICAgICAgICBfaWRnXyA9IGludChfb2xkXykgLSBpbnQobGVuKF9kaWdfKSkNCiAgICAgICAgX2F3YV8gPSBpbnQoc3RyKCcxJypfaWRnXykpDQogICAgICAgIF9ha2hfID0gaW50KHN0cignOScqX2lkZ18pKQ0KICAgICAgICBfZGFwdW50YV9jaWNpXygnJXPilZEnJShPKSkNCiAgICAgICAgX2RhcHVudGFfY2ljaV8oIiVz4pWg4pWQ4pWQWyVz4oCiJXNdICVzVGVrYW4gY3RybCtjIFVudHVrIEJlcmhlbnRpIER1bXAiJShPLFAsTyxQKSkNCiAgICAgICAgZm9yIGkgaW4gcmFuZ2UoX2p1bV8pOg0KICAgICAgICAgICAgeCA9IHJhbmRvbS5yYW5kaW50KF9hd2FfLF9ha2hfKQ0KICAgICAgICAgICAgaWQgPSAoc3RyKF9kaWdfKStzdHIoeCkpDQogICAgICAgICAgICB0cnk6b3BlbihfZmlsZV8sJ2ErJykud3JpdGUoJyVzXG4nJShpZCkpDQogICAgICAgICAgICBleGNlcHQgOnBhc3MNCiAgICAgICAgICAgIF9kYXB1bnRhX2NpY2lfICgiXHIlc+KVoOKVkOKVkFslc+KAoiVzXSAlc1NlZGFuZyBHZW5lcmF0ZSAlcyBJRCIlKE8sUCxPLFAsbGVuKF9kYXB1bnRhX2RhcHVudGFfKF9maWxlXykucmVhZCgpLnNwbGl0bGluZXMoKSkpLGVuZD0nJyk7c3lzLnN0ZG91dC5mbHVzaCgpDQogICAgZXhjZXB0Ol9kYXB1bnRhX2NpY2lfKCcnKTtyZXR1cm4gc2V0X3Bhc3NfZGV2KF9maWxlXykNCmRlZiBfcmFuZG9tX25ld18oX2ZpbGVfKToNCiAgICB0cnk6DQogICAgICAgIG9wZW4oX2ZpbGVfLCdhJykNCiAgICAgICAgX2p1bV8gPSBpbnQoaW5wdXQoIiVz4pWg4pWQ4pWQWyVz4oCiJXNdICVzTWFzdWtrYW4gSnVtbGFoIDogIiUoTyxQLE8sUCkpKQ0KICAgICAgICBfZGFwdW50YV9jaWNpXygnJXPilaDilZDilZBbJXPigKIlc10gJXNDb250b2ggOiAxMDAwNSAvIDEwMDAwNSAvIDEwMDAwMDUnJShPLFAsTyxQKSkNCiAgICAgICAgX2RpZ18gPSBpbnB1dCgnJXPilaDilZDilZBbJXPigKIlc10gJXNNYXN1a2thbiBJRCBEZXBhbiA6ICclKE8sUCxPLFApKQ0KICAgICAgICBfaWRnXyA9IGludCgxNSkgLSBpbnQobGVuKF9kaWdfKSkNCiAgICAgICAgX2F3YV8gPSBpbnQoc3RyKCcxJypfaWRnXykpDQogICAgICAgIF9ha2hfID0gaW50KHN0cignOScqX2lkZ18pKQ0KICAgICAgICBfZGFwdW50YV9jaWNpXygnJXPilZEnJShPKSkNCiAgICAgICAgX2RhcHVudGFfY2ljaV8oIiVz4pWg4pWQ4pWQWyVz4oCiJXNdICVzVGVrYW4gY3RybCtjIFVudHVrIEJlcmhlbnRpIER1bXAiJShPLFAsTyxQKSkNCiAgICAgICAgZm9yIGkgaW4gcmFuZ2UoX2p1bV8pOg0KICAgICAgICAgICAgeCA9IHJhbmRvbS5yYW5kaW50KF9hd2FfLF9ha2hfKQ0KICAgICAgICAgICAgaWQgPSAoc3RyKF9kaWdfKStzdHIoeCkpDQogICAgICAgICAgICB0cnk6b3BlbihfZmlsZV8sJ2ErJykud3JpdGUoJyVzXG4nJShpZCkpDQogICAgICAgICAgICBleGNlcHQgOnBhc3MNCiAgICAgICAgICAgIF9kYXB1bnRhX2NpY2lfICgiXHIlc+KVoOKVkOKVkFslc+KAoiVzXSAlc1NlZGFuZyBHZW5lcmF0ZSAlcyBJRCIlKE8sUCxPLFAsbGVuKF9kYXB1bnRhX2RhcHVudGFfKF9maWxlXykucmVhZCgpLnNwbGl0bGluZXMoKSkpLGVuZD0nJyk7c3lzLnN0ZG91dC5mbHVzaCgpDQogICAgZXhjZXB0Ol9kYXB1bnRhX2NpY2lfKCcnKTtyZXR1cm4gc2V0X3Bhc3NfZGV2KF9maWxlXykNCg0KIyMjIER1bXAgVXNlcm5hbWUNCmRlZiBkdW1wX3VzZXJuYW1lKCk6DQogICAgX2RhcHVudGFfY2ljaV8oIiVz4pWg4pWQ4pWQWyVz4oCiJXNdICVzQ29udG9oIDogZGFwdW50YS5raHVyYXlyYSIlKE8sUCxPLFApKTtfcXVlcnlfID0gX2NpY2lfZGFwdW50YV8oIiVz4pWg4pWQ4pWQWyVz4oCiJXNdICVzTWFzdWtrYW4gTmFtYSA6ICIlKE8sUCxPLFApKS5sb3dlcigpDQogICAgaWYgbGVuKF9xdWVyeV8pIDwgMzpqYWxhbignJXPilZrilZDilZBbJXMhJXNdICVzTmFtYSBIYXJ1cyBMZWJpaCBEYXJpIDIgRGlnaXQnJShNLFAsTSxQKSk7dGltZS5zbGVlcCgyKTttZW51KCkNCiAgICBfbGltaXRfYXdhbF8gPSBpbnQoX2NpY2lfZGFwdW50YV8oIiVz4pWg4pWQ4pWQWyVz4oCiJXNdICVzU2V0IEFuZ2thIEF3YWwgOiAiJShPLFAsTyxQKSkpO19saW1pdF9ha2hpcl89IGludChfY2ljaV9kYXB1bnRhXygiJXPilaDilZDilZBbJXPigKIlc10gJXNTZXQgQW5na2EgQWtoaXIgOiAiJShPLFAsTyxQKSkpO19maWxlXyA9IChfcXVlcnlfKyIuanNvbiIpLnJlcGxhY2UoIiAiLCJfIikNCiAgICB0cnk6b3MucmVtb3ZlKF9maWxlXykNCiAgICBleGNlcHQ6cGFzcw0KICAgIGV4ZWNfdXNlcm5hbWUoX3F1ZXJ5XyxfbGltaXRfYXdhbF8sX2xpbWl0X2FraGlyXyxfZmlsZV8pDQpkZWYgZXhlY191c2VybmFtZShfX3F1ZXJ5X18sX2xpbWl0X2F3YWxfLF9saW1pdF9ha2hpcl8sX2ZpbGVfKToNCiAgICBfaGl0dW5nX2VtYWlsXzFfID0gX2xpbWl0X2F3YWxfKzE7X2hpdHVuZ19lbWFpbF8yXyA9IF9saW1pdF9hd2FsXysxO19oaXR1bmdfZW1haWxfM18gPSBfbGltaXRfYXdhbF8rMTtfaGl0dW5nX2VtYWlsX2Z1bGxfID0gX2xpbWl0X2F3YWxfKzENCiAgICBpZiAnICcgaW4gX19xdWVyeV9fOg0KICAgICAgICB0cnk6X3F1ZXJ5XzFfID0gX19xdWVyeV9fLnNwbGl0KCcgJylbMF0NCiAgICAgICAgZXhjZXB0OnBhc3MNCiAgICAgICAgdHJ5Ol9xdWVyeV8yXyA9IF9fcXVlcnlfXy5zcGxpdCgnICcpWzFdDQogICAgICAgIGV4Y2VwdDpwYXNzDQogICAgICAgIHRyeTpfcXVlcnlfM18gPSBfX3F1ZXJ5X18uc3BsaXQoJyAnKVsyXQ0KICAgICAgICBleGNlcHQ6cGFzcw0KICAgIGVsaWYgJy4nIGluIF9fcXVlcnlfXzoNCiAgICAgICAgdHJ5Ol9xdWVyeV8xXyA9IF9fcXVlcnlfXy5zcGxpdCgnLicpWzBdDQogICAgICAgIGV4Y2VwdDpwYXNzDQogICAgICAgIHRyeTpfcXVlcnlfMl8gPSBfX3F1ZXJ5X18uc3BsaXQoJy4nKVsxXQ0KICAgICAgICBleGNlcHQ6cGFzcw0KICAgICAgICB0cnk6X3F1ZXJ5XzNfID0gX19xdWVyeV9fLnNwbGl0KCcuJylbMl0NCiAgICAgICAgZXhjZXB0OnBhc3MNCiAgICBlbGlmICdfJyBpbiBfX3F1ZXJ5X186DQogICAgICAgIHRyeTpfcXVlcnlfMV8gPSBfX3F1ZXJ5X18uc3BsaXQoJ18nKVswXQ0KICAgICAgICBleGNlcHQ6cGFzcw0KICAgICAgICB0cnk6X3F1ZXJ5XzJfID0gX19xdWVyeV9fLnNwbGl0KCdfJylbMV0NCiAgICAgICAgZXhjZXB0OnBhc3MNCiAgICAgICAgdHJ5Ol9xdWVyeV8zXyA9IF9fcXVlcnlfXy5zcGxpdCgnXycpWzJdDQogICAgICAgIGV4Y2VwdDpwYXNzDQogICAgZWxpZiAnLScgaW4gX19xdWVyeV9fOg0KICAgICAgICB0cnk6X3F1ZXJ5XzFfID0gX19xdWVyeV9fLnNwbGl0KCctJylbMF0NCiAgICAgICAgZXhjZXB0OnBhc3MNCiAgICAgICAgdHJ5Ol9xdWVyeV8yXyA9IF9fcXVlcnlfXy5zcGxpdCgnLScpWzFdDQogICAgICAgIGV4Y2VwdDpwYXNzDQogICAgICAgIHRyeTpfcXVlcnlfM18gPSBfX3F1ZXJ5X18uc3BsaXQoJy0nKVsyXQ0KICAgICAgICBleGNlcHQ6cGFzcw0KICAgIGVsc2U6DQogICAgICAgIHRyeTpfcXVlcnlfMV8gPSBfX3F1ZXJ5X18NCiAgICAgICAgZXhjZXB0OnBhc3MNCiAgICB0cnkgOg0KICAgICAgICBmb3IgX2p1bWxhaF8gaW4gcmFuZ2UoX2xpbWl0X2F3YWxfLF9saW1pdF9ha2hpcl8pOg0KICAgICAgICAgICAgdHJ5Om5hbWEgPSBfcXVlcnlfMV87ZW1haWwgPSAoJyVzJXMnJShfcXVlcnlfMV8sc3RyKF9oaXR1bmdfZW1haWxfMV8pKSk7X2RhcHVudGFfZGFwdW50YV8oX2ZpbGVfLCdhKycpLndyaXRlKCclc+KAoiVzXG4nJShlbWFpbCxuYW1hKSk7X2hpdHVuZ19lbWFpbF8xXyArPSAxDQogICAgICAgICAgICBleGNlcHQ6Y29udGludWUNCiAgICAgICAgZm9yIF9qdW1sYWhfIGluIHJhbmdlKF9saW1pdF9hd2FsXyxfbGltaXRfYWtoaXJfKToNCiAgICAgICAgICAgIHRyeTpuYW1hID0gX3F1ZXJ5XzJfO2VtYWlsID0gKCclcyVzJyUoX3F1ZXJ5XzJfLHN0cihfaGl0dW5nX2VtYWlsXzJfKSkpO19kYXB1bnRhX2RhcHVudGFfKF9maWxlXywnYSsnKS53cml0ZSgnJXPigKIlc1xuJyUoZW1haWwsbmFtYSkpO19oaXR1bmdfZW1haWxfMl8gKz0gMQ0KICAgICAgICAgICAgZXhjZXB0OmNvbnRpbnVlDQogICAgICAgIGZvciBfanVtbGFoXyBpbiByYW5nZShfbGltaXRfYXdhbF8sX2xpbWl0X2FraGlyXyk6DQogICAgICAgICAgICB0cnk6bmFtYSA9IF9xdWVyeV8zXztlbWFpbCA9ICgnJXMlcyclKF9xdWVyeV8zXyxzdHIoX2hpdHVuZ19lbWFpbF8zXykpKTtfZGFwdW50YV9kYXB1bnRhXyhfZmlsZV8sJ2ErJykud3JpdGUoJyVz4oCiJXNcbiclKGVtYWlsLG5hbWEpKTtfaGl0dW5nX2VtYWlsXzNfICs9IDENCiAgICAgICAgICAgIGV4Y2VwdDpjb250aW51ZQ0KICAgICAgICBmb3IgX2p1bWxhaF8gaW4gcmFuZ2UoX2xpbWl0X2F3YWxfLF9saW1pdF9ha2hpcl8pOg0KICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgIGlmICcuJyBpbiBfX3F1ZXJ5X186X3F1ZXJ5XyA9IF9fcXVlcnlfXztuYW1hID0gX19xdWVyeV9fLnJlcGxhY2UoJy4nLCcgJykNCiAgICAgICAgICAgICAgICBlbGlmICdfJyBpbiBfX3F1ZXJ5X186X3F1ZXJ5XyA9IF9fcXVlcnlfXztuYW1hID0gX19xdWVyeV9fLnJlcGxhY2UoJ18nLCcgJykNCiAgICAgICAgICAgICAgICBlbGlmICctJyBpbiBfX3F1ZXJ5X186X3F1ZXJ5XyA9IF9fcXVlcnlfXztuYW1hID0gX19xdWVyeV9fLnJlcGxhY2UoJy0nLCcgJykNCiAgICAgICAgICAgICAgICBlbHNlOl9xdWVyeV8gPSBfX3F1ZXJ5X18ucmVwbGFjZSgnICcsJycpO25hbWEgPSBfX3F1ZXJ5X18NCiAgICAgICAgICAgICAgICBlbWFpbCA9ICgnJXMlcyclKF9xdWVyeV8sc3RyKF9oaXR1bmdfZW1haWxfZnVsbF8pKSk7X2RhcHVudGFfZGFwdW50YV8oX2ZpbGVfLCdhKycpLndyaXRlKCclc+KAoiVzXG4nJShlbWFpbCxuYW1hKSk7X2hpdHVuZ19lbWFpbF9mdWxsXyArPSAxDQogICAgICAgICAgICBleGNlcHQ6Y29udGludWUNCiAgICBleGNlcHQ6amFsYW4oJyVz4pWa4pWQ4pWQWyVzISVzXSAlc1RlcmphZGkgS2VzYWxhaGFuJyUoTSxQLE0sUCkpO3RpbWUuc2xlZXAoMik7bWVudSgpDQogICAgX2J1a2FfZmlsZV8gPSBfZGFwdW50YV9kYXB1bnRhXyhfZmlsZV8sJ3InKS5yZWFkKCkuc3BsaXRsaW5lcygpO19kYXB1bnRhX2NpY2lfKCIlc+KVoOKVkOKVkFslc+KAoiVzXSAlc1RvdGFsIElEIDogJXMiJShPLFAsTyxQLHN0cihsZW4oX2J1a2FfZmlsZV8pKSkpDQogICAgcmV0dXJuIGNyYWNrKF9maWxlXykNCg0KIyMjIER1bXAgSUQgRGFyaSBIYXNodGFnDQpkZWYgaGFzaHRhZyhjb29raWVzKToNCiAgICBfcXVlcnlfID0gX2NpY2lfZGFwdW50YV8oJyVz4pWg4pWQ4pWQWyVz4oCiJXNdICVzTWFzdWtrYW4gSGFzaHRhZyA6ICclKE8sUCxPLFApKTtfdXJsX2Rldl8gPSAnaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29tL2hhc2h0YWcvJyArIF9xdWVyeV87X2ZpbGVfID0gKF9xdWVyeV8rJy5qc29uJykucmVwbGFjZSgnICcsJ18nKQ0KICAgIHRyeTpvcy5yZW1vdmUoX2ZpbGVfKQ0KICAgIGV4Y2VwdDpwYXNzDQogICAgX2RhcHVudGFfY2ljaV8oIiVz4pWg4pWQ4pWQWyVz4oCiJXNdICVzVGVrYW4gY3RybCtjIFVudHVrIEJlcmhlbnRpIER1bXAiJShPLFAsTyxQKSk7ZXhlY19oYXNodGFnKF91cmxfZGV2Xyxjb29raWVzLF9maWxlXyk7X2RhcHVudGFfY2ljaV8oIlxuJXPilaDilZDilZBbJXPigKIlc10gJXNCZXJoYXNpbCBEdW1wICVzIElEIiUoTyxQLE8sUCxsZW4oX2RhcHVudGFfZGFwdW50YV8oX2ZpbGVfKS5yZWFkKCkuc3BsaXRsaW5lcygpKSkpO3JldHVybiBjcmFjayhfZmlsZV8pDQpkZWYgZXhlY19oYXNodGFnKHVybCxjb29raWVzLF9maWxlXyk6DQogICAgb3BlbihfZmlsZV8sJ2EnKTtfcmVxX3Nlc18gPSByZXF1ZXN0cy5TZXNzaW9uKCk7X3JlcV9nZXRfID0gX3JlcV9zZXNfLmdldCh1cmwsY29va2llcz1jb29raWVzLGhlYWRlcnM9aGVhZGVyX2hhc2h0YWcpO19zb3BfZGV2XyA9IHBhcihfcmVxX2dldF8udGV4dCwnaHRtbC5wYXJzZXInKTtfYnVrYV9maWxlXyA9IG9wZW4oX2ZpbGVfKS5yZWFkKCk7X2RhcHVudGFfY2ljaV8gKCJcciVz4pWg4pWQ4pWQWyVz4oCiJXNdICVzU2VkYW5nIE1lbmdhbWJpbCAlcyBJRCIlKE8sUCxPLFAsbGVuKF9kYXB1bnRhX2RhcHVudGFfKF9maWxlXykucmVhZCgpLnNwbGl0bGluZXMoKSkpLGVuZD0nJyk7c3lzLnN0ZG91dC5mbHVzaCgpDQogICAgdHJ5Og0KICAgICAgICBmb3IgX2NpY2lfIGluIF9zb3BfZGV2Xy5maW5kX2FsbCgnaDMnKToNCiAgICAgICAgICAgIGZvciBfZGFwdW50YV8gaW4gX2NpY2lfLmZpbmRfYWxsKCdhJyxocmVmPVRydWUpOg0KICAgICAgICAgICAgICAgIGlmICdtYmFzaWMuZmFjZWJvb2suY29tJyBpbiBfZGFwdW50YV8uZ2V0KCdocmVmJyk6cGFzcw0KICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgIGlmICJwcm9maWxlLnBocCIgaW4gX2RhcHVudGFfLmdldCgnaHJlZicpOg0KICAgICAgICAgICAgICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9uYW1lX2Rldl8gPSBfZGFwdW50YV8udGV4dDtfaWRfZGV2XyA9ICIiLmpvaW4oYnM0LnJlLmZpbmRhbGwoInByb2ZpbGVcLnBocFw/aWQ9KC4qPykmIixfZGFwdW50YV8uZ2V0KCJocmVmIikpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIF9uYW1lX2Rldl8gaW4gX2J1a2FfZmlsZV86cGFzcw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgJy8nIGluIF9pZF9kZXZfOnBhc3MNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOm9wZW4oX2ZpbGVfLCdhKycpLndyaXRlKCclc+KAoiVzXG4nJShfaWRfZGV2XyxfbmFtZV9kZXZfKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2VwdDpwYXNzDQogICAgICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgX25hbWVfZGV2XyA9IF9kYXB1bnRhXy50ZXh0O19pZF9kZXZfID0gIiIuam9pbihiczQucmUuZmluZGFsbCgiLyguKj8pXD8iLF9kYXB1bnRhXy5nZXQoImhyZWYiKSkpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgX25hbWVfZGV2XyBpbiBfYnVrYV9maWxlXzpwYXNzDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiAnLycgaW4gX2lkX2Rldl86cGFzcw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6b3BlbihfZmlsZV8sJ2ErJykud3JpdGUoJyVz4oCiJXNcbiclKF9pZF9kZXZfLF9uYW1lX2Rldl8pKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZXhjZXB0OnBhc3MNCiAgICAgICAgICAgIGZvciBfZGFwdW50YV8gaW4gX3NvcF9kZXZfLmZpbmRfYWxsKCdhJyxocmVmPVRydWUpOg0KICAgICAgICAgICAgICAgIGlmICdMaWhhdCBIYXNpbCBTZWxhbmp1dG55YScgaW4gX2RhcHVudGFfLnRleHQ6dXJsX2RldiA9IF9kYXB1bnRhXy5nZXQoJ2hyZWYnKTtleGVjX2hhc2h0YWcodXJsX2Rldixjb29raWVzLF9maWxlXykNCiAgICBleGNlcHQgS2V5Ym9hcmRJbnRlcnJ1cHQ6X2RhcHVudGFfY2ljaV8oIlxuJXPilaDilZDilZBbJXPigKIlc10gJXNCZXJoYXNpbCBEdW1wICVzIElEIiUoTyxQLE8sUCxsZW4oX2RhcHVudGFfZGFwdW50YV8oX2ZpbGVfKS5yZWFkKCkuc3BsaXRsaW5lcygpKSkpO3JldHVybiBjcmFjayhfZmlsZV8pDQoNCiMjIyBEdW1wIElEIERhcmkgQmVyYW5kYQ0KZGVmIGJlcmFuZGEoY29va2llcyk6DQogICAgX3VybF9kZXZfID0gJ2h0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbS9ob21lLnBocCc7X2ZpbGVfID0gJ2JlcmFuZGEuanNvbicNCiAgICB0cnk6b3MucmVtb3ZlKF9maWxlXykNCiAgICBleGNlcHQ6cGFzcw0KICAgIF9kYXB1bnRhX2NpY2lfKCIlc+KVoOKVkOKVkFslc+KAoiVzXSAlc1Rla2FuIGN0cmwrYyBVbnR1ayBCZXJoZW50aSBEdW1wIiUoTyxQLE8sUCkpO2V4ZWNfYmVyYW5kYShfdXJsX2Rldl8sY29va2llcyxfZmlsZV8pO19kYXB1bnRhX2NpY2lfKCJcbiVz4pWg4pWQ4pWQWyVz4oCiJXNdICVzQmVyaGFzaWwgRHVtcCAlcyBJRCIlKE8sUCxPLFAsbGVuKF9kYXB1bnRhX2RhcHVudGFfKF9maWxlXykucmVhZCgpLnNwbGl0bGluZXMoKSkpKTtyZXR1cm4gY3JhY2soX2ZpbGVfKQ0KZGVmIGV4ZWNfYmVyYW5kYSh1cmwsY29va2llcyxfZmlsZV8pOg0KICAgIG9wZW4oX2ZpbGVfLCdhJyk7X3JlcV9zZXNfID0gcmVxdWVzdHMuU2Vzc2lvbigpO19yZXFfZ2V0XyA9IF9yZXFfc2VzXy5nZXQodXJsLGNvb2tpZXM9Y29va2llcyxoZWFkZXJzPWhlYWRlcl9uYW1hKTtfc29wX2Rldl8gPSBwYXIoX3JlcV9nZXRfLnRleHQsJ2h0bWwucGFyc2VyJyk7X2J1a2FfZmlsZV8gPSBvcGVuKF9maWxlXykucmVhZCgpO19kYXB1bnRhX2NpY2lfICgiXHIlc+KVoOKVkOKVkFslc+KAoiVzXSAlc1NlZGFuZyBNZW5nYW1iaWwgJXMgSUQiJShPLFAsTyxQLGxlbihfZGFwdW50YV9kYXB1bnRhXyhfZmlsZV8pLnJlYWQoKS5zcGxpdGxpbmVzKCkpKSxlbmQ9JycpO3N5cy5zdGRvdXQuZmx1c2goKQ0KICAgIHRyeToNCiAgICAgICAgZm9yIF9jaWNpXyBpbiBfc29wX2Rldl8uZmluZF9hbGwoJ2gzJyk6DQogICAgICAgICAgICBmb3IgX2RhcHVudGFfIGluIF9jaWNpXy5maW5kX2FsbCgnYScsaHJlZj1UcnVlKToNCiAgICAgICAgICAgICAgICBpZiAicHJvZmlsZS5waHAiIGluIF9kYXB1bnRhXy5nZXQoJ2hyZWYnKToNCiAgICAgICAgICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgICAgICAgICAgX25hbWVfZGV2XyA9IF9kYXB1bnRhXy50ZXh0O19pZF9kZXZfID0gIiIuam9pbihiczQucmUuZmluZGFsbCgicHJvZmlsZVwucGhwXD9pZD0oLio/KSYiLF9kYXB1bnRhXy5nZXQoImhyZWYiKSkpDQogICAgICAgICAgICAgICAgICAgICAgICBpZiBfbmFtZV9kZXZfIGluIF9idWthX2ZpbGVfOnBhc3MNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgJy8nIGluIF9pZF9kZXZfOnBhc3MNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6b3BlbihfZmlsZV8sJ2ErJykud3JpdGUoJyVz4oCiJXNcbiclKF9pZF9kZXZfLF9uYW1lX2Rldl8pKQ0KICAgICAgICAgICAgICAgICAgICBleGNlcHQ6cGFzcw0KICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICAgICAgICAgIF9uYW1lX2Rldl8gPSBfZGFwdW50YV8udGV4dDtfaWRfZGV2XyA9ICIiLmpvaW4oYnM0LnJlLmZpbmRhbGwoIi8oLio/KVw/IixfZGFwdW50YV8uZ2V0KCJocmVmIikpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgX25hbWVfZGV2XyBpbiBfYnVrYV9maWxlXzpwYXNzDQogICAgICAgICAgICAgICAgICAgICAgICBlbGlmICcvJyBpbiBfaWRfZGV2XzpwYXNzDQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlOm9wZW4oX2ZpbGVfLCdhKycpLndyaXRlKCclc+KAoiVzXG4nJShfaWRfZGV2XyxfbmFtZV9kZXZfKSkNCiAgICAgICAgICAgICAgICAgICAgZXhjZXB0OnBhc3MNCiAgICAgICAgICAgIGZvciBfZGFwdW50YV8gaW4gX3NvcF9kZXZfLmZpbmRfYWxsKCdhJyxocmVmPVRydWUpOg0KICAgICAgICAgICAgICAgIGlmICdMaWhhdCBCZXJpdGEgTGFpbicgaW4gX2RhcHVudGFfLnRleHQ6dXJsX2RldiA9ICdodHRwczovL21iYXNpYy5mYWNlYm9vay5jb20vJyArIF9kYXB1bnRhXy5nZXQoJ2hyZWYnKTtleGVjX2JlcmFuZGEodXJsX2Rldixjb29raWVzLF9maWxlXykNCiAgICBleGNlcHQgS2V5Ym9hcmRJbnRlcnJ1cHQ6X2RhcHVudGFfY2ljaV8oIlxuJXPilaDilZDilZBbJXPigKIlc10gJXNCZXJoYXNpbCBEdW1wICVzIElEIiUoTyxQLE8sUCxsZW4oX2RhcHVudGFfZGFwdW50YV8oX2ZpbGVfKS5yZWFkKCkuc3BsaXRsaW5lcygpKSkpO3JldHVybiBjcmFjayhfZmlsZV8pDQoNCiMjIyBEdW1wIElEIFBlcm1pbnRhYW4gUGVydGVtYW5hbiBNYXN1aw0KZGVmIHBlcm1pbnRhYW5fcGVydGVtYW5hbl9tYXN1ayhjb29raWVzKToNCiAgICBfdXJsX2Rldl8gPSAnaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29tL2ZyaWVuZHMvY2VudGVyL3JlcXVlc3RzJztfZmlsZV8gPSAndGVtYW5fbWFzdWsuanNvbicNCiAgICB0cnk6b3MucmVtb3ZlKF9maWxlXykNCiAgICBleGNlcHQ6cGFzcw0KICAgIF9kYXB1bnRhX2NpY2lfKCIlc+KVoOKVkOKVkFslc+KAoiVzXSAlc1Rla2FuIGN0cmwrYyBVbnR1ayBCZXJoZW50aSBEdW1wIiUoTyxQLE8sUCkpO2V4ZWNfcGVybWludGFhbl9wZXJ0ZW1hbmFuX21hc3VrKF91cmxfZGV2Xyxjb29raWVzLF9maWxlXyk7X2RhcHVudGFfY2ljaV8oIlxuJXPilaDilZDilZBbJXPigKIlc10gJXNCZXJoYXNpbCBEdW1wICVzIElEIiUoTyxQLE8sUCxsZW4oX2RhcHVudGFfZGFwdW50YV8oX2ZpbGVfKS5yZWFkKCkuc3BsaXRsaW5lcygpKSkpO3JldHVybiBjcmFjayhfZmlsZV8pDQpkZWYgZXhlY19wZXJtaW50YWFuX3BlcnRlbWFuYW5fbWFzdWsodXJsLGNvb2tpZXMsX2ZpbGVfKToNCiAgICBvcGVuKF9maWxlXywnYScpO19yZXFfc2VzXyA9IHJlcXVlc3RzLlNlc3Npb24oKTtfcmVxX2dldF8gPSBfcmVxX3Nlc18uZ2V0KHVybCxjb29raWVzPWNvb2tpZXMsaGVhZGVycz1oZWFkZXJfbmFtYSk7X3NvcF9kZXZfID0gcGFyKF9yZXFfZ2V0Xy50ZXh0LCdodG1sLnBhcnNlcicpO19kYXB1bnRhX2NpY2lfICgiXHIlc+KVoOKVkOKVkFslc+KAoiVzXSAlc1NlZGFuZyBNZW5nYW1iaWwgJXMgSUQiJShPLFAsTyxQLGxlbihfZGFwdW50YV9kYXB1bnRhXyhfZmlsZV8pLnJlYWQoKS5zcGxpdGxpbmVzKCkpKSxlbmQ9JycpO3N5cy5zdGRvdXQuZmx1c2goKQ0KICAgIHRyeToNCiAgICAgICAgZm9yIF9kYXB1bnRhXyBpbiBfc29wX2Rldl8uZmluZF9hbGwoJ2EnLGhyZWY9VHJ1ZSk6DQogICAgICAgICAgICBpZiAnL2ZyaWVuZHMvaG92ZXJjYXJkJyBpbiBfZGFwdW50YV8uZ2V0KCdocmVmJyk6DQogICAgICAgICAgICAgICAgdHJ5Ol9uYW1lX2Rldl8gPSBfZGFwdW50YV8udGV4dDtfaWRfZGV2XyA9ICIiLmpvaW4oYnM0LnJlLmZpbmRhbGwoJ3VpZD0oLio/KSYnLF9kYXB1bnRhXy5nZXQoJ2hyZWYnKSkpO29wZW4oX2ZpbGVfLCdhKycpLndyaXRlKCclc+KAoiVzXG4nJShfaWRfZGV2XyxfbmFtZV9kZXZfKSkNCiAgICAgICAgICAgICAgICBleGNlcHQ6cGFzcw0KICAgICAgICAgICAgZWxzZTpwYXNzDQogICAgICAgIGZvciBfZGFwdW50YV8gaW4gX3NvcF9kZXZfLmZpbmRfYWxsKCdhJyxocmVmPVRydWUpOg0KICAgICAgICAgICAgaWYgJ0xpaGF0IHNlbGVuZ2thcG55YScgaW4gX2RhcHVudGFfLnRleHQ6dXJsX2RldiA9ICdodHRwczovL21iYXNpYy5mYWNlYm9vay5jb20vJyArIF9kYXB1bnRhXy5nZXQoJ2hyZWYnKTtleGVjX3Blcm1pbnRhYW5fcGVydGVtYW5hbl9tYXN1ayh1cmxfZGV2LGNvb2tpZXMsX2ZpbGVfKQ0KICAgIGV4Y2VwdCBLZXlib2FyZEludGVycnVwdDpfZGFwdW50YV9jaWNpXygiXG4lc+KVoOKVkOKVkFslc+KAoiVzXSAlc0Jlcmhhc2lsIER1bXAgJXMgSUQiJShPLFAsTyxQLGxlbihfZGFwdW50YV9kYXB1bnRhXyhfZmlsZV8pLnJlYWQoKS5zcGxpdGxpbmVzKCkpKSk7cmV0dXJuIGNyYWNrKF9maWxlXykNCg0KIyMjIER1bXAgSUQgUGVybWludGFhbiBQZXJ0ZW1hbmFuIEtlbHVhcg0KZGVmIHBlcm1pbnRhYW5fcGVydGVtYW5hbl9rZWx1YXIoY29va2llcyk6DQogICAgX3VybF9kZXZfID0gJ2h0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbS9mcmllbmRzL2NlbnRlci9yZXF1ZXN0cy9vdXRnb2luZyc7X2ZpbGVfID0gJ3RlbWFuX2tlbHVhci5qc29uJw0KICAgIHRyeTpvcy5yZW1vdmUoX2ZpbGVfKQ0KICAgIGV4Y2VwdDpwYXNzDQogICAgX2RhcHVudGFfY2ljaV8oIiVz4pWg4pWQ4pWQWyVz4oCiJXNdICVzVGVrYW4gY3RybCtjIFVudHVrIEJlcmhlbnRpIER1bXAiJShPLFAsTyxQKSk7ZXhlY19wZXJtaW50YWFuX3BlcnRlbWFuYW5fa2VsdWFyKF91cmxfZGV2Xyxjb29raWVzLF9maWxlXyk7X2RhcHVudGFfY2ljaV8oIlxuJXPilaDilZDilZBbJXPigKIlc10gJXNCZXJoYXNpbCBEdW1wICVzIElEIiUoTyxQLE8sUCxsZW4oX2RhcHVudGFfZGFwdW50YV8oX2ZpbGVfKS5yZWFkKCkuc3BsaXRsaW5lcygpKSkpO3JldHVybiBjcmFjayhfZmlsZV8pDQpkZWYgZXhlY19wZXJtaW50YWFuX3BlcnRlbWFuYW5fa2VsdWFyKHVybCxjb29raWVzLF9maWxlXyk6DQogICAgb3BlbihfZmlsZV8sJ2EnKTtfcmVxX3Nlc18gPSByZXF1ZXN0cy5TZXNzaW9uKCk7X3JlcV9nZXRfID0gX3JlcV9zZXNfLmdldCh1cmwsY29va2llcz1jb29raWVzLGhlYWRlcnM9aGVhZGVyX25hbWEpO19zb3BfZGV2XyA9IHBhcihfcmVxX2dldF8udGV4dCwnaHRtbC5wYXJzZXInKTtfZGFwdW50YV9jaWNpXyAoIlxyJXPilaDilZDilZBbJXPigKIlc10gJXNTZWRhbmcgTWVuZ2FtYmlsICVzIElEIiUoTyxQLE8sUCxsZW4oX2RhcHVudGFfZGFwdW50YV8oX2ZpbGVfKS5yZWFkKCkuc3BsaXRsaW5lcygpKSksZW5kPScnKTtzeXMuc3Rkb3V0LmZsdXNoKCkNCiAgICB0cnk6DQogICAgICAgIGZvciBfZGFwdW50YV8gaW4gX3NvcF9kZXZfLmZpbmRfYWxsKCdhJyxocmVmPVRydWUpOg0KICAgICAgICAgICAgaWYgJy9mcmllbmRzL2hvdmVyY2FyZCcgaW4gX2RhcHVudGFfLmdldCgnaHJlZicpOg0KICAgICAgICAgICAgICAgIHRyeTpfbmFtZV9kZXZfID0gX2RhcHVudGFfLnRleHQ7X2lkX2Rldl8gPSAiIi5qb2luKGJzNC5yZS5maW5kYWxsKCd1aWQ9KC4qPykmJyxfZGFwdW50YV8uZ2V0KCdocmVmJykpKTtvcGVuKF9maWxlXywnYSsnKS53cml0ZSgnJXPigKIlc1xuJyUoX2lkX2Rldl8sX25hbWVfZGV2XykpDQogICAgICAgICAgICAgICAgZXhjZXB0OnBhc3MNCiAgICAgICAgICAgIGVsc2U6cGFzcw0KICAgICAgICBmb3IgX2RhcHVudGFfIGluIF9zb3BfZGV2Xy5maW5kX2FsbCgnYScsaHJlZj1UcnVlKToNCiAgICAgICAgICAgIGlmICdMaWhhdCBzZWxlbmdrYXBueWEnIGluIF9kYXB1bnRhXy50ZXh0OnVybF9kZXYgPSAnaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29tLycgKyBfZGFwdW50YV8uZ2V0KCdocmVmJyk7ZXhlY19wZXJtaW50YWFuX3BlcnRlbWFuYW5fa2VsdWFyKHVybF9kZXYsY29va2llcyxfZmlsZV8pDQogICAgZXhjZXB0IEtleWJvYXJkSW50ZXJydXB0Ol9kYXB1bnRhX2NpY2lfKCJcbiVz4pWg4pWQ4pWQWyVz4oCiJXNdICVzQmVyaGFzaWwgRHVtcCAlcyBJRCIlKE8sUCxPLFAsbGVuKF9kYXB1bnRhX2RhcHVudGFfKF9maWxlXykucmVhZCgpLnNwbGl0bGluZXMoKSkpKTtyZXR1cm4gY3JhY2soX2ZpbGVfKQ0KDQojIyMgQ2VrIFRhcmdldCBDcmFjaw0KZGVmIGNla190YXJnZXRfY3JhY2tfKF9pZF8pOg0KICAgIG9wZW4oJ2xpc3RfaWQudHh0JywnYSsnKQ0KICAgIHRyeToNCiAgICAgICAgX2Nla18gPSBvcGVuKCdsaXN0X2lkLnR4dCcsJ3InKS5yZWFkKCkNCiAgICAgICAgaWYgX2lkXyBpbiBfY2VrXzoNCiAgICAgICAgICAgIGlmIF9pZF8gPT0gJ21lJzpwYXNzDQogICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgIF9jb2t6el8gPSBfY2ljaV9kYXB1bnRhXygnJXPilaDilZDilZBbJXMhJXNdICVzSUQgU3VkYWggUGVybmFoIERpY3JhY2ssIExhbmp1dD8gW3kvdF0gOiAnJShNLFAsTSxQKSkNCiAgICAgICAgICAgICAgICBpZiBfY29renpfIGluIFsnJywnICddOnBhc3MNCiAgICAgICAgICAgICAgICBlbGlmIF9jb2t6el8gaW4gWycxJywnMDEnLCd5J106cGFzcw0KICAgICAgICAgICAgICAgIGVsaWYgX2Nva3p6XyBpbiBbJzInLCcwMicsJ3QnXTptZW51KCkNCiAgICAgICAgICAgICAgICBlbHNlOnBhc3MNCiAgICAgICAgZWxzZTpfZGFwdW50YV9kYXB1bnRhXygnbGlzdF9pZC50eHQnLCJhKyIpLndyaXRlKCIlc1xuIiUoX2lkXykpDQogICAgZXhjZXB0OnBhc3MNCg0KIyMjIEdlbmVyYXRlIFBhc3N3b3JkDQpkZWYgZ2VuZXJhdGUxKF9jaWNpXyk6DQogICAgX2RhcHVudGFfPVtdDQogICAgZm9yIGkgaW4gX2NpY2lfLnNwbGl0KCIgIik6DQogICAgICAgIGlmIGxlbihpKTwzOmNvbnRpbnVlIA0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgaT1pLmxvd2VyKCkNCiAgICAgICAgICAgIGlmIGxlbihpKT09MyBvciBsZW4oaSk9PTQgb3IgbGVuKGkpPT01Ol9kYXB1bnRhXy5hcHBlbmQoaSsiMTIzIik7X2RhcHVudGFfLmFwcGVuZChpKyIxMjM0NSIpDQogICAgICAgICAgICBlbGlmIGxlbihpKT49NjpfZGFwdW50YV8uYXBwZW5kKGkpO19kYXB1bnRhXy5hcHBlbmQoaSsiMTIzIik7X2RhcHVudGFfLmFwcGVuZChpKyIxMjM0NSIpDQogICAgICAgICAgICBlbHNlOmNvbnRpbnVlDQogICAgX2RhcHVudGFfLmFwcGVuZChfY2ljaV8ubG93ZXIoKSkNCiAgICByZXR1cm4gX2RhcHVudGFfDQpkZWYgZ2VuZXJhdGUyKF9jaWNpXyk6DQogICAgX2RhcHVudGFfPVtdDQogICAgZm9yIGkgaW4gX2NpY2lfLnNwbGl0KCIgIik6DQogICAgICAgIGlmIGxlbihpKTwzOmNvbnRpbnVlDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBpPWkubG93ZXIoKQ0KICAgICAgICAgICAgaWYgbGVuKGkpPT0zIG9yIGxlbihpKT09NCBvciBsZW4oaSk9PTU6X2RhcHVudGFfLmFwcGVuZChpKyIxMjMiKTtfZGFwdW50YV8uYXBwZW5kKGkrIjEyMzQ1IikNCiAgICAgICAgICAgIGVsc2U6X2RhcHVudGFfLmFwcGVuZChpKTsgX2RhcHVudGFfLmFwcGVuZChpKyIxMjMiKTtfZGFwdW50YV8uYXBwZW5kKGkrIjEyMzQ1IikNCiAgICBfZGFwdW50YV8uYXBwZW5kKF9jaWNpXy5sb3dlcigpKTtfZGFwdW50YV8uYXBwZW5kKCJzYXlhbmciKTtfZGFwdW50YV8uYXBwZW5kKCJiaXNtaWxsYWgiKTtfZGFwdW50YV8uYXBwZW5kKCJhbmppbmciKQ0KICAgIHJldHVybiBfZGFwdW50YV8NCmRlZiBnZW5lcmF0ZTMoX2NpY2lfKToNCiAgICBfZGFwdW50YV89W10NCiAgICBmb3IgaSBpbiBfY2ljaV8uc3BsaXQoIiAiKToNCiAgICAgICAgaWYgbGVuKGkpPDM6Y29udGludWUNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIGk9aS5sb3dlcigpDQogICAgICAgICAgICBpZiBsZW4oaSk9PTMgb3IgbGVuKGkpPT00IG9yIGxlbihpKT09NTpfZGFwdW50YV8uYXBwZW5kKGkrIjEyMyIpO19kYXB1bnRhXy5hcHBlbmQoaSsiMTIzNDUiKQ0KICAgICAgICAgICAgZWxzZTpfZGFwdW50YV8uYXBwZW5kKGkpO19kYXB1bnRhXy5hcHBlbmQoaSsiMTIzIik7X2RhcHVudGFfLmFwcGVuZChpKyIxMjM0NSIpDQogICAgX2RhcHVudGFfLmFwcGVuZChfY2ljaV8ubG93ZXIoKSk7X2RhcHVudGFfLmFwcGVuZCgic2F5YW5nIik7X2RhcHVudGFfLmFwcGVuZCgiYmlzbWlsbGFoIik7X2RhcHVudGFfLmFwcGVuZCgiYW5qaW5nIik7X2RhcHVudGFfLmFwcGVuZCgiMTIzNDU2Iik7X2RhcHVudGFfLmFwcGVuZCgiYmFuZ3NhdCIpO19kYXB1bnRhXy5hcHBlbmQoInNheWFuZ2t1IikNCiAgICByZXR1cm4gX2RhcHVudGFfDQpkZWYgZ2VuZXJhdGU0KF9jaWNpXyk6DQogICAgX2RhcHVudGFfPVtdDQogICAgcHMgPSBfZGFwdW50YV9kYXB1bnRhXygncGFzcy50eHQnLCdyJykucmVhZCgpDQogICAgcHAgPSBfZGFwdW50YV9kYXB1bnRhXygncGFzc2FuZ2thLnR4dCcsJ3InKS5yZWFkKCkNCiAgICBmb3IgaSBpbiBfY2ljaV8uc3BsaXQoIiAiKTogIA0KICAgICAgICBpPWkubG93ZXIoKQ0KICAgICAgICBpZiBsZW4oaSk8Mzpjb250aW51ZQ0KICAgICAgICBlbGlmIGxlbihpKT09MyBvciBsZW4oaSk9PTQgb3IgbGVuKGkpPT01Ol9kYXB1bnRhXy5hcHBlbmQoaSsiMTIzIik7X2RhcHVudGFfLmFwcGVuZChpKyIxMjM0NSIpDQogICAgICAgIGVsc2U6X2RhcHVudGFfLmFwcGVuZChpKTtfZGFwdW50YV8uYXBwZW5kKGkrIjEyMyIpO19kYXB1bnRhXy5hcHBlbmQoaSsiMTIzNDUiKQ0KICAgIGlmIHBwIGluIFsnJywnICcsJyAgJ106cGFzcw0KICAgIGVsc2U6DQogICAgICAgIGZvciBpIGluIF9jaWNpXy5zcGxpdCgiICIpOiAgDQogICAgICAgICAgICBpPWkubG93ZXIoKQ0KICAgICAgICAgICAgZm9yIHggaW4gcHAuc3BsaXQoJywnKTpfZGFwdW50YV8uYXBwZW5kKGkreCkNCiAgICBpZiBwcyBpbiBbJycsJyAnLCcgICddOnBhc3MNCiAgICBlbHNlOg0KICAgICAgICBmb3IgeiBpbiBwcy5zcGxpdCgnLCcpOl9kYXB1bnRhXy5hcHBlbmQoeikNCiAgICBfZGFwdW50YV8uYXBwZW5kKF9jaWNpXy5sb3dlcigpKQ0KICAgIHJldHVybiBfZGFwdW50YV8NCmRlZiB0YW1iYWhfcGFzcygpOg0KICAgIF9kYXB1bnRhX2NpY2lfKCclc+KVkSclKE8pKTtfZGFwdW50YV9jaWNpXygnJXPilaDilZDilZBbJXPigKIlc10gJXNDb250b2ggOiBzYXlhbmcsYmlzbWlsbGFoLDEyMzQ1Niw3ODY3ODYnJShPLFAsTyxQKSk7Y3V5ID0gX2NpY2lfZGFwdW50YV8oJyVz4pWg4pWQ4pWQWyVz4oCiJXNdICVzTWFzdWtrYW4gUGFzcyBUYW1iYWhhbiBNYW51YWwgWzEgS2F0YV0gOiAnJShPLFAsTyxQKSk7Z2ggPSBfZGFwdW50YV9kYXB1bnRhXygncGFzcy50eHQnLCd3Jyk7Z2gud3JpdGUoY3V5KTtnaC5jbG9zZQ0KZGVmIHRhbWJhaF9wYXNzX2FuZ2thKCk6DQogICAgX2RhcHVudGFfY2ljaV8oJyVz4pWg4pWQ4pWQWyVz4oCiJXNdICVzQ29udG9oIDogMzIxLDc4NixnYW1pbmcsZ2FudGVuZyclKE8sUCxPLFApKTtjb3kgPSBfY2ljaV9kYXB1bnRhXygnJXPilaDilZDilZBbJXPigKIlc10gJXNNYXN1a2thbiBQYXNzIFRhbWJhaGFuIERpYmVsYWthbmcgTmFtYSA6ICclKE8sUCxPLFApKTt4eSA9IF9kYXB1bnRhX2RhcHVudGFfKCdwYXNzYW5na2EudHh0JywndycpO3h5LndyaXRlKGNveSk7eHkuY2xvc2UNCiAgICANCiMjIyBMb2dnZXIgQ3JhY2sNCmRlZiBsb2dfYXBpXzEoZW0scGFzKToNCiAgICB1YSA9IF9kYXB1bnRhX2RhcHVudGFfKCd1Z2VudC50eHQnLCdyJykucmVhZCgpDQogICAgciA9IHJlcXVlc3RzLlNlc3Npb24oKQ0KICAgIGhlYWRlciA9IHsieC1mYi1jb25uZWN0aW9uLWJhbmR3aWR0aCI6IHN0cihyYW5kb20ucmFuZGludCgyMDAwMDAwMC4wLCAzMDAwMDAwMC4wKSksIngtZmItc2ltLWhuaSI6IHN0cihyYW5kb20ucmFuZGludCgyMDAwMCwgNDAwMDApKSwieC1mYi1uZXQtaG5pIjogc3RyKHJhbmRvbS5yYW5kaW50KDIwMDAwLCA0MDAwMCkpLCJ4LWZiLWNvbm5lY3Rpb24tcXVhbGl0eSI6ICJFWENFTExFTlQiLCJ4LWZiLWNvbm5lY3Rpb24tdHlwZSI6ICJjZWxsLkNUUmFkaW9BY2Nlc3NUZWNobm9sb2d5SFNEUEEiLCJ1c2VyLWFnZW50IjogdWEsImNvbnRlbnQtdHlwZSI6ICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiLCJ4LWZiLWh0dHAtZW5naW5lIjogIkxpZ2VyIn0NCiAgICByZXNwb25zZSA9IHIuZ2V0KCdodHRwczovL2ItYXBpLmZhY2Vib29rLmNvbS9tZXRob2QvYXV0aC5sb2dpbj9mb3JtYXQ9anNvbiZlbWFpbD0nICsgZW0gKyAnJnBhc3N3b3JkPScgKyBwYXMgKyAnJmNyZWRlbnRpYWxzX3R5cGU9ZGV2aWNlX2Jhc2VkX2xvZ2luX3Bhc3N3b3JkJmdlbmVyYXRlX3Nlc3Npb25fY29va2llcz0xJmVycm9yX2RldGFpbF90eXBlPWJ1dHRvbl93aXRoX2Rpc2FibGVkJnNvdXJjZT1kZXZpY2VfYmFzZWRfbG9naW4mbWV0YV9pbmZfZmJtZXRhPSUyMCZjdXJyZW50bHlfbG9nZ2VkX2luX3VzZXJpZD0wJm1ldGhvZD1HRVQmbG9jYWxlPWVuX1VTJmNsaWVudF9jb3VudHJ5X2NvZGU9VVMmZmJfYXBpX2NhbGxlcl9jbGFzcz1jb20uZmFjZWJvb2suZm9zLmhlYWRlcnN2Mi5mYjRhb3JjYS5IZWFkZXJzVjJDb25maWdGZXRjaFJlcXVlc3RIYW5kbGVyJmFjY2Vzc190b2tlbj0zNTA2ODU1MzE3Mjh8NjJmOGNlOWY3NGIxMmY4NGMxMjNjYzIzNDM3YTRhMzImZmJfYXBpX3JlcV9mcmllbmRseV9uYW1lPWF1dGhlbnRpY2F0ZSZjcGw9dHJ1ZScsIGhlYWRlcnM9aGVhZGVyKQ0KICAgIGlmICdzZXNzaW9uX2tleScgaW4gcmVzcG9uc2UudGV4dCBhbmQgJ0VBQUEnIGluIHJlc3BvbnNlLnRleHQ6cmV0dXJuIHsic3RhdHVzIjoib2siLCJlbWFpbCI6ZW0sInBhc3MiOnBhc30NCiAgICBlbGlmICd3d3cuZmFjZWJvb2suY29tJyBpbiByZXNwb25zZS5qc29uKClbJ2Vycm9yX21zZyddOnJldHVybiB7InN0YXR1cyI6ImNwIiwiZW1haWwiOmVtLCJwYXNzIjpwYXN9DQogICAgZWxzZTpyZXR1cm4geyJzdGF0dXMiOiJlcnJvciIsImVtYWlsIjplbSwicGFzcyI6cGFzfQ0KZGVmIGxvZ19hcGlfMihlbSxwYXMpOg0KICAgIHVhID0gX2RhcHVudGFfZGFwdW50YV8oJ3VnZW50LnR4dCcsJ3InKS5yZWFkKCkNCiAgICByID0gcmVxdWVzdHMuU2Vzc2lvbigpDQogICAgaGVhZGVyID0geyJ4LWZiLWNvbm5lY3Rpb24tYmFuZHdpZHRoIjogc3RyKHJhbmRvbS5yYW5kaW50KDIwMDAwMDAwLjAsIDMwMDAwMDAwLjApKSwieC1mYi1zaW0taG5pIjogc3RyKHJhbmRvbS5yYW5kaW50KDIwMDAwLCA0MDAwMCkpLCJ4LWZiLW5ldC1obmkiOiBzdHIocmFuZG9tLnJhbmRpbnQoMjAwMDAsIDQwMDAwKSksIngtZmItY29ubmVjdGlvbi1xdWFsaXR5IjogIkVYQ0VMTEVOVCIsIngtZmItY29ubmVjdGlvbi10eXBlIjogImNlbGwuQ1RSYWRpb0FjY2Vzc1RlY2hub2xvZ3lIU0RQQSIsInVzZXItYWdlbnQiOiB1YSwiY29udGVudC10eXBlIjogImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIsIngtZmItaHR0cC1lbmdpbmUiOiAiTGlnZXIifQ0KICAgIHBhcmFtID0geydhY2Nlc3NfdG9rZW4nOiAnMzUwNjg1NTMxNzI4JTdDNjJmOGNlOWY3NGIxMmY4NGMxMjNjYzIzNDM3YTRhMzInLCAnZm9ybWF0JzogJ2pzb24nLCAnc2RrX3ZlcnNpb24nOiAnMicsICdlbWFpbCc6IGVtLCAnbG9jYWxlJzogJ2VuX1VTJywgJ3Bhc3N3b3JkJzogcGFzLCAnc2RrJzogJ2lvcycsICdnZW5lcmF0ZV9zZXNzaW9uX2Nvb2tpZXMnOiAnMScsICdzaWcnOiczZjU1NWY5OWZiNjFmY2Q3YWEwYzQ0ZjU4ZjUyMmVmNid9DQogICAgYXBpID0gJ2h0dHBzOi8vYi1hcGkuZmFjZWJvb2suY29tL21ldGhvZC9hdXRoLmxvZ2luJw0KICAgIHJlc3BvbnNlID0gci5nZXQoYXBpLCBwYXJhbXM9cGFyYW0sIGhlYWRlcnM9aGVhZGVyKQ0KICAgIGlmICdzZXNzaW9uX2tleScgaW4gcmVzcG9uc2UudGV4dCBhbmQgJ0VBQUEnIGluIHJlc3BvbnNlLnRleHQ6cmV0dXJuIHsic3RhdHVzIjoib2siLCJlbWFpbCI6ZW0sInBhc3MiOnBhc30NCiAgICBlbGlmICd3d3cuZmFjZWJvb2suY29tJyBpbiByZXNwb25zZS5qc29uKClbJ2Vycm9yX21zZyddOnJldHVybiB7InN0YXR1cyI6ImNwIiwiZW1haWwiOmVtLCJwYXNzIjpwYXN9DQogICAgZWxzZTpyZXR1cm4geyJzdGF0dXMiOiJlcnJvciIsImVtYWlsIjplbSwicGFzcyI6cGFzfQ0KZGVmIGxvZ19tYmFzaWNfMShlbSxwYXMpOg0KICAgIHVhID0gX2RhcHVudGFfZGFwdW50YV8oJ3VnZW50LnR4dCcsJ3InKS5yZWFkKCkNCiAgICByID0gcmVxdWVzdHMuU2Vzc2lvbigpDQogICAgci5oZWFkZXJzLnVwZGF0ZSh7Ikhvc3QiOiJtYmFzaWMuZmFjZWJvb2suY29tIiwiY2FjaGUtY29udHJvbCI6Im1heC1hZ2U9MCIsInVwZ3JhZGUtaW5zZWN1cmUtcmVxdWVzdHMiOiIxIiwidXNlci1hZ2VudCI6dWEsImFjY2VwdCI6InRleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL3dlYnAsaW1hZ2UvYXBuZywqLyo7cT0wLjgiLCJhY2NlcHQtZW5jb2RpbmciOiJnemlwLCBkZWZsYXRlIiwiYWNjZXB0LWxhbmd1YWdlIjoiaWQtSUQsaWQ7cT0wLjksZW4tVVM7cT0wLjgsZW47cT0wLjcifSkNCiAgICBwID0gci5nZXQoImh0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbS8iKQ0KICAgIGIgPSByLnBvc3QoImh0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbS9sb2dpbi5waHAiLCBkYXRhPXsiZW1haWwiOiBlbSwgInBhc3MiOiBwYXMsICJsb2dpbiI6ICJzdWJtaXQifSkNCiAgICBfcmF3X2Nvb2tpZXNfID0gKCI7Iikuam9pbihbICIlcz0lcyIgJSAoa2V5LCB2YWx1ZSkgZm9yIGtleSwgdmFsdWUgaW4gci5jb29raWVzLmdldF9kaWN0KCkuaXRlbXMoKSBdKQ0KICAgIGlmICJjX3VzZXIiIGluIHIuY29va2llcy5nZXRfZGljdCgpLmtleXMoKTpyZXR1cm4geyJzdGF0dXMiOiJvayIsImVtYWlsIjplbSwicGFzcyI6cGFzLCJjb29raWVzIjpfcmF3X2Nvb2tpZXNffQ0KICAgIGVsaWYgImNoZWNrcG9pbnQiIGluIHIuY29va2llcy5nZXRfZGljdCgpLmtleXMoKTpyZXR1cm4geyJzdGF0dXMiOiJjcCIsImVtYWlsIjplbSwicGFzcyI6cGFzLCJjb29raWVzIjpfcmF3X2Nvb2tpZXNffQ0KICAgIGVsc2U6cmV0dXJuIHsic3RhdHVzIjoiZXJyb3IiLCJlbWFpbCI6ZW0sInBhc3MiOnBhc30NCmRlZiBsb2dfbWJhc2ljXzIoZW0scGFzKToNCiAgICB1YSA9IF9kYXB1bnRhX2RhcHVudGFfKCd1Z2VudC50eHQnLCdyJykucmVhZCgpDQogICAgciA9IHJlcXVlc3RzLlNlc3Npb24oKQ0KICAgIHIuaGVhZGVycy51cGRhdGUoeyJIb3N0IjoibWJhc2ljLmZhY2Vib29rLmNvbSIsImNhY2hlLWNvbnRyb2wiOiJtYXgtYWdlPTAiLCJ1cGdyYWRlLWluc2VjdXJlLXJlcXVlc3RzIjoiMSIsInVzZXItYWdlbnQiOnVhLCJhY2NlcHQiOiJ0ZXh0L2h0bWwsYXBwbGljYXRpb24veGh0bWwreG1sLGFwcGxpY2F0aW9uL3htbDtxPTAuOSxpbWFnZS93ZWJwLGltYWdlL2FwbmcsKi8qO3E9MC44IiwiYWNjZXB0LWVuY29kaW5nIjoiZ3ppcCwgZGVmbGF0ZSIsImFjY2VwdC1sYW5ndWFnZSI6ImlkLUlELGlkO3E9MC45LGVuLVVTO3E9MC44LGVuO3E9MC43In0pDQogICAgcCA9IHIuZ2V0KCJodHRwczovL21iYXNpYy5mYWNlYm9vay5jb20vIikNCiAgICBiID0gYnM0LkJlYXV0aWZ1bFNvdXAocC50ZXh0LCJodG1sLnBhcnNlciIpDQogICAgbWV0YT0iIi5qb2luKGJzNC5yZS5maW5kYWxsKCdkdHNnIjpceyJ0b2tlbiI6IiguKj8pIicscC50ZXh0KSkNCiAgICBkYXRhPXt9DQogICAgZm9yIGkgaW4gYigiaW5wdXQiKToNCiAgICAgICAgaWYgaS5nZXQoInZhbHVlIikgaXMgTm9uZToNCiAgICAgICAgICAgIGlmIGkuZ2V0KCJuYW1lIik9PSJlbWFpbCI6ZGF0YS51cGRhdGUoeyJlbWFpbCI6ZW19KQ0KICAgICAgICAgICAgZWxpZiBpLmdldCgibmFtZSIpPT0icGFzcyI6ZGF0YS51cGRhdGUoeyJwYXNzIjpwYXN9KQ0KICAgICAgICAgICAgZWxzZTpkYXRhLnVwZGF0ZSh7aS5nZXQoIm5hbWUiKToiIn0pDQogICAgICAgIGVsc2U6ZGF0YS51cGRhdGUoe2kuZ2V0KCJuYW1lIik6aS5nZXQoInZhbHVlIil9KQ0KICAgIGRhdGEudXBkYXRlKHsiZmJfZHRzZyI6bWV0YSwibV9zZXNzIjoiIiwiX191c2VyIjoiMCIsIl9fcmVxIjoiZCIsIl9fY3NyIjoiIiwiX19hIjoiIiwiX19keW4iOiIiLCJlbmNwYXNzIjoiIn0pDQogICAgci5oZWFkZXJzLnVwZGF0ZSh7InJlZmVyZXIiOiJodHRwczovL21iYXNpYy5mYWNlYm9vay5jb20vbG9naW4vP25leHQmcmVmPWRibCZmbCZyZWZpZD04In0pDQogICAgcG8gPSByLnBvc3QoImh0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbS9sb2dpbi9kZXZpY2UtYmFzZWQvbG9naW4vYXN5bmMvP3JlZnNyYz1odHRwcyUzQSUyRiUyRm0uZmFjZWJvb2suY29tJTJGbG9naW4lMkYlM0ZyZWYlM0RkYmwmbHd2PTEwMCIsZGF0YT1kYXRhKS50ZXh0DQogICAgX3Jhd19jb29raWVzXyA9ICgiOyIpLmpvaW4oWyAiJXM9JXMiICUgKGtleSwgdmFsdWUpIGZvciBrZXksIHZhbHVlIGluIHIuY29va2llcy5nZXRfZGljdCgpLml0ZW1zKCkgXSkNCiAgICBpZiAiY191c2VyIiBpbiBsaXN0KHIuY29va2llcy5nZXRfZGljdCgpLmtleXMoKSk6cmV0dXJuIHsic3RhdHVzIjoib2siLCJlbWFpbCI6ZW0sInBhc3MiOnBhcywiY29va2llcyI6X3Jhd19jb29raWVzX30NCiAgICBlbGlmICJjaGVja3BvaW50IiBpbiBsaXN0KHIuY29va2llcy5nZXRfZGljdCgpLmtleXMoKSk6cmV0dXJuIHsic3RhdHVzIjoiY3AiLCJlbWFpbCI6ZW0sInBhc3MiOnBhcywiY29va2llcyI6X3Jhd19jb29raWVzX30NCiAgICBlbHNlOnJldHVybiB7InN0YXR1cyI6ImVycm9yIiwiZW1haWwiOmVtLCJwYXNzIjpwYXN9DQpkZWYgbG9nX21vYmlsZV8xKGVtLHBhcyk6DQogICAgdWEgPSBfZGFwdW50YV9kYXB1bnRhXygndWdlbnQudHh0JywncicpLnJlYWQoKQ0KICAgIHIgPSByZXF1ZXN0cy5TZXNzaW9uKCkNCiAgICByLmhlYWRlcnMudXBkYXRlKHsiSG9zdCI6Im0uZmFjZWJvb2suY29tIiwiY2FjaGUtY29udHJvbCI6Im1heC1hZ2U9MCIsInVwZ3JhZGUtaW5zZWN1cmUtcmVxdWVzdHMiOiIxIiwidXNlci1hZ2VudCI6dWEsImFjY2VwdCI6InRleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL3dlYnAsaW1hZ2UvYXBuZywqLyo7cT0wLjgiLCJhY2NlcHQtZW5jb2RpbmciOiJnemlwLCBkZWZsYXRlIiwiYWNjZXB0LWxhbmd1YWdlIjoiaWQtSUQsaWQ7cT0wLjksZW4tVVM7cT0wLjgsZW47cT0wLjcifSkNCiAgICBwID0gci5nZXQoImh0dHBzOi8vbS5mYWNlYm9vay5jb20vIikNCiAgICBiID0gci5wb3N0KCJodHRwczovL20uZmFjZWJvb2suY29tL2xvZ2luLnBocCIsIGRhdGE9eyJlbWFpbCI6IGVtLCAicGFzcyI6IHBhcywgImxvZ2luIjogInN1Ym1pdCJ9KQ0KICAgIF9yYXdfY29va2llc18gPSAoIjsiKS5qb2luKFsgIiVzPSVzIiAlIChrZXksIHZhbHVlKSBmb3Iga2V5LCB2YWx1ZSBpbiByLmNvb2tpZXMuZ2V0X2RpY3QoKS5pdGVtcygpIF0pDQogICAgaWYgImNfdXNlciIgaW4gci5jb29raWVzLmdldF9kaWN0KCkua2V5cygpOnJldHVybiB7InN0YXR1cyI6Im9rIiwiZW1haWwiOmVtLCJwYXNzIjpwYXMsImNvb2tpZXMiOl9yYXdfY29va2llc199DQogICAgZWxpZiAiY2hlY2twb2ludCIgaW4gci5jb29raWVzLmdldF9kaWN0KCkua2V5cygpOnJldHVybiB7InN0YXR1cyI6ImNwIiwiZW1haWwiOmVtLCJwYXNzIjpwYXMsImNvb2tpZXMiOl9yYXdfY29va2llc199DQogICAgZWxzZTpyZXR1cm4geyJzdGF0dXMiOiJlcnJvciIsImVtYWlsIjplbSwicGFzcyI6cGFzfQ0KZGVmIGxvZ19tb2JpbGVfMihlbSxwYXMpOg0KICAgIHVhID0gX2RhcHVudGFfZGFwdW50YV8oJ3VnZW50LnR4dCcsJ3InKS5yZWFkKCkNCiAgICByID0gcmVxdWVzdHMuU2Vzc2lvbigpDQogICAgci5oZWFkZXJzLnVwZGF0ZSh7Ikhvc3QiOiJtLmZhY2Vib29rLmNvbSIsImNhY2hlLWNvbnRyb2wiOiJtYXgtYWdlPTAiLCJ1cGdyYWRlLWluc2VjdXJlLXJlcXVlc3RzIjoiMSIsInVzZXItYWdlbnQiOnVhLCJhY2NlcHQiOiJ0ZXh0L2h0bWwsYXBwbGljYXRpb24veGh0bWwreG1sLGFwcGxpY2F0aW9uL3htbDtxPTAuOSxpbWFnZS93ZWJwLGltYWdlL2FwbmcsKi8qO3E9MC44IiwiYWNjZXB0LWVuY29kaW5nIjoiZ3ppcCwgZGVmbGF0ZSIsImFjY2VwdC1sYW5ndWFnZSI6ImlkLUlELGlkO3E9MC45LGVuLVVTO3E9MC44LGVuO3E9MC43In0pDQogICAgcCA9IHIuZ2V0KCJodHRwczovL20uZmFjZWJvb2suY29tLyIpDQogICAgYiA9IGJzNC5CZWF1dGlmdWxTb3VwKHAudGV4dCwiaHRtbC5wYXJzZXIiKQ0KICAgIG1ldGE9IiIuam9pbihiczQucmUuZmluZGFsbCgnZHRzZyI6XHsidG9rZW4iOiIoLio/KSInLHAudGV4dCkpDQogICAgZGF0YT17fQ0KICAgIGZvciBpIGluIGIoImlucHV0Iik6DQogICAgICAgIGlmIGkuZ2V0KCJ2YWx1ZSIpIGlzIE5vbmU6DQogICAgICAgICAgICBpZiBpLmdldCgibmFtZSIpPT0iZW1haWwiOmRhdGEudXBkYXRlKHsiZW1haWwiOmVtfSkNCiAgICAgICAgICAgIGVsaWYgaS5nZXQoIm5hbWUiKT09InBhc3MiOmRhdGEudXBkYXRlKHsicGFzcyI6cGFzfSkNCiAgICAgICAgICAgIGVsc2U6ZGF0YS51cGRhdGUoe2kuZ2V0KCJuYW1lIik6IiJ9KQ0KICAgICAgICBlbHNlOmRhdGEudXBkYXRlKHtpLmdldCgibmFtZSIpOmkuZ2V0KCJ2YWx1ZSIpfSkNCiAgICBkYXRhLnVwZGF0ZSh7ImZiX2R0c2ciOm1ldGEsIm1fc2VzcyI6IiIsIl9fdXNlciI6IjAiLCJfX3JlcSI6ImQiLCJfX2NzciI6IiIsIl9fYSI6IiIsIl9fZHluIjoiIiwiZW5jcGFzcyI6IiJ9KQ0KICAgIHIuaGVhZGVycy51cGRhdGUoeyJyZWZlcmVyIjoiaHR0cHM6Ly9tLmZhY2Vib29rLmNvbS9sb2dpbi8/bmV4dCZyZWY9ZGJsJmZsJnJlZmlkPTgifSkNCiAgICBwbyA9IHIucG9zdCgiaHR0cHM6Ly9tLmZhY2Vib29rLmNvbS9sb2dpbi9kZXZpY2UtYmFzZWQvbG9naW4vYXN5bmMvP3JlZnNyYz1odHRwcyUzQSUyRiUyRm0uZmFjZWJvb2suY29tJTJGbG9naW4lMkYlM0ZyZWYlM0RkYmwmbHd2PTEwMCIsZGF0YT1kYXRhKS50ZXh0DQogICAgX3Jhd19jb29raWVzXyA9ICgiOyIpLmpvaW4oWyAiJXM9JXMiICUgKGtleSwgdmFsdWUpIGZvciBrZXksIHZhbHVlIGluIHIuY29va2llcy5nZXRfZGljdCgpLml0ZW1zKCkgXSkNCiAgICBpZiAiY191c2VyIiBpbiBsaXN0KHIuY29va2llcy5nZXRfZGljdCgpLmtleXMoKSk6cmV0dXJuIHsic3RhdHVzIjoib2siLCJlbWFpbCI6ZW0sInBhc3MiOnBhcywiY29va2llcyI6X3Jhd19jb29raWVzX30NCiAgICBlbGlmICJjaGVja3BvaW50IiBpbiBsaXN0KHIuY29va2llcy5nZXRfZGljdCgpLmtleXMoKSk6cmV0dXJuIHsic3RhdHVzIjoiY3AiLCJlbWFpbCI6ZW0sInBhc3MiOnBhcywiY29va2llcyI6X3Jhd19jb29raWVzX30NCiAgICBlbHNlOnJldHVybiB7InN0YXR1cyI6ImVycm9yIiwiZW1haWwiOmVtLCJwYXNzIjpwYXN9DQoNCiMjIyBDaGVjayBPcHNpDQpkZWYgY2VrX29wc2kodXNlcixwdyxmb3JtYXQpOg0KICAgIF9yZXFfc2VzXyA9IHJlcXVlc3RzLlNlc3Npb24oKQ0KICAgIHRyeTpjZWtfZGV2X29wc2kgICAgICAgICAgPSBvcGVuKCdvcHNpX2Rldi50eHQnLCdyJykucmVhZCgpDQogICAgZXhjZXB0OmNla19kZXZfb3BzaSAgICAgICA9ICdudWxsJw0KICAgIHRyeTpfYXV0b19jaGFuZ2VfcGFzc18gICAgPSBvcGVuKCdhdXRvX2dhbnRpLnR4dCcsJ3InKS5yZWFkKCkNCiAgICBleGNlcHQ6X2F1dG9fY2hhbmdlX3Bhc3NfID0gJ1lhJw0KICAgIHRyeTpjZWtfcGlsaWhfb3BzaSAgICAgICAgPSBvcGVuKCdtdW5jdWxfb3BzaS50eHQnLCdyJykucmVhZCgpDQogICAgZXhjZXB0OmNla19waWxpaF9vcHNpICAgICA9ICdUaWRhaycNCiAgICBfcmVxX3Nlc18uaGVhZGVycy51cGRhdGUoeyJIb3N0IjoibWJhc2ljLmZhY2Vib29rLmNvbSIsImFjY2VwdCI6InRleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL2F2aWYsaW1hZ2Uvd2VicCxpbWFnZS9hcG5nLCovKjtxPTAuOCxhcHBsaWNhdGlvbi9zaWduZWQtZXhjaGFuZ2U7dj1iMztxPTAuOSIsImFjY2VwdC1lbmNvZGluZyI6Imd6aXAsIGRlZmxhdGUiLCJhY2NlcHQtbGFuZ3VhZ2UiOiJpZC1JRCxpZDtxPTAuOSIsInJlZmVyZXIiOiJodHRwczovL21iYXNpYy5mYWNlYm9vay5jb20vIiwidXNlci1hZ2VudCI6dWFfeGlhb21pfSk7X3NvcF9kZXZfID0gcGFyKF9yZXFfc2VzXy5nZXQoaG9zdCsiL2xvZ2luLz9uZXh0JnJlZj1kYmwmZmwmcmVmaWQ9OCIpLnRleHQsImh0bWwucGFyc2VyIik7X2xpbmt1cmxfID0gX3NvcF9kZXZfLmZpbmQoImZvcm0iLHsibWV0aG9kIjoicG9zdCJ9KQ0KICAgIGZvciBfY2ljaV8gaW4gX3NvcF9kZXZfKCJpbnB1dCIpOmRhdGFfMS51cGRhdGUoe19jaWNpXy5nZXQoIm5hbWUiKTpfY2ljaV8uZ2V0KCJ2YWx1ZSIpfSkNCiAgICBkYXRhXzEudXBkYXRlKHsiZW1haWwiOnVzZXIsInBhc3MiOnB3fSk7X3VybF9wb3N0XyA9IF9yZXFfc2VzXy5wb3N0KGhvc3QrX2xpbmt1cmxfLmdldCgiYWN0aW9uIiksZGF0YT1kYXRhXzEpO19yZXNwb25zZV8gPSBwYXIoX3VybF9wb3N0Xy50ZXh0LCAiaHRtbC5wYXJzZXIiKQ0KICAgIGlmICJjX3VzZXIiIGluIF9yZXFfc2VzXy5jb29raWVzLmdldF9kaWN0KCk6DQogICAgICAgIGlmICJBa3VuIEFuZGEgRGlrdW5jaSIgaW4gX3VybF9wb3N0Xy50ZXh0OnBhc3MNCiAgICAgICAgZWxzZTpfY29va2llc18gPSAnJy5qb2luKF9yZXFfc2VzXy5jb29raWVzLmdldF9kaWN0KCkpO19yZXN1bHRfb2tfID0gIlxyJXNbJXNPSyVzXSAlcyDigKIgJXMlcyVzICAgICAgICAgICIlKEgsUCxILHVzZXIscHcsdGFodW4odXNlciksUCk7Y2VrX2FwayhfcmVzdWx0X29rXyxjdnRfY29va2llcyhfY29va2llc18pKQ0KICAgIGVsaWYgImNoZWNrcG9pbnQiIGluIF9yZXFfc2VzXy5jb29raWVzLmdldF9kaWN0KCk6DQogICAgICAgIF9yYXR5YV8gPSAwO2p1bWxhaF9vcHNpICA9IFtdO190aXRsZV9kZXZfID0gcmUuZmluZGFsbCgiXDx0aXRsZT4oLio/KTxcL3RpdGxlPiIsc3RyKF9yZXNwb25zZV8pKTtsaW5rXzIgPSBfcmVzcG9uc2VfLmZpbmQoImZvcm0iLHsibWV0aG9kIjoicG9zdCJ9KTtsaXN0X2lucHV0ID0gWydmYl9kdHNnJywnamF6b2VzdCcsJ2NoZWNrcG9pbnRfZGF0YScsJ3N1Ym1pdFtDb250aW51ZV0nLCduaCddDQogICAgICAgIGZvciBfZGFwdW50YV8gaW4gX3Jlc3BvbnNlXygiaW5wdXQiKToNCiAgICAgICAgICAgIGlmIF9kYXB1bnRhXy5nZXQoIm5hbWUiKSBpbiBsaXN0X2lucHV0OmRhdGFfMi51cGRhdGUoe19kYXB1bnRhXy5nZXQoIm5hbWUiKTpfZGFwdW50YV8uZ2V0KCJ2YWx1ZSIpfSkNCiAgICAgICAgX3JlcV9hY3RfID0gX3JlcV9zZXNfLnBvc3QoaG9zdCtsaW5rXzIuZ2V0KCJhY3Rpb24iKSxkYXRhPWRhdGFfMik7X3Jlc3BvbnNlMl8gPSBwYXIoX3JlcV9hY3RfLnRleHQsImh0bWwucGFyc2VyIik7X2NoZWNrX29wc2lfICA9IFtfc2Fsc2FiaWxhXy50ZXh0IGZvciBfc2Fsc2FiaWxhXyBpbiBfcmVzcG9uc2UyXy5maW5kX2FsbCgib3B0aW9uIildDQogICAgICAgIGlmIGxlbihfY2hlY2tfb3BzaV8pPT0wOg0KICAgICAgICAgICAgaWYgIkxpaGF0IGRldGFpbCBsb2dpbiB5YW5nIGRpdGFtcGlsa2FuLiBJbmkgQW5kYT8iIGluIF90aXRsZV9kZXZfOg0KICAgICAgICAgICAgICAgIGlmIF9hdXRvX2NoYW5nZV9wYXNzXyA9PSAnWWEnOmNoYW5nZV9wYXNzKHVzZXIsX3JlcV9zZXNfLF9yZXNwb25zZV8sbGlua18yKQ0KICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgIGlmIGNla19waWxpaF9vcHNpID09ICdZYSc6X2RhcHVudGFfY2ljaV8oZm9ybWF0KTtfZGFwdW50YV9jaWNpXygnICAgJXPigKIgJXNBa3VuIE9uZSBUYXAnJShILFApKTtfZGFwdW50YV9jaWNpXygiIikNCiAgICAgICAgICAgICAgICAgICAgZWxzZTpfZGFwdW50YV9jaWNpXyhmb3JtYXQpO19kYXB1bnRhX2NpY2lfKCcgICAlc+KAoiAlc0FrdW4gT25lIFRhcCclKEgsUCkpDQogICAgICAgICAgICBlbHNlOnBhc3MNCiAgICAgICAgZWxpZiBsZW4oX2NoZWNrX29wc2lfKSE9MDoNCiAgICAgICAgICAgIGlmIGNla19waWxpaF9vcHNpID09ICdZYSc6DQogICAgICAgICAgICAgICAgZm9yIF9hc3VfIGluIHJhbmdlKGxlbihfY2hlY2tfb3BzaV8pKTpfcmF0eWFfICs9IDE7anVtbGFoX29wc2kuYXBwZW5kKCJcbiAgICAgIitQK3N0cihfYXN1XysxKSsiLiAiK19jaGVja19vcHNpX1tfYXN1X10rIiAiKQ0KICAgICAgICAgICAgICAgIGp1bW9wID0gKCclcyAgIERpdGVtdWthbiAlcyBPcHNpIDogJyUoUCxzdHIobGVuKGp1bWxhaF9vcHNpKSkpKTtfZGFwdW50YV9jaWNpXyhmb3JtYXQpO19kYXB1bnRhX2NpY2lfKGp1bW9wKyIiLmpvaW4oanVtbGFoX29wc2kpKTtfZGFwdW50YV9jaWNpXygiIikNCiAgICAgICAgICAgIGVsc2U6X2RhcHVudGFfY2ljaV8oZm9ybWF0KQ0KICAgIGVsc2U6DQogICAgICAgIGlmICdoYXNpbCcgaW4gY2VrX2Rldl9vcHNpOl9kYXB1bnRhX2NpY2lfKGZvcm1hdCk7X2RhcHVudGFfY2ljaV8oIiVzWyVzISVzXSAlc1Bhc3N3b3JkIFRlbGFoIERpdWJhaCIlKE0sUCxNLFApKTtfZGFwdW50YV9jaWNpXygnJykNCiAgICAgICAgZWxzZTpfZGFwdW50YV9jaWNpXyhmb3JtYXQpDQoNCiMjIyBHYW50aSBQYXNzd29yZA0KZGVmIGF1dG9fZ2FudGlfcGFzcyhfcGl5ZV8pOg0KICAgIHdoaWxlIFRydWU6DQogICAgICAgIF9naW1hbmFfID0gX2NpY2lfZGFwdW50YV8oJyVz4pWg4pWQ4pWQWyVz4oCiJXNdICVzR2FudGkgUGFzcyBBa3VuIE9uZSBUYXA/IFt5L3RdIDogJyUoTyxQLE8sUCkpDQogICAgICAgIGlmIF9naW1hbmFfIGluIFsnJ106amFsYW4oJyVz4pWa4pWQ4pWQWyVzISVzXSAlc0lzaSBZYW5nIEJlbmFyJyUoTSxQLE0sUCkpO21lbnUoKQ0KICAgICAgICBlbGlmIF9naW1hbmFfIGluIFsnMScsJzAxJywnMDAxJywneScsJ1knXToNCiAgICAgICAgICAgIG9wZW4oJ2F1dG9fZ2FudGkudHh0JywndycpLndyaXRlKCdZYScpO19uZXdwYXNzXyA9IF9jaWNpX2RhcHVudGFfKCclc+KVoOKVkOKVkFslc+KAoiVzXSAlc01hc3Vra2FuIFNhbmRpIE9uZSBUYXAgOiAnJShPLFAsTyxQKSkNCiAgICAgICAgICAgIGlmIGxlbihfbmV3cGFzc18pPDY6cHJpbnQoJyVz4pWa4pWQ4pWQWyVzISVzXSAlc1NhbmRpIE1pbmltYWwgNiBLYXJha3RlciclKE0sUCxNLFApKTt0aW1lLnNsZWVwKDMpO21lbnUoKQ0KICAgICAgICAgICAgZWxzZTpvcGVuKCdfbmV3X3Bhc3NfLnR4dCcsJ3cnKS53cml0ZShfbmV3cGFzc18pDQogICAgICAgICAgICBpZiBfcGl5ZV8gPT0gJ1lhJzpvcGVuKCdtdW5jdWxfb3BzaS50eHQnLCd3Jykud3JpdGUoJ1lhJykNCiAgICAgICAgICAgIGVsaWYgX3BpeWVfID09ICdUaWRhayc6b3BlbignbXVuY3VsX29wc2kudHh0JywndycpLndyaXRlKCdUaWRhaycpDQogICAgICAgICAgICBlbHNlOm9wZW4oJ211bmN1bF9vcHNpLnR4dCcsJ3cnKS53cml0ZSgnVGlkYWsnKQ0KICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgZWxpZiBfZ2ltYW5hXyBpbiBbJzInLCcwMicsJzAwMicsJ3QnLCdUJ106b3BlbignYXV0b19nYW50aS50eHQnLCd3Jykud3JpdGUoJ1RpZGFrJyk7cGFzcw0KICAgICAgICBlbHNlOmphbGFuKCclc+KVmuKVkOKVkFslcyElc10gJXNJc2kgWWFuZyBCZW5hciclKE0sUCxNLFApKTttZW51KCkNCiAgICAgICAgYnJlYWsNCmRlZiBjaGFuZ2VfcGFzcyh1c2VyLF9yZXFfc2VzXyxfcmVzcG9uc2VfLGxpbmtfMik6DQogICAgZ2xvYmFsIG9rLGNwDQogICAgZmlsZXNfb2sgPSAiT0svJXMudHh0IiUodGFuZ2dhbCkNCiAgICB0cnk6X25ld19wYXNzXyA9IG9wZW4oJ19uZXdfcGFzc18udHh0JywncicpLnJlYWQoKQ0KICAgIGV4Y2VwdDpfbmV3X3Bhc3NfID0gJ0RhcHVudGE5OUBAQCcNCiAgICBfcGFzc3dvcmRfID0gJycuam9pbihfbmV3X3Bhc3NfKTtfcmVzdWx0X29rXyA9ICJcciVzWyVzT0slc10gJXMg4oCiICVzJXMlcyAgICAgICAgICAiJShILFAsSCx1c2VyLF9wYXNzd29yZF8sdGFodW4odXNlciksUCk7X2J1dHRvbl9kZXZfID0gWyJzdWJtaXRbWWVzXSIsIm5oIiwiZmJfZHRzZyIsImphem9lc3QiLCJjaGVja3BvaW50X2RhdGEiXQ0KICAgIGZvciBfZGFwdW50YV8gaW4gX3Jlc3BvbnNlXygiaW5wdXQiKToNCiAgICAgICAgaWYgX2RhcHVudGFfLmdldCgibmFtZSIpIGluIF9idXR0b25fZGV2XzpkYXRhX2NoYW5nZV8xLnVwZGF0ZSh7X2RhcHVudGFfLmdldCgibmFtZSIpOl9kYXB1bnRhXy5nZXQoInZhbHVlIil9KQ0KICAgIF9nYW50aV9wYXNzXyA9IF9yZXFfc2VzXy5wb3N0KGhvc3QrbGlua18yLmdldCgiYWN0aW9uIiksZGF0YT1kYXRhX2NoYW5nZV8xKS50ZXh0O19yZXN1bHRfcGFzc18gPSBwYXIoX2dhbnRpX3Bhc3NfLCJodG1sLnBhcnNlciIpO19saW5rXzNfID0gX3Jlc3VsdF9wYXNzXy5maW5kKCJmb3JtIix7Im1ldGhvZCI6InBvc3QifSk7X2J1dHRvbl9kZXZfXzJfID0gWyJzdWJtaXRbTmV4dF0iLCJuaCIsImZiX2R0c2ciLCJqYXpvZXN0Il0NCiAgICBpZiAiQnVhdCBLYXRhIFNhbmRpIEJhcnUiIGluIHJlLmZpbmRhbGwoIlw8dGl0bGU+KC4qPyk8XC90aXRsZT4iLHN0cihfZ2FudGlfcGFzc18pKToNCiAgICAgICAgZm9yIF9jaWNpXyBpbiBfcmVzdWx0X3Bhc3NfKCJpbnB1dCIpOg0KICAgICAgICAgICAgaWYgX2NpY2lfLmdldCgibmFtZSIpIGluIF9idXR0b25fZGV2X18yXzpkYXRhX2NoYW5nZV8yLnVwZGF0ZSh7X2NpY2lfLmdldCgibmFtZSIpOl9jaWNpXy5nZXQoInZhbHVlIil9KQ0KICAgICAgICBkYXRhX2NoYW5nZV8yLnVwZGF0ZSh7InBhc3N3b3JkX25ldyI6X3Bhc3N3b3JkX30pO19zZXNfZmluYWxfID0gX3JlcV9zZXNfLnBvc3QoaG9zdCtfbGlua18zXy5nZXQoImFjdGlvbiIpLGRhdGE9ZGF0YV9jaGFuZ2VfMik7X2Nvb2tpZXNfID0gKCI7Iikuam9pbihbICIlcz0lcyIgJSAoa2V5LCB2YWx1ZSkgZm9yIGtleSwgdmFsdWUgaW4gX3JlcV9zZXNfLmNvb2tpZXMuZ2V0X2RpY3QoKS5pdGVtcygpXSk7X19jb29raWVzX18gPSBjdnRfY29va2llcyhfY29va2llc18pO2Nla19hcGsoX3Jlc3VsdF9va18sX19jb29raWVzX18pO29rLmFwcGVuZCgiJXPigKIlcyIlKHVzZXIsX3Bhc3N3b3JkXykpO19kYXB1bnRhX2RhcHVudGFfKGZpbGVzX29rLCJhKyIpLndyaXRlKCIlc+KAoiVzXG4iJSh1c2VyLF9wYXNzd29yZF8pKTtjcCAtPSAxO3Bhc3MNCiAgICBlbHNlOnBhc3MNCg0KIyMjIENlayBBcGxpa2FzaQ0KZGVmIGNla19hcGsoaF9vayxfZGFwdW50YV8pOg0KICAgIGFwayA9IFtdO3Nlc18gPSByZXF1ZXN0cy5TZXNzaW9uKCkNCiAgICBjZWtfcGlsaWhfb3BzaSA9IG9wZW4oJ211bmN1bF9vcHNpLnR4dCcsJ3InKS5yZWFkKCkNCiAgICB1cmwgPSAiaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29tL3NldHRpbmdzL2FwcHMvdGFiYmVkLz90YWI9YWN0aXZlIjtkYXRfZ2FtZSA9IHNlc18uZ2V0KHVybCxjb29raWVzPXsnY29va2llJzpfZGFwdW50YV99KTtkYXRhZ2FtZSA9IHBhcihkYXRfZ2FtZS5jb250ZW50LCdodG1sLnBhcnNlcicpO2Zvcm1fICAgID0gZGF0YWdhbWUuZmluZCgnZm9ybScsbWV0aG9kPSdwb3N0JykNCiAgICBmb3IgYXN1IGluIGZvcm1fLmZpbmRfYWxsKCJoMyIpOg0KICAgICAgICB0cnk6Y2VsZW5nID0gYXN1LmZpbmQoJ3NwYW4nKS50ZXh0O2Fway5hcHBlbmQoJ1xuICAg4oCiICcrY2VsZW5nKQ0KICAgICAgICBleGNlcHQ6cGFzcw0KICAgIHVybDIgPSAiaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29tL3NldHRpbmdzL2FwcHMvdGFiYmVkLz90YWI9aW5hY3RpdmUiO2RhdF9nYW1lID0gc2VzXy5nZXQodXJsMixjb29raWVzPXsnY29va2llJzpfZGFwdW50YV99KTtkYXRhZ2FtZSA9IHBhcihkYXRfZ2FtZS5jb250ZW50LCdodG1sLnBhcnNlcicpO2Zvcm1fICAgID0gZGF0YWdhbWUuZmluZCgnZm9ybScsbWV0aG9kPSdwb3N0JykNCiAgICBmb3IgYXN1IGluIGZvcm1fLmZpbmRfYWxsKCJoMyIpOg0KICAgICAgICB0cnk6Y2VsZW5nID0gYXN1LmZpbmQoJ3NwYW4nKS50ZXh0O2Fway5hcHBlbmQoJ1xuICAg4oCiICcrY2VsZW5nKQ0KICAgICAgICBleGNlcHQ6cGFzcw0KICAgIGlmIGNla19waWxpaF9vcHNpID09ICdZYSc6X2RhcHVudGFfY2ljaV8oaF9vaysnJy5qb2luKGFwaykpO19kYXB1bnRhX2NpY2lfKCcnKQ0KICAgIGVsaWYgY2VrX3BpbGloX29wc2kgPT0gJ1RpZGFrJzpfZGFwdW50YV9jaWNpXyhoX29rKycnLmpvaW4oYXBrKSkNCg0KIyMjIENlayBUYWh1biBQZW1idWF0YW4NCmRlZiB0YWh1bihmeCk6DQogICAgaWYgKHJlLmZpbmRhbGwoIlthLXpBLVpdIixzdHIoZngpKSk6dGFodW56PScnDQogICAgZWxzZToNCiAgICAgICAgaWYgbGVuKGZ4KT09MTU6DQogICAgICAgICAgICBpZiBmeFs6MTBdIGluIFsnMTAwMDAwMDAwMCddICAgICAgIDp0YWh1bnogPSAnIOKAoiAyMDA5Jw0KICAgICAgICAgICAgZWxpZiBmeFs6OV0gaW4gWycxMDAwMDAwMDAnXSAgICAgICA6dGFodW56ID0gJyDigKIgMjAwOScNCiAgICAgICAgICAgIGVsaWYgZnhbOjhdIGluIFsnMTAwMDAwMDAnXSAgICAgICAgOnRhaHVueiA9ICcg4oCiIDIwMDknDQogICAgICAgICAgICBlbGlmIGZ4Wzo3XSBpbiBbJzEwMDAwMDAnLCcxMDAwMDAxJywnMTAwMDAwMicsJzEwMDAwMDMnLCcxMDAwMDA0JywnMTAwMDAwNSddOnRhaHVueiA9ICcg4oCiIDIwMDknDQogICAgICAgICAgICBlbGlmIGZ4Wzo3XSBpbiBbJzEwMDAwMDYnLCcxMDAwMDA3JywnMTAwMDAwOCcsJzEwMDAwMDknXTp0YWh1bnogPSAnIOKAoiAyMDEwJw0KICAgICAgICAgICAgZWxpZiBmeFs6Nl0gaW4gWycxMDAwMDEnXSAgICAgICAgICA6dGFodW56ID0gJyDigKIgMjAxMC8yMDExJw0KICAgICAgICAgICAgZWxpZiBmeFs6Nl0gaW4gWycxMDAwMDInLCcxMDAwMDMnXSA6dGFodW56ID0gJyDigKIgMjAxMS8yMDEyJw0KICAgICAgICAgICAgZWxpZiBmeFs6Nl0gaW4gWycxMDAwMDQnXSAgICAgICAgICA6dGFodW56ID0gJyDigKIgMjAxMi8yMDEzJw0KICAgICAgICAgICAgZWxpZiBmeFs6Nl0gaW4gWycxMDAwMDUnLCcxMDAwMDYnXSA6dGFodW56ID0gJyDigKIgMjAxMy8yMDE0Jw0KICAgICAgICAgICAgZWxpZiBmeFs6Nl0gaW4gWycxMDAwMDcnLCcxMDAwMDgnXSA6dGFodW56ID0gJyDigKIgMjAxNC8yMDE1Jw0KICAgICAgICAgICAgZWxpZiBmeFs6Nl0gaW4gWycxMDAwMDknXSAgICAgICAgICA6dGFodW56ID0gJyDigKIgMjAxNScNCiAgICAgICAgICAgIGVsaWYgZnhbOjVdIGluIFsnMTAwMDEnXSAgICAgICAgICAgOnRhaHVueiA9ICcg4oCiIDIwMTUvMjAxNicNCiAgICAgICAgICAgIGVsaWYgZnhbOjVdIGluIFsnMTAwMDInXSAgICAgICAgICAgOnRhaHVueiA9ICcg4oCiIDIwMTYvMjAxNycNCiAgICAgICAgICAgIGVsaWYgZnhbOjVdIGluIFsnMTAwMDMnXSAgICAgICAgICAgOnRhaHVueiA9ICcg4oCiIDIwMTgvMjAxOScNCiAgICAgICAgICAgIGVsaWYgZnhbOjVdIGluIFsnMTAwMDQnXSAgICAgICAgICAgOnRhaHVueiA9ICcg4oCiIDIwMTkvMjAyMCcNCiAgICAgICAgICAgIGVsaWYgZnhbOjVdIGluIFsnMTAwMDUnXSAgICAgICAgICAgOnRhaHVueiA9ICcg4oCiIDIwMjAnDQogICAgICAgICAgICBlbGlmIGZ4Wzo1XSBpbiBbJzEwMDA2JywnMTAwMDcnLCcxMDAwOCddOnRhaHVueiA9ICcg4oCiIDIwMjEnDQogICAgICAgICAgICBlbHNlOnRhaHVuej0nJw0KICAgICAgICBlbGlmIGxlbihmeCkgaW4gWzksMTBdOnRhaHVueiA9ICcg4oCiIDIwMDgvMjAwOScNCiAgICAgICAgZWxpZiBsZW4oZngpPT04OnRhaHVueiA9ICcg4oCiIDIwMDcvMjAwOCcNCiAgICAgICAgZWxpZiBsZW4oZngpPT03OnRhaHVueiA9ICcg4oCiIDIwMDYvMjAwNycNCiAgICAgICAgZWxzZTp0YWh1bno9JycNCiAgICByZXR1cm4gdGFodW56DQoNCiMjIyBDb252ZXJ0IENvb2tpZXMNCmRlZiBjdnRfY29va2llcyhyYXdfY29va2llcyk6DQogICAgbyA9IHt9DQogICAgIyBfcmF3X2Nvb2tpZXNfd2FydmVzdF8gPSBjX3VzZXIsZGF0cixkbm9uY2UsZnIsc2IseHMNCiAgICAjIF9yYXdfY29va2llc19hYXBfICAgICA9IGNfdXNlcixmcixzYix4cyxkYXRyDQogICAgIyBfY29va2VkX2Nvb2tpZXNfICAgICAgPSBzYixkYXRyLGNfdXNlcix4cyxmcg0KICAgIGtpa28gPSByYXdfY29va2llcy5yZXBsYWNlKCcgJywnJykuc3BsaXQoJzsnKQ0KICAgIGZvciB4IGluIGtpa286DQogICAgICAgIHkgPSB4LnNwbGl0KCc9JylbMF0NCiAgICAgICAgeiA9IHguc3BsaXQoJz0nKVsxXQ0KICAgICAgICBvLnVwZGF0ZSh7eTp6fSkNCiAgICBjb29rZWRfY29va2llcyA9ICgnc2I9JXM7IGRhdHI9JXM7IGNfdXNlcj0lczsgeHM9JXM7IGZyPSVzJyUob1snc2InXSxvWydkYXRyJ10sb1snY191c2VyJ10sb1sneHMnXSxvWydmciddKSkNCiAgICAjX2Nvb2tpZXNfID0geydjb29raWUnOmNvb2tlZF9jb29raWVzfQ0KICAgICNwcmludChjb29rZWRfY29va2llcykNCiAgICByZXR1cm4gY29va2VkX2Nvb2tpZXMNCg0KIyMjIE1ldG9kZSBDcmFjaw0KZGVmIHBpbGloX21ldGhvZGUoKToNCiAgICB0cnk6b3MucmVtb3ZlKCdtZXRvZGUudHh0JykNCiAgICBleGNlcHQ6cGFzcw0KICAgIHdoaWxlIFRydWU6DQogICAgICAgIHN0YXJ0X21ldGhvZCgpDQogICAgICAgIHB1dCA9IF9jaWNpX2RhcHVudGFfKCclc+KVoOKVkOKVkFslc+KAoiVzXSAlc1BpbGloIDogJyUoTyxQLE8sUCkpDQogICAgICAgIGlmIHB1dCBpbiBbJycsJyAnLCcgICddOmNvayA9IG9wZW4oJ21ldG9kZS50eHQnLCd3Jyk7Y29rLndyaXRlKCdtZXRob2RlX21iYXNpY192MScpO2Nvay5jbG9zZSgpDQogICAgICAgIGVsaWYgcHV0IGluIFsnMScsJzAxJywnMDAxJywnYSddOmNvayA9IG9wZW4oJ21ldG9kZS50eHQnLCd3Jyk7Y29rLndyaXRlKCdtZXRob2RlX2FwaV92MScpO2Nvay5jbG9zZSgpDQogICAgICAgIGVsaWYgcHV0IGluIFsnMicsJzAyJywnMDAyJywnYiddOmNvayA9IG9wZW4oJ21ldG9kZS50eHQnLCd3Jyk7Y29rLndyaXRlKCdtZXRob2RlX2FwaV92MicpO2Nvay5jbG9zZSgpDQogICAgICAgIGVsaWYgcHV0IGluIFsnMycsJzAzJywnMDAzJywnYyddOmNvayA9IG9wZW4oJ21ldG9kZS50eHQnLCd3Jyk7Y29rLndyaXRlKCdtZXRob2RlX21iYXNpY192MScpO2Nvay5jbG9zZSgpDQogICAgICAgIGVsaWYgcHV0IGluIFsnNCcsJzA0JywnMDA0JywnZCddOmNvayA9IG9wZW4oJ21ldG9kZS50eHQnLCd3Jyk7Y29rLndyaXRlKCdtZXRob2RlX21iYXNpY192MicpO2Nvay5jbG9zZSgpDQogICAgICAgIGVsaWYgcHV0IGluIFsnNScsJzA1JywnMDA1JywnZSddOmNvayA9IG9wZW4oJ21ldG9kZS50eHQnLCd3Jyk7Y29rLndyaXRlKCdtZXRob2RlX21vYmlsZV92MScpO2Nvay5jbG9zZSgpDQogICAgICAgIGVsaWYgcHV0IGluIFsnNicsJzA2JywnMDA2JywnZiddOmNvayA9IG9wZW4oJ21ldG9kZS50eHQnLCd3Jyk7Y29rLndyaXRlKCdtZXRob2RlX21vYmlsZV92MicpO2Nvay5jbG9zZSgpDQogICAgICAgIGVsc2U6Y29rID0gb3BlbignbWV0b2RlLnR4dCcsJ3cnKTtjb2sud3JpdGUoJ21ldGhvZGVfbWJhc2ljX3YxJyk7Y29rLmNsb3NlKCkNCiAgICAgICAgYnJlYWsNCg0KIyMjIENyYWNrDQpjbGFzcyBjcmFjazoNCiAgICBkZWYgX19pbml0X18oc2VsZixmaWxlcyk6DQogICAgICAgIGdsb2JhbCBvayxjcA0KICAgICAgICBzZWxmLmFkYSA9IG9rO3NlbGYuY3AgPSBjcDtzZWxmLmtvID0gMA0KICAgICAgICBzZWxmLl9oYXlvX21hdV9yZWNvZGVfID0gb3BlbignYW50aV9yZWNvZGUudHh0JywncicpLnJlYWQoKQ0KICAgICAgICBpZiBsZW4oc2VsZi5faGF5b19tYXVfcmVjb2RlXykgPT0gMjQ6cGFzcw0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgdHJ5Om9zLnJlbW92ZShmaWxlcykNCiAgICAgICAgICAgIGV4Y2VwdDprYXRhX2J1YXRfcGVyZWNvZGUoKQ0KICAgICAgICB0cnk6b3MucmVtb3ZlKCdvcHNpX2Rldi50eHQnKQ0KICAgICAgICBleGNlcHQ6cGFzcw0KICAgICAgICBjaWsgPSBvcGVuKCdvcHNpX2Rldi50eHQnLCd3Jyk7Y2lrLndyaXRlKCdudWxsJyk7Y2lrLmNsb3NlKCkNCiAgICAgICAgd2hpbGUgVHJ1ZToNCiAgICAgICAgICAgIHBpbGloX21ldGhvZGUoKTtfZGFwdW50YV9jaWNpXygnJXPilZEnJShPKSk7X2RhcHVudGFfY2ljaV8oJyVz4pWg4pWQ4pWQWyVz4oCiJXNdICVzQ3JhY2sgRGVuZ2FuIFBhc3N3b3JkIERlZmF1bHQvTWFudWFsIFtkL21dJyUoTyxQLE8sUCkpDQogICAgICAgICAgICBfcGlsaWhfc2FuZGlfID0gX2NpY2lfZGFwdW50YV8oJyVz4pWg4pWQ4pWQWyVz4oCiJXNdICVzUGlsaWggOiAnJShPLFAsTyxQKSkNCiAgICAgICAgICAgIGlmIF9waWxpaF9zYW5kaV89PSIiOmphbGFuKCclc+KVmuKVkOKVkFslcyElc10gJXNJc2kgWWFuZyBCZW5hciclKE0sUCxNLFApKTttZW51KCkNCiAgICAgICAgICAgIGVsaWYgX3BpbGloX3NhbmRpXyBpbiBbJ20nLCdNJywnMicsJzAyJywnMDAyJ106DQogICAgICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgICAgICB3aGlsZSBUcnVlOg0KICAgICAgICAgICAgICAgICAgICAgICAgdHJ5OnNlbGYuYXBrID0gZmlsZXM7c2VsZi5mcyA9IF9kYXB1bnRhX2RhcHVudGFfKHNlbGYuYXBrKS5yZWFkKCkuc3BsaXRsaW5lcygpO2JyZWFrDQogICAgICAgICAgICAgICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6X2RhcHVudGFfY2ljaV8gKCIgICAlcyIlKGUpKTtjb250aW51ZQ0KICAgICAgICAgICAgICAgICAgICBzZWxmLmZsID0gW10NCiAgICAgICAgICAgICAgICAgICAgZm9yIGkgaW4gc2VsZi5mczoNCiAgICAgICAgICAgICAgICAgICAgICAgIHRyeTpzZWxmLmZsLmFwcGVuZCh7ImlkIjppLnNwbGl0KCLigKIiKVswXX0pDQogICAgICAgICAgICAgICAgICAgICAgICBleGNlcHQ6Y29udGludWUNCiAgICAgICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6X2RhcHVudGFfY2ljaV8oKCIgICAlcyIlZSkpO2NvbnRpbnVlDQogICAgICAgICAgICAgICAgX2RhcHVudGFfY2ljaV8oJyVz4pWg4pWQ4pWQWyVz4oCiJXNdICVzQ29udG9oIDogc2F5YW5nLGJpc21pbGxhaCwxMjM0NTYnJShPLFAsTyxQKSk7c2VsZi5wd2xpc3QoKTticmVhaw0KICAgICAgICAgICAgZWxpZiBfcGlsaWhfc2FuZGlfIGluIFsnZCcsJ0QnLCcxJywnMDEnLCcwMDEnXToNCiAgICAgICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgICAgIHdoaWxlIFRydWU6DQogICAgICAgICAgICAgICAgICAgICAgICB0cnk6c2VsZi5hcGsgPSBmaWxlcztzZWxmLmZzID0gX2RhcHVudGFfZGFwdW50YV8oc2VsZi5hcGspLnJlYWQoKS5zcGxpdGxpbmVzKCk7YnJlYWsNCiAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZTpfZGFwdW50YV9jaWNpXyAoIiAgICVzIiUoZSkpO2NvbnRpbnVlDQogICAgICAgICAgICAgICAgICAgIHNlbGYuZmwgPSBbXTtzdGFydF9tZXRob2RlenooKTtrb3BpID0gX2NpY2lfZGFwdW50YV8oJyVz4pWg4pWQ4pWQWyVz4oCiJXNdICVzUGlsaWggOiAnJShPLFAsTyxQKSkNCiAgICAgICAgICAgICAgICAgICAgaWYga29waSBpbiBbJyddOg0KICAgICAgICAgICAgICAgICAgICAgICAgamFsYW4oJyVz4pWa4pWQ4pWQWyVzISVzXSAlc0lzaSBZYW5nIEJlbmFyJyUoTSxQLE0sUCkpDQogICAgICAgICAgICAgICAgICAgICAgICBtZW51KCkNCiAgICAgICAgICAgICAgICAgICAgZWxpZiBrb3BpIGluIFsnMScsJzAxJ106DQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSBpbiBzZWxmLmZzOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeTpzZWxmLmZsLmFwcGVuZCh7ImlkIjppLnNwbGl0KCLigKIiKVswXSwicHciOmdlbmVyYXRlMShpLnNwbGl0KCLigKIiKVsxXSl9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2VwdDpjb250aW51ZQ0KICAgICAgICAgICAgICAgICAgICBlbGlmIGtvcGkgaW4gWycyJywnMDInXToNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpIGluIHNlbGYuZnM6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5OnNlbGYuZmwuYXBwZW5kKHsiaWQiOmkuc3BsaXQoIuKAoiIpWzBdLCJwdyI6Z2VuZXJhdGUyKGkuc3BsaXQoIuKAoiIpWzFdKX0pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhjZXB0OmNvbnRpbnVlDQogICAgICAgICAgICAgICAgICAgIGVsaWYga29waSBpbiBbJzMnLCcwMyddOg0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGkgaW4gc2VsZi5mczoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnk6c2VsZi5mbC5hcHBlbmQoeyJpZCI6aS5zcGxpdCgi4oCiIilbMF0sInB3IjpnZW5lcmF0ZTMoaS5zcGxpdCgi4oCiIilbMV0pfSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGNlcHQ6Y29udGludWUNCiAgICAgICAgICAgICAgICAgICAgZWxpZiBrb3BpIGluIFsnNCcsJzA0J106DQogICAgICAgICAgICAgICAgICAgICAgICB0cnk6b3MucmVtb3ZlKCdwYXNzLnR4dCcpDQogICAgICAgICAgICAgICAgICAgICAgICBleGNlcHQ6cGFzcw0KICAgICAgICAgICAgICAgICAgICAgICAgdHJ5Om9zLnJlbW92ZSgncGFzc2FuZ2thLnR4dCcpDQogICAgICAgICAgICAgICAgICAgICAgICBleGNlcHQ6cGFzcw0KICAgICAgICAgICAgICAgICAgICAgICAgdGFtYmFoX3Bhc3MoKTt0YW1iYWhfcGFzc19hbmdrYSgpDQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSBpbiBzZWxmLmZzOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeTpzZWxmLmZsLmFwcGVuZCh7ImlkIjppLnNwbGl0KCLigKIiKVswXSwicHciOmdlbmVyYXRlNChpLnNwbGl0KCLigKIiKVsxXSl9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2VwdDpjb250aW51ZQ0KICAgICAgICAgICAgICAgICAgICBlbHNlOmphbGFuKCclc+KVmuKVkOKVkFslcyElc10gJXNJc2kgWWFuZyBCZW5hciclKE0sUCxNLFApKTttZW51KCkNCiAgICAgICAgICAgICAgICAgICAgdHJ5Om9zLnJlbW92ZSgnb3BzaV9jcC50eHQnKQ0KICAgICAgICAgICAgICAgICAgICBleGNlcHQ6cGFzcw0KICAgICAgICAgICAgICAgICAgICBfZGFwdW50YV9jaWNpXygnJXPilZEnJShPKSk7cHVmID0gX2NpY2lfZGFwdW50YV8oJyVz4pWg4pWQ4pWQWyVz4oCiJXNdICVzTXVuY3Vsa2FuIE9wc2kgQ1A/IFt5L3RdIDogJyUoTyxQLE8sUCkpDQogICAgICAgICAgICAgICAgICAgIGlmIHB1ZiBpbiBbJyddOmphbGFuKCclc+KVmuKVkOKVkFslcyElc10gJXNJc2kgWWFuZyBCZW5hciclKE0sUCxNLFApKTttZW51KCkNCiAgICAgICAgICAgICAgICAgICAgZWxpZiBwdWYgaW4gWycxJywnMDEnLCcwMDEnLCd5JywnWSddOmF1dG9fZ2FudGlfcGFzcygnWWEnKTtjb2sgPSBvcGVuKCdvcHNpX2NwLnR4dCcsJ3cnKTtjb2sud3JpdGUoJ29wc2lfY3AnKTtjb2suY2xvc2UoKTtzdGFydGVkKCk7VGhyZWFkUG9vbCgzNSkubWFwKHNlbGYuc3RhcnRfY3JhY2ssc2VsZi5mbCk7b3MucmVtb3ZlKHNlbGYuYXBrKTtfY2ljaV9jaWNpXygpO2JyZWFrDQogICAgICAgICAgICAgICAgICAgIGVsaWYgcHVmIGluIFsnMicsJzAyJywnMDAyJywndCcsJ1QnXTphdXRvX2dhbnRpX3Bhc3MoJ1RpZGFrJyk7Y29rID0gb3Blbignb3BzaV9jcC50eHQnLCd3Jyk7Y29rLndyaXRlKCdudWxsJyk7Y29rLmNsb3NlKCk7c3RhcnRlZCgpO1RocmVhZFBvb2woMzUpLm1hcChzZWxmLnN0YXJ0X2NyYWNrLHNlbGYuZmwpO29zLnJlbW92ZShzZWxmLmFwayk7X2NpY2lfY2ljaV8oKTticmVhaw0KICAgICAgICAgICAgICAgICAgICBlbHNlOmphbGFuKCclc+KVmuKVkOKVkFslcyElc10gJXNJc2kgWWFuZyBCZW5hciclKE0sUCxNLFApKTttZW51KCkNCiAgICAgICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6X2RhcHVudGFfY2ljaV8oKCIgICAlcyIlZSkpDQogICAgZGVmIHB3bGlzdChzZWxmKToNCiAgICAgICAgc2VsZi5wdyA9IF9jaWNpX2RhcHVudGFfKCclc+KVoOKVkOKVkFslc+KAoiVzXSAlc01hc3Vra2FuIFBhc3N3b3JkIDogJyUoTyxQLE8sUCkpLnNwbGl0KCIsIikNCiAgICAgICAgaWYgbGVuKHNlbGYucHcpID09MDpzZWxmLnB3bGlzdCgpDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBmb3IgaSBpbiBzZWxmLmZsOmkudXBkYXRlKHsicHciOnNlbGYucHd9KQ0KICAgICAgICAgICAgdHJ5Om9zLnJlbW92ZSgnb3BzaV9jcC50eHQnKQ0KICAgICAgICAgICAgZXhjZXB0OnBhc3MNCiAgICAgICAgICAgIF9kYXB1bnRhX2NpY2lfKCclc+KVkSclKE8pKTtwdWYgPSBfY2ljaV9kYXB1bnRhXygnJXPilaDilZDilZBbJXPigKIlc10gJXNNdW5jdWxrYW4gT3BzaSBDUD8gW3kvdF0gOiAnJShPLFAsTyxQKSkNCiAgICAgICAgICAgIGlmIHB1ZiBpbiBbJyddOmphbGFuKCclc+KVmuKVkOKVkFslcyElc10gJXNJc2kgWWFuZyBCZW5hciclKE0sUCxNLFApKTttZW51KCkNCiAgICAgICAgICAgIGVsaWYgcHVmIGluIFsnMScsJzAxJywnMDAxJywneScsJ1knXTphdXRvX2dhbnRpX3Bhc3MoJ1lhJyk7Y29rID0gb3Blbignb3BzaV9jcC50eHQnLCd3Jyk7Y29rLndyaXRlKCdvcHNpX2NwJyk7Y29rLmNsb3NlKCk7c3RhcnRlZCgpO1RocmVhZFBvb2woMzApLm1hcChzZWxmLnN0YXJ0X2NyYWNrLHNlbGYuZmwpO29zLnJlbW92ZShzZWxmLmFwayk7X2NpY2lfY2ljaV8oKQ0KICAgICAgICAgICAgZWxpZiBwdWYgaW4gWycyJywnMDInLCcwMDInLCd0JywnVCddOmF1dG9fZ2FudGlfcGFzcygnVGlkYWsnKTtjb2sgPSBvcGVuKCdvcHNpX2NwLnR4dCcsJ3cnKTtjb2sud3JpdGUoJ251bGwnKTtjb2suY2xvc2UoKTtzdGFydGVkKCk7VGhyZWFkUG9vbCgzMCkubWFwKHNlbGYuc3RhcnRfY3JhY2ssc2VsZi5mbCk7b3MucmVtb3ZlKHNlbGYuYXBrKTtfY2ljaV9jaWNpXygpDQogICAgICAgICAgICBlbHNlOmphbGFuKCclc+KVmuKVkOKVkFslcyElc10gJXNJc2kgWWFuZyBCZW5hciclKE0sUCxNLFApKTttZW51KCkNCiAgICBkZWYgc3RhcnRfY3JhY2soc2VsZixmbCk6DQogICAgICAgIHRyeToNCiAgICAgICAgICAgIG1ldG9kZSA9IG9wZW4oJ21ldG9kZS50eHQnLCdyJykucmVhZCgpDQogICAgICAgICAgICBmb3IgaSBpbiBmbC5nZXQoInB3Iik6DQogICAgICAgICAgICAgICAgaWYgJ21ldGhvZGVfYXBpX3YxJyBpbiBtZXRvZGU6bG9nID0gbG9nX2FwaV8xKGZsLmdldCgiaWQiKSxpKQ0KICAgICAgICAgICAgICAgIGVsaWYgJ21ldGhvZGVfYXBpX3YyJyBpbiBtZXRvZGU6bG9nID0gbG9nX2FwaV8yKGZsLmdldCgiaWQiKSxpKQ0KICAgICAgICAgICAgICAgIGVsaWYgJ21ldGhvZGVfbWJhc2ljX3YxJyBpbiBtZXRvZGU6bG9nID0gbG9nX21iYXNpY18xKGZsLmdldCgiaWQiKSxpKQ0KICAgICAgICAgICAgICAgIGVsaWYgJ21ldGhvZGVfbWJhc2ljX3YyJyBpbiBtZXRvZGU6bG9nID0gbG9nX21iYXNpY18yKGZsLmdldCgiaWQiKSxpKQ0KICAgICAgICAgICAgICAgIGVsaWYgJ21ldGhvZGVfbW9iaWxlX3YxJyBpbiBtZXRvZGU6bG9nID0gbG9nX21vYmlsZV8xKGZsLmdldCgiaWQiKSxpKQ0KICAgICAgICAgICAgICAgIGVsaWYgJ21ldGhvZGVfbW9iaWxlX3YyJyBpbiBtZXRvZGU6bG9nID0gbG9nX21vYmlsZV8yKGZsLmdldCgiaWQiKSxpKQ0KICAgICAgICAgICAgICAgIGVsc2U6bG9nID0gbG9nX21iYXNpY18xKGZsLmdldCgiaWQiKSxpKQ0KICAgICAgICAgICAgICAgIGlmIGxvZy5nZXQoInN0YXR1cyIpPT0iY3AiOg0KICAgICAgICAgICAgICAgICAgICBmaWxlc19jcCA9ICJDUC8lcy50eHQiJSh0YW5nZ2FsKQ0KICAgICAgICAgICAgICAgICAgICBpZiBmbC5nZXQoImlkIikgaW4gZmlsZXNfY3A6cGFzcw0KICAgICAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICAgICAgdHJ5OmtlID0gX3JlcV9nZXRfKCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8iICsgZmwuZ2V0KCJpZCIpICsgIj9maWVsZHM9bmFtZSxpZCxiaXJ0aGRheSxmaXJzdF9uYW1lLG1pZGRsZV9uYW1lLGxhc3RfbmFtZSxuYW1lX2Zvcm1hdCxwaWN0dXJlLHNob3J0X25hbWUmYWNjZXNzX3Rva2VuPSIgKyBfZGFwdW50YV9kYXB1bnRhXygidG9rZW4udHh0IiwiciIpLnJlYWQoKSk7dHQgPSBfanNfbG9fKGtlLnRleHQpO3R0bCA9IHR0WyJiaXJ0aGRheSJdO20sZCx5ID0gdHRsLnNwbGl0KCIvIik7bSA9IGJ1bGFuX3R0bFttXTt0dGxsID0gKCcg4oCiICVzICVzICVzJyUoZCxtLHkpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZXhjZXB0OnR0bGwgPSAoJyclKCkpDQogICAgICAgICAgICAgICAgICAgICAgICBoX2NwID0gIlxyJXNbJXNDUCVzXSAlcyDigKIgJXMlcyVzICAgICAgICAgICIlKE8sUCxPLGZsLmdldCgiaWQiKSxpLHR0bGwsdGFodW4oZmwuZ2V0KCJpZCIpKSk7Y2VrX29wc2koZmwuZ2V0KCJpZCIpLGksaF9jcCkNCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY3AuYXBwZW5kKCIlc+KAoiVzIiUoZmwuZ2V0KCJpZCIpLGkpKTtfZGFwdW50YV9kYXB1bnRhXyhmaWxlc19jcCwiYSsiKS53cml0ZSgiJXPigKIlcyVzXG4iJShmbC5nZXQoImlkIiksaSx0dGxsLnJlcGxhY2UoJyAnLCcnKSkpO2JyZWFrDQogICAgICAgICAgICAgICAgZWxpZiBsb2cuZ2V0KCJzdGF0dXMiKT09Im9rIjoNCiAgICAgICAgICAgICAgICAgICAgZmlsZXNfb2sgPSAiT0svJXMudHh0IiUodGFuZ2dhbCkNCiAgICAgICAgICAgICAgICAgICAgaWYgZmwuZ2V0KCJpZCIpIGluIGZpbGVzX29rOnBhc3MNCiAgICAgICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICdtZXRob2RlX21iYXNpY192MScgaW4gbWV0b2RlIG9yICdtZXRob2RlX21iYXNpY192MicgaW4gbWV0b2RlIG9yICdtZXRob2RlX21vYmlsZV92MScgaW4gbWV0b2RlIG9yICdtZXRob2RlX21vYmlsZV92MicgaW4gbWV0b2RlOmhfb2sgPSAiXHIlc1slc09LJXNdICVzIOKAoiAlcyVzJXMgICAgICAgICAgIiUoSCxQLEgsZmwuZ2V0KCJpZCIpLGksdGFodW4oZmwuZ2V0KCJpZCIpKSxQKTtjZWtfYXBrKGhfb2ssY3Z0X2Nvb2tpZXMobG9nLmdldCgiY29va2llcyIpKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6X2RhcHVudGFfY2ljaV8oIlxyJXNbJXNPSyVzXSAlcyDigKIgJXMlcyAgICAgICAgICAiJShILFAsSCxmbC5nZXQoImlkIiksaSx0YWh1bihmbC5nZXQoImlkIikpKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuYWRhLmFwcGVuZCgiJXPigKIlcyIlKGZsLmdldCgiaWQiKSxpKSk7X2RhcHVudGFfZGFwdW50YV8oZmlsZXNfb2ssImErIikud3JpdGUoIiVz4oCiJXNcbiIlKGZsLmdldCgiaWQiKSxpKSk7YnJlYWsNCiAgICAgICAgICAgICAgICBlbHNlOmNvbnRpbnVlDQogICAgICAgICAgICBzZWxmLmtvKz0xDQogICAgICAgICAgICBfZGFwdW50YV9jaWNpXygiXHIlc1slcyVzJXNdWyVzJXMvJXMlc11bJXNPSzolcyVzXVslc0NQOiVzJXNdJXMiJShPLFAsZmwuZ2V0KCJpZCIpLE8sUCxzZWxmLmtvLGxlbihzZWxmLmZsKSxPLFAsbGVuKHNlbGYuYWRhKSxPLFAsbGVuKHNlbGYuY3ApLE8sUCksIGVuZD0nJyk7c3lzLnN0ZG91dC5mbHVzaCgpDQogICAgICAgIGV4Y2VwdDpzZWxmLnN0YXJ0X2NyYWNrKGZsKQ0KDQpkZWYgc2V0X3Bhc3NfZGV2KF9maWxlXyk6DQogICAgZ2xvYmFsIF91c2VyX2lkX2Rldl8NCiAgICB0cnk6DQogICAgICAgIHBpbGloX21ldGhvZGUoKQ0KICAgICAgICBfZGFwdW50YV9jaWNpXygnJXPilZEnJShPKSkNCiAgICAgICAgX2RhcHVudGFfY2ljaV8oJyVz4pWg4pWQ4pWQWyVz4oCiJXNdICVzQ29udG9oIDogMTIzNDU2LDEyMzQ1Njc4OSwxMjMxMjMnJShPLFAsTyxQKSkNCiAgICAgICAgX3Bhc3dvcmRfID0gX2NpY2lfZGFwdW50YV8oJyVz4pWg4pWQ4pWQWyVz4oCiJXNdICVzTWFzdWtrYW4gUGFzc3dvcmQgOiAnJShPLFAsTyxQKSkuc3BsaXQoIiwiKQ0KICAgICAgICBpZiBsZW4oX3Bhc3dvcmRfKT09MDpqYWxhbignJXPilZrilZDilZBbJXMhJXNdICVzSXNpIFlhbmcgQmVuYXInJShNLFAsTSxQKSk7bWVudSgpDQogICAgICAgIF9kYXB1bnRhX2NpY2lfKCclc+KVkSclKE8pKTtwdWYgPSBfY2ljaV9kYXB1bnRhXygnJXPilaDilZDilZBbJXPigKIlc10gJXNNdW5jdWxrYW4gT3BzaSBDUD8gW3kvdF0gOiAnJShPLFAsTyxQKSkNCiAgICAgICAgaWYgcHVmIGluIFsnJ106amFsYW4oJyVz4pWa4pWQ4pWQWyVzISVzXSAlc0lzaSBZYW5nIEJlbmFyJyUoTSxQLE0sUCkpO21lbnUoKQ0KICAgICAgICBlbGlmIHB1ZiBpbiBbJzEnLCcwMScsJzAwMScsJ3knLCdZJ106YXV0b19nYW50aV9wYXNzKCdZYScpO2NvayA9IG9wZW4oJ29wc2lfY3AudHh0JywndycpO2Nvay53cml0ZSgnb3BzaV9jcCcpO2Nvay5jbG9zZSgpDQogICAgICAgIGVsaWYgcHVmIGluIFsnMicsJzAyJywnMDAyJywndCcsJ1QnXTphdXRvX2dhbnRpX3Bhc3MoJ1RpZGFrJyk7Y29rID0gb3Blbignb3BzaV9jcC50eHQnLCd3Jyk7Y29rLndyaXRlKCdudWxsJyk7Y29rLmNsb3NlKCkNCiAgICAgICAgZWxzZTpqYWxhbignJXPilZrilZDilZBbJXMhJXNdICVzSXNpIFlhbmcgQmVuYXInJShNLFAsTSxQKSk7bWVudSgpDQogICAgICAgIF91c2VyX2lkX2Rldl8gPSBvcGVuKF9maWxlXywncicpLnJlYWQoKS5zcGxpdGxpbmVzKCkNCiAgICAgICAgc3RhcnRlZCgpDQogICAgICAgIGZvciBfdXNlcl8gaW4gX3VzZXJfaWRfZGV2XzoNCiAgICAgICAgICAgIFRocmVhZFBvb2wobWF4X3dvcmtlcnM9MzApLnN1Ym1pdChjcmFja19sYW5nc3VuZ19kZXYsX3VzZXJfLF9wYXN3b3JkXykNCiAgICBleGNlcHQ6cGFzcw0KZGVmIGNyYWNrX2xhbmdzdW5nX2RldihfdXNlcl9pZF8sX3Bhc3N3b3JkXyk6DQogICAgZ2xvYmFsIF9wdXRhcl8NCiAgICB0cnk6DQogICAgICAgIG1ldG9kZSA9IG9wZW4oJ21ldG9kZS50eHQnLCdyJykucmVhZCgpDQogICAgICAgIGZvciBfcGFzc18gaW4gX3Bhc3N3b3JkXzoNCiAgICAgICAgICAgIF9wYXNzXyA9IF9wYXNzXy5sb3dlcigpDQogICAgICAgICAgICBpZiAnbWV0aG9kZV9hcGlfdjEnIGluIG1ldG9kZTpsb2cgPSBsb2dfYXBpXzEoX3VzZXJfaWRfLF9wYXNzXykNCiAgICAgICAgICAgIGVsaWYgJ21ldGhvZGVfYXBpX3YyJyBpbiBtZXRvZGU6bG9nID0gbG9nX2FwaV8yKF91c2VyX2lkXyxfcGFzc18pDQogICAgICAgICAgICBlbGlmICdtZXRob2RlX21iYXNpY192MScgaW4gbWV0b2RlOmxvZyA9IGxvZ19tYmFzaWNfMShfdXNlcl9pZF8sX3Bhc3NfKQ0KICAgICAgICAgICAgZWxpZiAnbWV0aG9kZV9tYmFzaWNfdjInIGluIG1ldG9kZTpsb2cgPSBsb2dfbWJhc2ljXzIoX3VzZXJfaWRfLF9wYXNzXykNCiAgICAgICAgICAgIGVsaWYgJ21ldGhvZGVfbW9iaWxlX3YxJyBpbiBtZXRvZGU6bG9nID0gbG9nX21vYmlsZV8xKF91c2VyX2lkXyxfcGFzc18pDQogICAgICAgICAgICBlbGlmICdtZXRob2RlX21vYmlsZV92MicgaW4gbWV0b2RlOmxvZyA9IGxvZ19tb2JpbGVfMihfdXNlcl9pZF8sX3Bhc3NfKQ0KICAgICAgICAgICAgZWxzZTpsb2cgPSBsb2dfbWJhc2ljXzEoX3VzZXJfaWRfLF9wYXNzXykNCiAgICAgICAgICAgIGlmIGxvZy5nZXQoInN0YXR1cyIpPT0iY3AiOg0KICAgICAgICAgICAgICAgIGZpbGVzX2NwID0gIkNQLyVzLnR4dCIlKHRhbmdnYWwpDQogICAgICAgICAgICAgICAgaWYgX3VzZXJfaWRfIGluIGZpbGVzX2NwOnBhc3MNCiAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICB0cnk6a2UgPSBfcmVxX2dldF8oImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyIgKyBfdXNlcl9pZF8gKyAiP2ZpZWxkcz1uYW1lLGlkLGJpcnRoZGF5LGZpcnN0X25hbWUsbWlkZGxlX25hbWUsbGFzdF9uYW1lLG5hbWVfZm9ybWF0LHBpY3R1cmUsc2hvcnRfbmFtZSZhY2Nlc3NfdG9rZW49IiArIF9kYXB1bnRhX2RhcHVudGFfKCJ0b2tlbi50eHQiLCJyIikucmVhZCgpKTt0dCA9IF9qc19sb18oa2UudGV4dCk7dHRsID0gdHRbImJpcnRoZGF5Il07bSxkLHkgPSB0dGwuc3BsaXQoIi8iKTttID0gYnVsYW5fdHRsW21dO3R0bGwgPSAoJyDigKIgJXMgJXMgJXMnJShkLG0seSkpDQogICAgICAgICAgICAgICAgICAgIGV4Y2VwdDp0dGxsID0gKCcnJSgpKQ0KICAgICAgICAgICAgICAgICAgICBoX2NwID0gIlxyJXNbJXNDUCVzXSAlcyDigKIgJXMlcyVzICAgICAgICAgICIlKE8sUCxPLF91c2VyX2lkXyxfcGFzc18sdHRsbCx0YWh1bihfdXNlcl9pZF8pKTtjZWtfb3BzaShfdXNlcl9pZF8sX3Bhc3NfLGhfY3ApDQogICAgICAgICAgICAgICAgICAgIGNwLmFwcGVuZCgiJXPigKIlcyIlKF91c2VyX2lkXyxfcGFzc18pKTtfZGFwdW50YV9kYXB1bnRhXyhmaWxlc19jcCwiYSsiKS53cml0ZSgiJXPigKIlcyVzXG4iJShfdXNlcl9pZF8sX3Bhc3NfLHR0bGwucmVwbGFjZSgnICcsJycpKSk7YnJlYWsNCiAgICAgICAgICAgIGVsaWYgbG9nLmdldCgic3RhdHVzIik9PSJvayI6DQogICAgICAgICAgICAgICAgZmlsZXNfb2sgPSAiT0svJXMudHh0IiUodGFuZ2dhbCkNCiAgICAgICAgICAgICAgICBpZiBfdXNlcl9pZF8gaW4gZmlsZXNfb2s6cGFzcw0KICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgIGlmICdtZXRob2RlX21iYXNpY192MScgaW4gbWV0b2RlIG9yICdtZXRob2RlX21iYXNpY192MicgaW4gbWV0b2RlIG9yICdtZXRob2RlX21vYmlsZV92MScgaW4gbWV0b2RlIG9yICdtZXRob2RlX21vYmlsZV92MicgaW4gbWV0b2RlOmhfb2sgPSAiXHIlc1slc09LJXNdICVzIOKAoiAlcyVzJXMgICAgICAgICAgIiUoSCxQLEgsX3VzZXJfaWRfLF9wYXNzXyx0YWh1bihfdXNlcl9pZF8pLFApO2Nla19hcGsoaF9vayxjdnRfY29va2llcyhsb2cuZ2V0KCJjb29raWVzIikpKQ0KICAgICAgICAgICAgICAgICAgICBlbHNlOl9kYXB1bnRhX2NpY2lfKCJcciVzWyVzT0slc10gJXMg4oCiICVzJXMgICAgICAgICAgIiUoSCxQLEgsX3VzZXJfaWRfLF9wYXNzXyx0YWh1bihfdXNlcl9pZF8pKSkNCiAgICAgICAgICAgICAgICAgICAgb2suYXBwZW5kKCIlc+KAoiVzIiUoX3VzZXJfaWRfLF9wYXNzXykpO19kYXB1bnRhX2RhcHVudGFfKGZpbGVzX29rLCJhKyIpLndyaXRlKCIlc+KAoiVzXG4iJShfdXNlcl9pZF8sX3Bhc3NfKSk7YnJlYWsNCiAgICAgICAgICAgIGVsc2U6Y29udGludWUNCiAgICAgICAgX3B1dGFyXyArPSAxDQogICAgICAgIF9kYXB1bnRhX2NpY2lfKCJcciVzWyVzJXMlc11bJXMlcy8lcyVzXVslc09LOiVzJXNdWyVzQ1A6JXMlc10lcyIlKE8sUCxfdXNlcl9pZF8sTyxQLHN0cihfcHV0YXJfKSxsZW4oX3VzZXJfaWRfZGV2XyksTyxQLGxlbihvayksTyxQLGxlbihjcCksTyxQKSwgZW5kPScnKTtzeXMuc3Rkb3V0LmZsdXNoKCkNCiAgICBleGNlcHQ6cGFzcw0KDQojIyMgTWVuZGFwYXQgSnVtbGFoIFRlbWFuIFRhcmdldA0KZGVmIHRlbWFuX3RhcmdldCgpOg0KICAgIGl0ID0gX2NpY2lfZGFwdW50YV8oJyVz4pWg4pWQ4pWQWyVz4oCiJXNdICVzSUQgVGFyZ2V0IDogJyUoTyxQLE8sUCkpDQogICAgdHJ5OnRva2VuID0gX2RhcHVudGFfZGFwdW50YV8oJ3Rva2VuLnR4dCcsJ3InKS5yZWFkKCk7bW0gPSBfcmVxX2dldF8oJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyVzP2FjY2Vzc190b2tlbj0lcyclKGl0LHRva2VuKSk7bm4gPSBfanNfbG9fKG1tLnRleHQpO19kYXB1bnRhX2NpY2lfICgnJXPilaDilZDilZBbJXPigKIlc10gJXNOYW1hIDogJXMnJShPLFAsTyxQLG5uWyduYW1lJ10pKQ0KICAgIGV4Y2VwdCAoS2V5RXJyb3IsSU9FcnJvcik6amFsYW4oJyVz4pWa4pWQ4pWQWyVzISVzXSAlc1Rva2VuL0Nvb2tpZXMgSW52YWxpZCclKE0sUCxNLFApKTttZW51X2xvZygpDQogICAgdHQ9W107dGU9W107bGltID0gX2NpY2lfZGFwdW50YV8oJyVz4pWg4pWQ4pWQWyVz4oCiJXNdICVzTGltaXQgRHVtcCA6ICclKE8sUCxPLFApKTtfZGFwdW50YV9jaWNpXygnJXPilZElcyclKE8sUCkpO2FkYSA9IF9yZXFfZ2V0XygnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJXMvZnJpZW5kcz9saW1pdD0lcyZhY2Nlc3NfdG9rZW49JXMnJShpdCxsaW0sdG9rZW4pKTtpZGkgPSBfanNfbG9fKGFkYS50ZXh0KQ0KICAgIGZvciB4IGluIGlkaVsnZGF0YSddOnR0LmFwcGVuZCh4WydpZCddKQ0KICAgIGZvciBpZCBpbiB0dDoNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgYWRhMiA9IF9yZXFfZ2V0XygnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJXMvZnJpZW5kcz9saW1pdD01MDAwJmFjY2Vzc190b2tlbj0lcyclKGlkLHRva2VuKSk7aWRpMiA9IF9qc19sb18oYWRhMi50ZXh0KQ0KICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgIGZvciBiIGluIGlkaTJbJ2RhdGEnXTp0ZS5hcHBlbmQoYlsnaWQnXSkNCiAgICAgICAgICAgIGV4Y2VwdCBLZXlFcnJvcjpfZGFwdW50YV9jaWNpXygn4pWg4pWQ4pWQWyFdIFByaXZhdGUnKQ0KICAgICAgICAgICAgX2RhcHVudGFfY2ljaV8oJ+KVoOKVkOKVkFvigKJdJyxpZCwn4oCiJyxsZW4odGUpKTt0ZS5jbGVhcigpDQogICAgICAgIGV4Y2VwdCBLZXlFcnJvcjpfZGFwdW50YV9jaWNpXygn4pWg4pWQ4pWQWyFdIEFrdW4gVGVya2VuYSBTcGFtJykNCiAgICBfZGFwdW50YV9jaWNpXygn4pWRJyk7X2NpY2lfZGFwdW50YV8oJ+KVmuKVkOKVkFsgS2VtYmFsaSBdJyk7bWVudSgpDQoNCiMjIyBNZW51IE1lbmdlY2VrIEhhc2lsIENyYWNrDQpkZWYgaGFzaWwoKToNCiAgICBjbGVhcigpDQogICAgamFsYW4oJyVz4pWU4pWQ4pWQWyAlc0hhc2lsIENyYWNrICVzXSclKE8sUCxPKSk7X2RhcHVudGFfY2ljaV8oJyVz4pWRJyUoTykpO19kYXB1bnRhX2NpY2lfKCclc+KVoOKVkOKVkFslczElc10gJXNDZWsgSGFzaWwgT0snJShPLFAsTyxQKSk7X2RhcHVudGFfY2ljaV8oJyVz4pWg4pWQ4pWQWyVzMiVzXSAlc0NlayBIYXNpbCBDUCclKE8sUCxPLFApKTtjaCA9IF9jaWNpX2RhcHVudGFfKCclc+KVoOKVkOKVkFslc+KAoiVzXSAlc1BpbGloIDogJyUoTyxQLE8sUCkpDQogICAgaWYgY2ggaW4gWycnXTpqYWxhbignJXPilZrilZDilZBbJXMhJXNdICVzSXNpIFlhbmcgQmVuYXInJShNLFAsTSxQKSk7bWVudSgpDQogICAgZWxpZiBjaCBpbiBbJzEnLCcwMScsJzAwMScsJ2EnXToNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgb2tsID0gb3MubGlzdGRpcigiT0siKTtfZGFwdW50YV9jaWNpXygnJXPilZEnJShPKSk7X2RhcHVudGFfY2ljaV8oJyVz4pWg4pWQ4pWQWyVzIEhhc2lsIENyYWNrIFlhbmcgVGVyc2ltcGFuIERpIEZpbGUgT0sgJXNdJyUoTyxQLE8pKTtfZGFwdW50YV9jaWNpXygnJXPilZEnJShPKSkNCiAgICAgICAgICAgIGZvciBmaWxlIGluIG9rbDpfZGFwdW50YV9jaWNpXygnJXPilaDilZDilZBbJXPigKIlc10gJXMlcyclKE8sUCxPLFAsZmlsZSkpDQogICAgICAgICAgICBfZGFwdW50YV9jaWNpXygnJXPilZEnJShPKSk7ZmlsZXMgPSBfY2ljaV9kYXB1bnRhXygnJXPilZrilZDilZBbJXPigKIlc10gJXNNYXN1a2thbiBOYW1hIEZpbGUgOiAnJShPLFAsTyxQKSk7X2RhcHVudGFfY2ljaV8oJycpDQogICAgICAgICAgICBpZiBmaWxlcyA9PSAiIjpqYWxhbignJXPilZDilZDilZBbJXMhJXNdICVzSXNpIFlhbmcgQmVuYXInJShNLFAsTSxQKSk7aGFzaWwoKQ0KICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgIHBwcCA9IF9kYXB1bnRhX2RhcHVudGFfKCJPSy8lcyIlKGZpbGVzKSkucmVhZCgpLnNwbGl0bGluZXMoKQ0KICAgICAgICAgICAgICAgIGZvciB4IGluIHBwcDp5eXkgPSB4LnJlcGxhY2UoJ+KAoicsJyDigKIgJyk7X2RhcHVudGFfY2ljaV8oJyVzWyVzT0slc10gJXMnJShILFAsSCx5eXkpKQ0KICAgICAgICAgICAgICAgIGRlbDEgPSAoIiVzIiUoZmlsZXMpKS5yZXBsYWNlKCItIiwgIiAiKS5yZXBsYWNlKCIudHh0IiwgIiIpO19kYXB1bnRhX2NpY2lfKCdcbiVz4pWU4pWQ4pWQWyVz4oCiJXNdICVzVG90YWwgSGFzaWwgQ3JhY2sgVGFuZ2dhbCAlcyBBZGFsYWggJXMgQWt1biclKE8sUCxPLFAsZGVsMSxsZW4ocHBwKSkpDQogICAgICAgICAgICBleGNlcHQ6X2RhcHVudGFfY2ljaV8oJyVz4pWg4pWQ4pWQWyVzIEhhc2lsIFRpZGFrIERpdGVtdWthbiAlc10nJShNLFAsTSkpDQogICAgICAgIGV4Y2VwdCAoS2V5RXJyb3IsSU9FcnJvcik6X2RhcHVudGFfY2ljaV8oJyVz4pWg4pWQ4pWQWyVzIEhhc2lsIFRpZGFrIERpdGVtdWthbiAlc10nJShNLFAsTSkpDQogICAgZWxpZiBjaCBpbiBbJzInLCcwMicsJzAwMicsJ2InXToNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgY3BsID0gb3MubGlzdGRpcigiQ1AiKTtfZGFwdW50YV9jaWNpXygnJXPilZEnJShPKSk7X2RhcHVudGFfY2ljaV8oJyVz4pWg4pWQ4pWQWyVzIEhhc2lsIENyYWNrIFlhbmcgVGVyc2ltcGFuIERpIEZpbGUgQ1AgJXNdJyUoTyxQLE8pKTtfZGFwdW50YV9jaWNpXygnJXPilZEnJShPKSkNCiAgICAgICAgICAgIGZvciBmaWxlIGluIGNwbDpfZGFwdW50YV9jaWNpXygnJXPilaDilZDilZBbJXPigKIlc10gJXMlcyclKE8sUCxPLFAsZmlsZSkpDQogICAgICAgICAgICBfZGFwdW50YV9jaWNpXygnJXPilZEnJShPKSk7ZmlsZXMgPSBfY2ljaV9kYXB1bnRhXygnJXPilZrilZDilZBbJXPigKIlc10gJXNNYXN1a2thbiBOYW1hIEZpbGUgOiAnJShPLFAsTyxQKSk7X2RhcHVudGFfY2ljaV8oJycpDQogICAgICAgICAgICBpZiBmaWxlcyA9PSAiIjpqYWxhbignJXPilZDilZDilZBbJXMhJXNdICVzSXNpIFlhbmcgQmVuYXInJShNLFAsTSxQKSk7aGFzaWwoKQ0KICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgIHBwcCA9IF9kYXB1bnRhX2RhcHVudGFfKCJDUC8lcyIlKGZpbGVzKSkucmVhZCgpLnNwbGl0bGluZXMoKQ0KICAgICAgICAgICAgICAgIGZvciB4IGluIHBwcDp5eXkgPSB4LnJlcGxhY2UoJ+KAoicsJyDigKIgJyk7X2RhcHVudGFfY2ljaV8oJyVzWyVzQ1Alc10gJXMnJShPLFAsTyx5eXkpKQ0KICAgICAgICAgICAgICAgIGRlbDEgPSAoIiVzIiUoZmlsZXMpKS5yZXBsYWNlKCItIiwgIiAiKS5yZXBsYWNlKCIudHh0IiwgIiIpO19kYXB1bnRhX2NpY2lfKCdcbiVz4pWU4pWQ4pWQWyVz4oCiJXNdICVzVG90YWwgSGFzaWwgQ3JhY2sgVGFuZ2dhbCAlcyBBZGFsYWggJXMgQWt1biclKE8sUCxPLFAsZGVsMSxsZW4ocHBwKSkpDQogICAgICAgICAgICBleGNlcHQ6X2RhcHVudGFfY2ljaV8oJyVz4pWg4pWQ4pWQWyVzIEhhc2lsIFRpZGFrIERpdGVtdWthbiAlc10nJShNLFAsTSkpDQogICAgICAgIGV4Y2VwdDpfZGFwdW50YV9jaWNpXygnJXPilaDilZDilZBbJXMgSGFzaWwgVGlkYWsgRGl0ZW11a2FuICVzXSclKE0sUCxNKSkNCiAgICBlbHNlOmphbGFuKCclc+KVmuKVkOKVkFslcyElc10gJXNJc2kgWWFuZyBCZW5hciclKE0sUCxNLFApKTttZW51KCkNCiAgICBfZGFwdW50YV9jaWNpXygnJXPilZEnJShPKSk7X2NpY2lfZGFwdW50YV8oJyVz4pWa4pWQ4pWQWyAlc0tlbWJhbGkgJXNdJXMnJShPLFAsTyxQKSk7bWVudSgpDQoNCmRlZiBjZWtfaGFzaWwoKToNCiAgICB0cnk6b3MucmVtb3ZlKCdvcHNpX2Rldi50eHQnKQ0KICAgIGV4Y2VwdDpwYXNzDQogICAgY2lrID0gb3Blbignb3BzaV9kZXYudHh0JywndycpO2Npay53cml0ZSgnaGFzaWwnKTtjaWsuY2xvc2UoKQ0KICAgIHByaW50KCclc+KVoOKVkOKVkFsgJXNDZWsgT3BzaSBBa3VuIEhhc2lsIENyYWNrICVzXSclKE8sUCxPKSk7X2RhcHVudGFfY2ljaV8oJyVz4pWRJyUoTykpO19kYXB1bnRhX2NpY2lfKCclc+KVoOKVkOKVkFslc+KAoiVzXSAlc0NvbnRvaCBGaWxlIDogJXMudHh0JyUoTyxQLE8sUCx0YW5nZ2FsKSk7ZmlsZXNfXyA9IF9jaWNpX2RhcHVudGFfKCclc+KVoOKVkOKVkFslc+KAoiVzXSAlc0ZpbGUgOiAnJShPLFAsTyxQKSk7ZmlsZXMgPSAiQ1AvIitmaWxlc19fDQogICAgdHJ5OmJ1a2FfYmFqdSA9IF9kYXB1bnRhX2RhcHVudGFfKGZpbGVzLCJyIikucmVhZCgpLnNwbGl0bGluZXMoKQ0KICAgIGV4Y2VwdCBGaWxlTm90Rm91bmRFcnJvcjpfZGFwdW50YV9jaWNpXygiJXPilZrilZDilZBbJXMhJXNdICVzRmlsZSBUaWRhayBBZGEiJShNLFAsTSxQKSk7dGltZS5zbGVlcCgyKTsgbWVudSgpDQogICAgYXV0b19nYW50aV9wYXNzKCdZYScpO19kYXB1bnRhX2NpY2lfKCIlc+KVmuKVkOKVkFslc+KAoiVzXSAlc0p1bWxhaCBBa3VuIDogJXMiJShPLFAsTyxQLHN0cihsZW4oYnVrYV9iYWp1KSkpKTtfZGFwdW50YV9jaWNpXygiIikNCiAgICBmb3IgbWVtZWsgaW4gYnVrYV9iYWp1Og0KICAgICAgICBpZiAnw6LigqzCoicgaW4gbWVtZWs6bWVtZWsgPSBtZW1lay5yZXBsYWNlKCfDouKCrMKiJywn4oCiJykNCiAgICAgICAga29udG9sID0gbWVtZWsucmVwbGFjZSgi4oCiIiwiIOKAoiAiKTt0aXRpZCAgPSBtZW1lay5zcGxpdCgi4oCiIikNCiAgICAgICAgX2Zvcm1hdF8gPSAiXHIlc1slc0NQJXNdICVzICAgICAgICAgICIlKE8sUCxPLGtvbnRvbCkNCiAgICAgICAgdHJ5OmNla19vcHNpKHRpdGlkWzBdLHRpdGlkWzFdLF9mb3JtYXRfKQ0KICAgICAgICBleGNlcHQ6Y29udGludWUNCiAgICBfZGFwdW50YV9jaWNpXygiIik7X2RhcHVudGFfY2ljaV8oJyVz4pWU4pWQ4pWQWyVz4oCiJXNdICVzUHJvc2VzIFBlbmdlY2VrYW4gU2VsZXNhaSclKE8sUCxPLFApKTtfZGFwdW50YV9jaWNpXygnJXPilZEnJShPKSk7X2NpY2lfZGFwdW50YV8oJyVz4pWa4pWQ4pWQWyAlc0tlbWJhbGkgJXNdJXMnJShPLFAsTyxQKSk7bWVudSgpDQoNCiMjIyBWYXJpYXNpIFRla3MNCmRlZiB2YXJfbWVudSgpOg0KICAgIF9kYXB1bnRhX2NpY2lfKCclc+KVlFsgJXNQaWxpaCBNZXRvZGUgTG9naW4gJXNdJyUoTyxQLE8pKQ0KICAgIF9kYXB1bnRhX2NpY2lfKCclc+KVoOKVkOKVkFslczElc10gJXNMb2dpbiBEZW5nYW4gVG9rZW4gWyVzQWtzZXMgVGVyYmF0YXMlc10nJShPLFAsTyxQLE8sUCkpDQogICAgX2RhcHVudGFfY2ljaV8oJyVz4pWg4pWQ4pWQWyVzMiVzXSAlc0xvZ2luIERlbmdhbiBDb29raWVzIFslc0Frc2VzIFRhayBUZXJiYXRhcyVzXSclKE8sUCxPLFAsTyxQKSkNCiAgICBfZGFwdW50YV9jaWNpXygnJXPilZEnJShPKSkNCiAgICBfZGFwdW50YV9jaWNpXygnJXPilaBbICVzRml0dXIgVGFucGEgTG9naW4gJXNdJyUoTyxQLE8pKQ0KICAgIF9kYXB1bnRhX2NpY2lfKCclc+KVoOKVkOKVkFslczMlc10gJXNUdXRvcmlhbCBQZW5nZ3VuYWFuIFNjcmlwdCclKE8sUCxPLFApKQ0KICAgIF9kYXB1bnRhX2NpY2lfKCclc+KVoOKVkOKVkFslczQlc10gJXNJbmZvIEF1dGhvciAmIFRlYW0gUHJvamVjdCclKE8sUCxPLFApKQ0KICAgIF9kYXB1bnRhX2NpY2lfKCclc+KVoOKVkOKVkFslczUlc10gJXNDZWsgSGFzaWwgQ3JhY2snJShPLFAsTyxQKSkNCiAgICBfZGFwdW50YV9jaWNpXygnJXPilaDilZDilZBbJXM2JXNdICVzQ2VrIE9wc2kgSGFzaWwgQ3JhY2snJShPLFAsTyxQKSkNCiAgICBfZGFwdW50YV9jaWNpXygnJXPilaDilZDilZBbJXMwJXNdICVzS2VsdWFyJyUoTyxQLE8sUCkpDQogICAgX2RhcHVudGFfY2ljaV8oJyVz4pWRJyUoTykpDQpkZWYgdmFyX3R1dG9yKCk6DQogICAgbWxha3UoJyVz4pWU4pWQ4pWQWyVzIFRpcHMgJiBUdXRvcmlhbCAlc10nJShPLFAsTykpDQogICAgX2RhcHVudGFfY2ljaV8oJyVz4pWRJyUoTykpDQogICAgX2RhcHVudGFfY2ljaV8oJyVz4pWg4pWQ4pWQWyVzMSVzXSAlc0NhcmEgTWVuZ2FtYmlsIFRva2VuJyUoTyxQLE8sUCkpDQogICAgX2RhcHVudGFfY2ljaV8oJyVz4pWg4pWQ4pWQWyVzMiVzXSAlc0NhcmEgTWVuZ2FtYmlsIENvb2tpZXMnJShPLFAsTyxQKSkNCiAgICBfZGFwdW50YV9jaWNpXygnJXPilaDilZDilZBbJXMzJXNdICVzQ2FyYSBNZW5kYXBhdGthbiBUYXJnZXQnJShPLFAsTyxQKSkNCiAgICBfZGFwdW50YV9jaWNpXygnJXPilaDilZDilZBbJXM0JXNdICVzQ2FyYSBTZWxhbWEgUHJvc2VzIENyYWNrJyUoTyxQLE8sUCkpDQpkZWYgdHV0b3JfdGFyZ2V0KCk6DQogICAgbWxha3UoJyVz4pWg4pWQ4pWQ4pWQ4pWm4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWXJyUoTykpDQogICAgbWxha3UoJyVz4pWRICVzMSAlc+KVkSAlc1NpYXBrYW4gQWt1biBUdW1iYWwgRGkgQ2hyb21lIFVudHVrIFByb3NlcyBDcmFjayAgICAgJXPilZEnJShPLFAsTyxQLE8pKQ0KICAgIG1sYWt1KCclc+KVkSAlczIgJXPilZEgJXNHYW50aSBQYXNzd29yZCBBa3VuIFR1bWJhbCBUZXJsZWJpaCBEYWh1bHUgICAgICAgICAgICVz4pWRJyUoTyxQLE8sUCxPKSkNCiAgICBtbGFrdSgnJXPilZEgJXMzICVz4pWRICVzQ2FyaSBUYXJnZXQgQWt1biBSYW5kb20sIERhZnRhciBUZW1hbiBIYXJ1cyBQdWJsaWsgICAlc+KVkSclKE8sUCxPLFAsTykpDQogICAgbWxha3UoJyVz4pWRICVzNCAlc+KVkSAlc1RlbWFuIChGTCkgQmViYXMsIEJpc2EgMUssIDJLLCAzSywgLDRLLCBBdGF1IDVLICAgICAgJXPilZEnJShPLFAsTyxQLE8pKQ0KICAgIG1sYWt1KCclc+KVkSAlczUgJXPilZEgJXNNYWtpbiBCYW55YWsgVGVtYW4sIEtlbXVuZ2tpbmFuIE1ha2luIEJhbnlhayBIYXNpbCAgICVz4pWRJyUoTyxQLE8sUCxPKSkNCiAgICBtbGFrdSgnJXPilZEgJXM2ICVz4pWRICVzS2V0dWsgRm90byBQcm9maWwvU2FtcHVsIFRhcmdldCAgICAgICAgICAgICAgICAgICAgICAlc+KVkSclKE8sUCxPLFAsTykpDQogICAgbWxha3UoJyVz4pWRICVzNyAlc+KVkSAlc0xpaGF0IFVSTC9MaW5rIERpIEJhZ2lhbiBBdGFzLCBUZXJkYXBhdCBcJ2lkPTEwMDAxeHhcJyAlc+KVkSclKE8sUCxPLFAsTykpDQogICAgbWxha3UoJyVz4pWRICVzOCAlc+KVkSAlc05haCwgSXR1IEFkYWxhaCBJRCBUYXJnZXQgWWFuZyBTaWFwIFVudHVrIERpIENyYWNrICAgJXPilZEnJShPLFAsTyxQLE8pKQ0KICAgIG1sYWt1KCclc+KVkSAlczkgJXPilZEgJXNCdWthIFRlcm11eC9MaW51eCBLZW11ZGlhbiBMYW5qdXQgS2UgUHJvc2VzIENyYWNrICAgICVz4pWRJyUoTyxQLE8sUCxPKSkNCiAgICBtbGFrdSgnJXPilaDilZDilZDilZDilanilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZ0nJShPKSkNCiAgICBfZGFwdW50YV9jaWNpXygnJXPilZEnJShPKSkNCmRlZiB0dXRvcl9jcmFjaygpOg0KICAgIG1sYWt1KCclc+KVoOKVkOKVkOKVkOKVpuKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVlyclKE8pKQ0KICAgIG1sYWt1KCclc+KVkSAlczEgJXPilZEgJXNNZXRvZGUgQXBpIDogUHJvc2VzIENlcGF0IFRhcGkgTXVkYWggU3BhbSAgICAgICAgICAgICVz4pWRJyUoTyxQLE8sUCxPKSkNCiAgICBtbGFrdSgnJXPilZEgJXMyICVz4pWRICVzTWV0b2RlIE1iYXNpYyA6IFByb3NlcyBBZ2FrIENlcGF0LCBKYXJhbmcgS2VuYSBTcGFtICAlc+KVkSclKE8sUCxPLFAsTykpDQogICAgbWxha3UoJyVz4pWRICVzMyAlc+KVkSAlc01ldG9kZSBNb2JpbGUgOiBQcm9zZXMgTGFtYmF0LCBLZW11bmdraW5hbiBPSyBCZXNhciAgJXPilZEnJShPLFAsTyxQLE8pKQ0KICAgIG1sYWt1KCclc+KVkSAlczQgJXPilZEgJXNDcmFjayBNZW5nZ3VuYWthbiBLdW90YSBEYXRhIChUaWRhayBTdXBwb3J0IFdpZmkpICAgICVz4pWRJyUoTyxQLE8sUCxPKSkNCiAgICBtbGFrdSgnJXPilZEgJXM1ICVz4pWRICVzQXBhYmlsYSBIYXNpbCBUaWRhayBNdW5jdWwgU2FhdCBDcmFjayBCZXJqYWxhbiAgICAgICAlc+KVkSclKE8sUCxPLFAsTykpDQogICAgbWxha3UoJyVz4pWRICVzNiAlc+KVkSAlc0FrdGlma2FuIE1vZGUgUGVzYXdhdCA1IERldGlrIFNhamEgICAgICAgICAgICAgICAgICAgJXPilZEnJShPLFAsTyxQLE8pKQ0KICAgIG1sYWt1KCclc+KVoOKVkOKVkOKVkOKVqeKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVnSclKE8pKQ0KICAgIF9kYXB1bnRhX2NpY2lfKCclc+KVkSclKE8pKQ0KZGVmIHZhcl9hdXRob3IoKToNCiAgICBtbGFrdSgnJXPilZTilZDilZBbICVzQXV0aG9yICYgVGVhbSBQcm9qZWN0ICVzXSclKE8sUCxPKSkNCiAgICBtbGFrdSgnJXPilZEnJShPKSkNCiAgICBtbGFrdSgnJXPilaDilZDilZBbJXPigKIlc10gJXNBdXRob3IgOiclKE8sUCxPLFApKQ0KICAgIG1sYWt1KCclc+KVkSAgICAg4oCiICVzRGFwdW50YSBLaHVyYXlyYSBYJyUoTyxQKSkNCiAgICBtbGFrdSgnJXPilZEgICAgIOKAoiAlc011aGFtYWQgUml6YWwgRmlhbnN5YWggSWQnJShPLFApKQ0KICAgIG1sYWt1KCclc+KVkSclKE8pKQ0KICAgIG1sYWt1KCclc+KVoOKVkOKVkFslc+KAoiVzXSAlc1RlYW0gUHJvamVjdCAlc1hOU0NPREUlcyA6JyUoTyxQLE8sUCxPLFApKQ0KICAgIG1sYWt1KCclc+KVkSAgICAg4oCiICVzQW5nZ2EgS3Vybmlhd2FuJyUoTyxQKSkNCiAgICBtbGFrdSgnJXPilZEgICAgIOKAoiAlc1lheWFuIFhEJyUoTyxQKSkNCiAgICBtbGFrdSgnJXPilZEgICAgIOKAoiAlc0JveSBIYW16YWgnJShPLFApKQ0KICAgIG1sYWt1KCclc+KVkSAgICAg4oCiICVzTGF0aXAgSGFya2F0JyUoTyxQKSkNCiAgICBtbGFrdSgnJXPilZEgICAgIOKAoiAlc1phY2t5IFRyaWNrZXInJShPLFApKQ0KICAgIG1sYWt1KCclc+KVkSAgICAg4oCiICVzUml6a3kgRGV2JyUoTyxQKSkNCiAgICBtbGFrdSgnJXPilZEgICAgIOKAoiAlc0lxYmFsIERldiclKE8sUCkpDQogICAgbWxha3UoJyVz4pWRICAgICDigKIgJXNGYWxsZW4nJShPLFApKQ0KICAgIG1sYWt1KCclc+KVkSAgICAg4oCiICVzSGFuaWZhbiclKE8sUCkpDQogICAgbWxha3UoJyVz4pWRICAgICDigKIgJXNSaXpreSBMZXZpYXRoYW4nJShPLFApKQ0KICAgIG1sYWt1KCclc+KVkSclKE8pKQ0KZGVmIHZhcl91Z2VuKCk6DQogICAgX2RhcHVudGFfY2ljaV8oIiVz4pWg4pWQ4pWQWyVzMSVzXSAlc0RhcGF0a2FuIFVzZXIgQWdlbnQiJShPLFAsTyxQKSkNCiAgICBfZGFwdW50YV9jaWNpXygiJXPilaDilZDilZBbJXMyJXNdICVzR2FudGkgVXNlciBBZ2VudCAlcyglc01hbnVhbCVzKSIlKE8sUCxPLFAsTyxQLE8pKQ0KICAgIF9kYXB1bnRhX2NpY2lfKCIlc+KVoOKVkOKVkFslczMlc10gJXNHYW50aSBVc2VyIEFnZW50ICVzKCVzU2VzdWFpa2FuIEhQJXMpIiUoTyxQLE8sUCxPLFAsTykpDQogICAgX2RhcHVudGFfY2ljaV8oIiVz4pWg4pWQ4pWQWyVzNCVzXSAlc0hhcHVzIFVzZXIgQWdlbnQiJShPLFAsTyxQKSkNCiAgICBfZGFwdW50YV9jaWNpXygiJXPilaDilZDilZBbJXM1JXNdICVzQ2VrIFVzZXIgQWdlbnQiJShPLFAsTyxQKSkNCiAgICBfZGFwdW50YV9jaWNpXygiJXPilaDilZDilZBbJXMwJXNdICVzS2VtYmFsaSIlKE8sUCxPLFApKQ0KZGVmIHN0YXJ0X21ldGhvZCgpOg0KICAgIF9kYXB1bnRhX2NpY2lfKCclc+KVkSclKE8pKQ0KICAgIF9kYXB1bnRhX2NpY2lfKCclc+KVoOKVkOKVkFslczElc10gJXNNZXRvZGUgQXBpIFYxJyUoTyxQLE8sUCkpDQogICAgX2RhcHVudGFfY2ljaV8oJyVz4pWg4pWQ4pWQWyVzMiVzXSAlc01ldG9kZSBBcGkgVjInJShPLFAsTyxQKSkNCiAgICBfZGFwdW50YV9jaWNpXygnJXPilaDilZDilZBbJXMzJXNdICVzTWV0b2RlIE1iYXNpYyBWMSclKE8sUCxPLFApKQ0KICAgIF9kYXB1bnRhX2NpY2lfKCclc+KVoOKVkOKVkFslczQlc10gJXNNZXRvZGUgTWJhc2ljIFYyJyUoTyxQLE8sUCkpDQogICAgX2RhcHVudGFfY2ljaV8oJyVz4pWg4pWQ4pWQWyVzNSVzXSAlc01ldG9kZSBNb2JpbGUgRkIgVjEnJShPLFAsTyxQKSkNCiAgICBfZGFwdW50YV9jaWNpXygnJXPilaDilZDilZBbJXM2JXNdICVzTWV0b2RlIE1vYmlsZSBGQiBWMiclKE8sUCxPLFApKQ0KZGVmIHN0YXJ0X21ldGhvZGV6eigpOg0KICAgIF9kYXB1bnRhX2NpY2lfKCclc+KVkSclKE8pKQ0KICAgIF9kYXB1bnRhX2NpY2lfKCclc+KVoOKVkOKVkFslczElc10gJXNDcmFjayBDZXBhdCAlc1slc0hhc2lsIFNlZGlraXQlc10nJShPLFAsTyxQLE8sUCxPKSkNCiAgICBfZGFwdW50YV9jaWNpXygnJXPilaDilZDilZBbJXMyJXNdICVzQ3JhY2sgTGFtYmF0ICVzWyVzSGFzaWwgQmFueWFrJXNdJyUoTyxQLE8sUCxPLFAsTykpDQogICAgX2RhcHVudGFfY2ljaV8oJyVz4pWg4pWQ4pWQWyVzMyVzXSAlc0NyYWNrIFNhbmdhdCBMYW1iYXQgJXNbJXNIYXNpbCBMZWJpaCBCYW55YWslc10nJShPLFAsTyxQLE8sUCxPKSkNCiAgICBfZGFwdW50YV9jaWNpXygnJXPilaDilZDilZBbJXM0JXNdICVzQ3JhY2sgUGFzc3dvcmQgR2FidW5nYW4nJShPLFAsTyxQKSkNCmRlZiBzdGFydGVkKCk6DQogICAgX2RhcHVudGFfY2ljaV8oJyVz4pWRJyUoTykpDQogICAgX2RhcHVudGFfY2ljaV8oJyVz4pWg4pWQ4pWQWyVz4oCiJXNdICVzQ3JhY2sgU2VkYW5nIEJlcmphbGFuLi4uJyUoTyxQLE8sUCkpDQogICAgX2RhcHVudGFfY2ljaV8oJyVz4pWg4pWQ4pWQWyVz4oCiJXNdICVzQWt1biBbT0tdIERpc2ltcGFuIEtlIE9LLyVzLnR4dCclKE8sUCxPLFAsdGFuZ2dhbCkpDQogICAgX2RhcHVudGFfY2ljaV8oJyVz4pWg4pWQ4pWQWyVz4oCiJXNdICVzQWt1biBbQ1BdIERpc2ltcGFuIEtlIENQLyVzLnR4dCclKE8sUCxPLFAsdGFuZ2dhbCkpDQogICAgX2RhcHVudGFfY2ljaV8oJyVz4pWa4pWQ4pWQWyVz4oCiJXNdICVzQWt0aWZrYW4gTW9kZSBQZXNhd2F0IFs1IERldGlrIFNhamFdIFNldGlhcCA1IE1lbml0XG4nJShPLFAsTyxQKSkNCmRlZiBrYXRhX2J1YXRfcGVyZWNvZGUoKToNCiAgICBjbGVhcigpDQogICAgX2RhcHVudGFfY2ljaV8oJyVz4pWU4pWQ4pWQWyAlc1BlcmluZ2F0YW4vV2FybmluZyAlc10nJShNLFAsTSkpDQogICAgX2RhcHVudGFfY2ljaV8oJyVz4pWRJyUoTSkpDQogICAgX2RhcHVudGFfY2ljaV8oJyVz4pWg4pWQ4pWQWyAlc0luZG9uZXNpYSAlc10nJShNLFAsTSkpDQogICAgX2RhcHVudGFfY2ljaV8oJyVz4pWRICAg4oCiICVzQW5kYSBUaWRhayBCaXNhIE1lbmd1YmFoIFNDIEluaSclKE0sUCkpDQogICAgX2RhcHVudGFfY2ljaV8oJyVz4pWRICAg4oCiICVzVGFucGEgU2VpemluIEF1dGhvciclKE0sUCkpDQogICAgX2RhcHVudGFfY2ljaV8oJyVz4pWRICAg4oCiICVzU2V0ZWxhaCBQZXJpbmdhdGFuIEluaSBNdW5jdWwnJShNLFApKQ0KICAgIF9kYXB1bnRhX2NpY2lfKCclc+KVkSAgIOKAoiAlc0JlcmFydGkgQW5kYSBUZWxhaCBNZW5ndWJhaCBJc2kgU0MgSW5pJyUoTSxQKSkNCiAgICBfZGFwdW50YV9jaWNpXygnJXPilZEgICDigKIgJXNLZW11ZGlhbiBEYXRhIERpIEhQIEFuZGEgQWthbiBUZXJoYXB1cyclKE0sUCkpDQogICAgX2RhcHVudGFfY2ljaV8oJyVz4pWRICAg4oCiICVzSmFuZ2FuIFNla2FsaS1TZWthbGkgTWVsYW5nZ2FyIEhhayBDaXB0YSclKE0sUCkpDQogICAgX2RhcHVudGFfY2ljaV8oJyVz4pWRICAg4oCiICVzQW5kYSBIYXJ1cyBNZW1iZWxpIExpc2Vuc2kgVW50dWsgUHJlbWl1bSclKE0sUCkpDQogICAgX2RhcHVudGFfY2ljaV8oJyVz4pWRICAg4oCiICVzVGlkYWsgQWRhIFlhbmcgR3JhdGlzJyUoTSxQKSkNCiAgICBfZGFwdW50YV9jaWNpXygnJXPilZEgICDigKIgJXNTdG9wIFJlY29kZSAhISEnJShNLFApKQ0KICAgIF9kYXB1bnRhX2NpY2lfKCclc+KVkSAgIOKAoiAlc1RlcmltYSBLYXNpaCclKE0sUCkpDQogICAgX2RhcHVudGFfY2ljaV8oJyVz4pWRJyUoTSkpDQogICAgX2RhcHVudGFfY2ljaV8oJyVz4pWg4pWQ4pWQWyAlc0VuZ2xpc2ggJXNdJyUoTSxQLE0pKQ0KICAgIF9kYXB1bnRhX2NpY2lfKCIlc+KVkSAgIOKAoiAlc1lvdSBDYW4ndCBDaGFuZ2UgVGhpcyBTQyIlKE0sUCkpDQogICAgX2RhcHVudGFfY2ljaV8oIiVz4pWRICAg4oCiICVzV2l0aG91dCBBdXRob3IncyBQZXJtaXNzaW9uIiUoTSxQKSkNCiAgICBfZGFwdW50YV9jaWNpXygnJXPilZEgICDigKIgJXNBZnRlciBUaGlzIFdhcm5pbmcgQXBwZWFycyclKE0sUCkpDQogICAgX2RhcHVudGFfY2ljaV8oJyVz4pWRICAg4oCiICVzTWVhbnMgWW91IEhhdmUgQ2hhbmdlZCBUaGUgQ29udGVudHMgT2YgVGhpcyBTQyclKE0sUCkpDQogICAgX2RhcHVudGFfY2ljaV8oJyVz4pWRICAg4oCiICVzVGhlbiBUaGUgRGF0YSBPbiBZb3VyIFBob25lIFdpbGwgQmUgRGVsZXRlZCclKE0sUCkpDQogICAgX2RhcHVudGFfY2ljaV8oJyVz4pWRICAg4oCiICVzTmV2ZXIgSW5mcmluZ2UgQ29weXJpZ2h0JyUoTSxQKSkNCiAgICBfZGFwdW50YV9jaWNpXygnJXPilZEgICDigKIgJXNOb3RoaW5nIGlzIGZyZWUnJShNLFApKQ0KICAgIF9kYXB1bnRhX2NpY2lfKCclc+KVkSAgIOKAoiAlc1N0b3AgUmVjb2RlICEhISclKE0sUCkpDQogICAgX2RhcHVudGFfY2ljaV8oJyVz4pWRICAg4oCiICVzVGhhbmsgWW91JyUoTSxQKSkNCiAgICBfZGFwdW50YV9jaWNpXygnJXPilZEnJShNKSkNCiAgICBfZGFwdW50YV9jaWNpXygnJXPilZrilZDilZBbICVzUmVnYXJkIERhcHVudGEgJXNdJXMnJShNLFAsTSxQKSkNCiAgICBfZGFwdW50YV9jaWNpXygnJXMnJShQKSkNCiAgICBfY2ljaV9jaWNpXygpDQoNCiMjIyBNZW1idWF0IEZvbGRlciBEaXJla3RvcmkNCmRlZiBmb2xkZXIoKToNCiAgICB0cnk6b3MubWtkaXIoIkNQIikNCiAgICBleGNlcHQ6cGFzcw0KICAgIHRyeTpvcy5ta2RpcigiT0siKQ0KICAgIGV4Y2VwdDpwYXNzDQoNCiMjIyBUcmlnZ2VyDQppZiBfX25hbWVfXz09J19fbWFpbl9fJzoNCiAgICBvcy5zeXN0ZW0oJ2dpdCBwdWxsJykNCiAgICBjbGVhcigpDQogICAgZm9sZGVyKCkNCiAgICBtZW51KCk="))